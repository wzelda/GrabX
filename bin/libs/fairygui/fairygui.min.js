(function(fa,ga,k){var F=k["static"],m=k["class"],g=k.getset,S=k.__newvec,T=laya.utils.Browser;fa=laya.utils.Byte;var U=laya.filters.ColorFilter,Aa=laya.events.Event,P=laya.events.EventDispatcher,Ba=laya.html.dom.HTMLDivElement,ha=laya.utils.Handler,Q=laya.utils.HitArea,Ca=laya.display.Input,R=laya.utils.Log,y=laya.maths.Point,D=laya.maths.Rectangle,Da=laya.renders.Render,V=laya.media.SoundManager,I=laya.display.Sprite,ia=laya.display.Text,W=laya.resource.Texture,X=laya.utils.Utils;k["interface"]("fairygui.IUISource");k["interface"]("fairygui.gears.IColorGear");k["interface"]("fairygui.gears.IAnimationGear");var t=function(){function c(){}m(c,"fairygui.utils.ToolSet");c.getFileName=function(d){var a=d.lastIndexOf("/");-1!=a&&(d=d.substr(a+1));a=d.lastIndexOf("\\");-1!=a&&(d=d.substr(a+1));a=d.lastIndexOf(".");return-1!=a?d.substring(0,a):d};c.startsWith=function(d,a,b){void 0===b&&(b=!1);if(d){if(d.length<a.length)return!1;d=d.substring(0,a.length);return b?d.toLowerCase()==a.toLowerCase():d==a}return!1};c.endsWith=function(d,a,b){void 0===b&&(b=!1);if(d){if(d.length<a.length)return!1;d=d.substring(d.length-a.length);return b?d.toLowerCase()==a.toLowerCase():d==a}return!1};c.trim=function(d){return fairygui.utils.ToolSet.trimLeft(fairygui.utils.ToolSet.trimRight(d))};c.trimLeft=function(d){for(var a,b=0;b<d.length&&(a=d.charAt(b)," "==a||"\n"==a||"\r"==a);b++);return d.substr(b)};c.trimRight=function(d){for(var a,b=d.length-1;0<=b&&(a=d.charAt(b)," "==a||"\n"==a||"\r"==a);b--);return d.substring(0,b+1)};c.convertToHtmlColor=function(d,a){void 0===a&&(a=!1);var b;b=a?(d>>24&255).toString(16):"";var e=(d>>16&255).toString(16),f=(d>>8&255).toString(16),c=(d&255).toString(16);1==b.length&&(b="0"+b);1==e.length&&(e="0"+e);1==f.length&&(f="0"+f);1==c.length&&(c="0"+c);return"#"+b+e+f+c};c.convertFromHtmlColor=function(c,a){void 0===a&&(a=!1);if(1>c.length)return 0;"#"==c.charAt(0)&&(c=c.substr(1));return 8==c.length?(parseInt(c.substr(0,2),16)<<24)+parseInt(c.substr(2),16):a?4278190080+parseInt(c,16):parseInt(c,16)};c.displayObjectToGObject=function(c){for(;null!=c&&!(c instanceof laya.display.Stage);){if(c.$owner)return c.$owner;c=c.parent}return null};c.encodeHTML=function(c){return c?c.replace("\x26","\x26amp;").replace("\x3c","\x26lt;").replace("\x3e","\x26gt;").replace("'","\x26apos;"):""};c.parseUBB=function(c){return fairygui.utils.ToolSet.defaultUBBParser.parse(c)};c.removeUBB=function(c){return fairygui.utils.ToolSet.defaultUBBParser.parse(c,!0)};c.clamp=function(c,a,b){c<a?c=a:c>b&&(c=b);return c};c.clamp01=function(c){1<c?c=1:0>c&&(c=0);return c};c.lerp=function(c,a,b){return c+b*(a-c)};F(c,["defaultUBBParser",function(){return this.defaultUBBParser=new Ea}]);return c}(),ja=function(){function c(){this.bottom=this.top=this.right=this.left=0}m(c,"fairygui.Margin");c.prototype.copy=function(c){this.top=c.top;this.bottom=c.bottom;this.left=c.left;this.right=c.right};return c}();(function(){function c(){}m(c,"fairygui.GroupLayoutType");c.None=0;c.Horizontal=1;c.Vertical=2;return c})();var E=function(){function c(){this.packageItem=this.data=null;this._y=this._x=0;this._alpha=1;this._rotation=0;this._touchable=this._visible=!0;this._draggable=this._grayed=!1;this._scaleY=this._scaleX=1;this._pivotY=this._pivotX=this._skewY=this._skewX=0;this._pivotAsAnchor=!1;this._sortingOrder=this._pivotOffsetY=this._pivotOffsetX=0;this._internalVisible=!0;this._focusable=this._handlingController=!1;this._tooltips=null;this._pixelSnapping=!1;this._displayObject=this._dragBounds=this._gears=this._group=this._relations=null;this.initHeight=this.initWidth=this.sourceHeight=this.sourceWidth=this.maxHeight=this.maxWidth=this.minHeight=this.minWidth=this._yOffset=0;this._parent=null;this._rawHeight=this._rawWidth=this._height=this._width=0;this._gearLocked=this._underConstruct=!1;this._sizePercentInGroup=0;this._touchDownPoint=null;this._id=""+fairygui.GObject._gInstanceCounter++;this._name="";this.createDisplayObject();this._relations=new Fa(this);this._gears=S(8,null)}m(c,"fairygui.GObject");var d=c.prototype;d.setXY=function(a,b){if(this._x!=a||this._y!=b){var e=a-this._x,f=b-this._y;this._x=a;this._y=b;this.handleXYChanged();this instanceof fairygui.GGroup&&this.moveChildren(e,f);this.updateGear(1);!this._parent||this._parent instanceof fairygui.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.displayObject.event("fui_xy_changed"));c.draggingObject!=this||c.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,c.sGlobalRect)}};d.center=function(a){void 0===a&&(a=!1);var b;b=null!=this._parent?this.parent:this.root;this.setXY((b.width-this.width)/2,(b.height-this.height)/2);a&&(this.addRelation(b,3),this.addRelation(b,10))};d.setSize=function(a,b,e){void 0===e&&(e=!1);if(this._rawWidth!=a||this._rawHeight!=b){this._rawWidth=a;this._rawHeight=b;a<this.minWidth&&(a=this.minWidth);b<this.minHeight&&(b=this.minHeight);0<this.maxWidth&&a>this.maxWidth&&(a=this.maxWidth);0<this.maxHeight&&b>this.maxHeight&&(b=this.maxHeight);var f=a-this._width,c=b-this._height;this._width=a;this._height=b;this.handleSizeChanged();if(0!=this._pivotX||0!=this._pivotY)this._pivotAsAnchor?this.applyPivot():(e||this.setXY(this.x-this._pivotX*f,this.y-this._pivotY*c),this.updatePivotOffset());this instanceof fairygui.GGroup&&this.resizeChildren(f,c);this.updateGear(2);this._parent&&(this._relations.onOwnerSizeChanged(f,c,this._pivotAsAnchor||!e),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0));this.displayObject.event("fui_size_changed")}};d.ensureSizeCorrect=function(){};d.setScale=function(a,b){if(this._scaleX!=a||this._scaleY!=b)this._scaleX=a,this._scaleY=b,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2)};d.setSkew=function(a,b){if(this._skewX!=a||this._skewY!=b)this._skewX=a,this._skewY=b,null!=this._displayObject&&(this._displayObject.skew(-a,b),this.applyPivot())};d.setPivot=function(a,b,e){void 0===b&&(b=0);void 0===e&&(e=!1);if(this._pivotX!=a||this._pivotY!=b||this._pivotAsAnchor!=e)this._pivotX=a,this._pivotY=b,this._pivotAsAnchor=e,this.updatePivotOffset(),this.handleXYChanged()};d.internalSetPivot=function(a,b,e){this._pivotX=a;this._pivotY=b;(this._pivotAsAnchor=e)&&this.handleXYChanged()};d.updatePivotOffset=function(){if(null!=this._displayObject)if(!this._displayObject.transform||0==this._pivotX&&0==this._pivotY)this._pivotOffsetY=this._pivotOffsetX=0;else{fairygui.GObject.sHelperPoint.x=this._pivotX*this._width;fairygui.GObject.sHelperPoint.y=this._pivotY*this._height;var a=this._displayObject.transform.transformPoint(fairygui.GObject.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-a.x;this._pivotOffsetY=this._pivotY*this._height-a.y}};d.applyPivot=function(){if(0!=this._pivotX||0!=this._pivotY)this.updatePivotOffset(),this.handleXYChanged()};d.requestFocus=function(){for(var a=this;a&&!a._focusable;)a=a.parent;null!=a&&(this.root.focus=a)};d.__rollOver=function(a){k.timer.once(100,this,this.__doShowTooltips)};d.__doShowTooltips=function(){this.root&&this.root.showTooltips(this._tooltips)};d.__rollOut=function(a){k.timer.clear(this,this.__doShowTooltips);this.root.hideTooltips()};d.getGear=function(a){var b=this._gears[a];if(null==b){switch(a){case 0:b=new Ga(this);break;case 1:b=new Ha(this);break;case 2:b=new ka(this);break;case 3:b=new la(this);break;case 4:b=new ba(this);break;case 5:b=new ma(this);break;case 6:b=new Ia(this);break;case 7:b=new Ja(this);break;default:throw Error("FairyGUI: invalid gear index!");}this._gears[a]=b}return b};d.updateGear=function(a){this._underConstruct||this._gearLocked||(a=this._gears[a],null!=a&&null!=a.controller&&a.updateState())};d.checkGearController=function(a,b){return null!=this._gears[a]&&this._gears[a].controller==b};d.updateGearFromRelations=function(a,b,e){null!=this._gears[a]&&this._gears[a].updateFromRelations(b,e)};d.addDisplayLock=function(){var a=this._gears[0];return a&&a.controller?(a=a.addLock(),this.checkGearDisplay(),a):0};d.releaseDisplayLock=function(a){var b=this._gears[0];b&&b.controller&&(b.releaseLock(a),this.checkGearDisplay())};d.checkGearDisplay=function(){if(!this._handlingController){var a=null==this._gears[0]||this._gears[0].connected;a!=this._internalVisible&&(this._internalVisible=a,this._parent&&this._parent.childStateChanged(this))}};d.addRelation=function(a,b,e){void 0===e&&(e=!1);this._relations.add(a,b,e)};d.removeRelation=function(a,b){void 0===b&&(b=0);this._relations.remove(a,b)};d.removeFromParent=function(){this._parent&&this._parent.removeChild(this)};d.dispose=function(){this.removeFromParent();this._relations.dispose();this._displayObject.destroy();this._displayObject=null;for(var a=0;8>a;a++){var b=this._gears[a];null!=b&&b.dispose()}};d.onClick=function(a,b,e){this.on("click",a,b,e)};d.offClick=function(a,b){this.off("click",a,b)};d.hasClickListener=function(){return this._displayObject.hasListener("click")};d.on=function(a,b,e,f){this._displayObject.on(a,b,e,f)};d.off=function(a,b,e){this._displayObject.off(a,b,e)};d.startDrag=function(a){null!=this._displayObject.stage&&this.dragBegin()};d.stopDrag=function(){this.dragEnd()};d.localToGlobal=function(a,b,e){void 0===a&&(a=0);void 0===b&&(b=0);this._pivotAsAnchor&&(a+=this._pivotX*this._width,b+=this._pivotY*this._height);if(e)return e.x=a,e.y=b,this._displayObject.localToGlobal(e,!1);e=fairygui.GObject.sHelperPoint;e.x=a;e.y=b;return this._displayObject.localToGlobal(e,!0)};d.globalToLocal=function(a,b,e){void 0===a&&(a=0);void 0===b&&(b=0);e?(e.x=a,e.y=b,this._displayObject.globalToLocal(e,!1)):(e=fairygui.GObject.sHelperPoint,e.x=a,e.y=b,e=this._displayObject.globalToLocal(e,!0));this._pivotAsAnchor&&(e.x-=this._pivotX*this._width,e.y-=this._pivotY*this._height);return e};d.localToGlobalRect=function(a,b,e,f,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);null==c&&(c=new D);var d=this.localToGlobal(a,b);c.x=d.x;c.y=d.y;d=this.localToGlobal(a+e,b+f);c.width=d.x-c.x;c.height=d.y-c.y;return c};d.globalToLocalRect=function(a,b,e,f,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===e&&(e=0);void 0===f&&(f=0);null==c&&(c=new D);var d=this.globalToLocal(a,b);c.x=d.x;c.y=d.y;d=this.globalToLocal(a+e,b+f);c.width=d.x-c.x;c.height=d.y-c.y;return c};d.handleControllerChanged=function(a){this._handlingController=!0;for(var b=0;8>b;b++){var e=this._gears[b];null!=e&&e.controller==a&&e.apply()}this._handlingController=!1;this.checkGearDisplay()};d.createDisplayObject=function(){this._displayObject=new I;this._displayObject.$owner=this};d.handleXYChanged=function(){var a=this._x,b=this._y+this._yOffset;this._pivotAsAnchor&&(a-=this._pivotX*this._width,b-=this._pivotY*this._height);this._pixelSnapping&&(a=Math.round(a),b=Math.round(b));this._displayObject.pos(a+this._pivotOffsetX,b+this._pivotOffsetY)};d.handleSizeChanged=function(){null!=this._displayObject&&this._displayObject.size(this._width,this._height)};d.handleScaleChanged=function(){null!=this._displayObject&&this._displayObject.scale(this._scaleX,this._scaleY)};d.handleGrayedChanged=function(){this._displayObject&&(this._grayed?(null==c.grayFilter&&(c.grayFilter=new U([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])),this._displayObject.filters=[c.grayFilter]):this._displayObject.filters=null)};d.handleAlphaChanged=function(){this._displayObject&&(this._displayObject.alpha=this._alpha)};d.handleVisibleChanged=function(){this._displayObject&&(this._displayObject.visible=this.internalVisible2)};d.constructFromResource=function(){};d.setup_beforeAdd=function(a,b){a.seek(b,0);a.skip(5);var e,f;this._id=a.readS();this._name=a.readS();e=a.getInt32();f=a.getInt32();this.setXY(e,f);a.readBool()&&(this.initWidth=a.getInt32(),this.initHeight=a.getInt32(),this.setSize(this.initWidth,this.initHeight,!0));a.readBool()&&(this.minWidth=a.getInt32(),this.maxWidth=a.getInt32(),this.minHeight=a.getInt32(),this.maxHeight=a.getInt32());a.readBool()&&(e=a.getFloat32(),f=a.getFloat32(),this.setScale(e,f));a.readBool()&&(e=a.getFloat32(),f=a.getFloat32(),this.setSkew(e,f));a.readBool()&&(e=a.getFloat32(),f=a.getFloat32(),this.setPivot(e,f,a.readBool()));e=a.getFloat32();1!=e&&(this.alpha=e);e=a.getFloat32();0!=e&&(this.rotation=e);a.readBool()||(this.visible=!1);a.readBool()||(this.touchable=!1);a.readBool()&&(this.grayed=!0);2==a.readByte()&&(this.blendMode="lighter");1==a.readByte()&&(e=new na,e.adjustBrightness(a.getFloat32()),e.adjustContrast(a.getFloat32()),e.adjustSaturation(a.getFloat32()),e.adjustHue(a.getFloat32()),this.filters=[new U(e)]);e=a.readS();null!=e&&(this.data=e)};d.setup_afterAdd=function(a,b){a.seek(b,1);var e=a.readS();null!=e&&(this.tooltips=e);e=a.getInt16();0<=e&&(this.group=this.parent.getChildAt(e));a.seek(b,2);for(var e=a.getInt16(),f=0;f<e;f++){var c=a.getInt16(),c=c+a.pos;this.getGear(a.readByte()).setup(a);a.pos=c}};d.initDrag=function(){if(this._draggable)this.on("mousedown",this,this.__begin);else this.off("mousedown",this,this.__begin)};d.dragBegin=function(){null!=fairygui.GObject.draggingObject&&fairygui.GObject.draggingObject.stopDrag();fairygui.GObject.sGlobalDragStart.x=k.stage.mouseX;fairygui.GObject.sGlobalDragStart.y=k.stage.mouseY;this.localToGlobalRect(0,0,this.width,this.height,fairygui.GObject.sGlobalRect);fairygui.GObject.draggingObject=this;k.stage.on("mousemove",this,this.__moving2);k.stage.on("mouseup",this,this.__end2)};d.dragEnd=function(){fairygui.GObject.draggingObject==this&&(k.stage.off("mousemove",this,this.__moving2),k.stage.off("mouseup",this,this.__end2),fairygui.GObject.draggingObject=null);fairygui.GObject.sDraggingQuery=!1};d.reset=function(){k.stage.off("mousemove",this,this.__moving);k.stage.off("mouseup",this,this.__end)};d.__begin=function(){null==this._touchDownPoint&&(this._touchDownPoint=new y);this._touchDownPoint.x=k.stage.mouseX;this._touchDownPoint.y=k.stage.mouseY;k.stage.on("mousemove",this,this.__moving);k.stage.on("mouseup",this,this.__end)};d.__end=function(){this.reset()};d.__moving=function(a){var b=p.touchDragSensitivity;null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-k.stage.mouseX)<b&&Math.abs(this._touchDownPoint.y-k.stage.mouseY)<b||(this.reset(),fairygui.GObject.sDraggingQuery=!0,A.dispatch("fui_drag_start",this._displayObject,a),fairygui.GObject.sDraggingQuery&&this.dragBegin())};d.__moving2=function(a){var b=k.stage.mouseX-fairygui.GObject.sGlobalDragStart.x+fairygui.GObject.sGlobalRect.x,e=k.stage.mouseY-fairygui.GObject.sGlobalDragStart.y+fairygui.GObject.sGlobalRect.y;if(null!=this._dragBounds){var f=C.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,fairygui.GObject.sDragHelperRect);b<f.x?b=f.x:b+fairygui.GObject.sGlobalRect.width>f.right&&(b=f.right-fairygui.GObject.sGlobalRect.width,b<f.x&&(b=f.x));e<f.y?e=f.y:e+fairygui.GObject.sGlobalRect.height>f.bottom&&(e=f.bottom-fairygui.GObject.sGlobalRect.height,e<f.y&&(e=f.y))}c.sUpdateInDragging=!0;b=this.parent.globalToLocal(b,e,fairygui.GObject.sHelperPoint);this.setXY(Math.round(b.x),Math.round(b.y));c.sUpdateInDragging=!1;A.dispatch("fui_drag_move",this._displayObject,a)};d.__end2=function(a){fairygui.GObject.draggingObject==this&&(this.stopDrag(),A.dispatch("fui_drag_end",this._displayObject,a))};g(0,d,"yMin",function(){return this._pivotAsAnchor?this._y-this._height*this._pivotY:this._y},function(a){this._pivotAsAnchor?this.setXY(this._x,a+this._height*this._pivotY):this.setXY(this._x,a)});g(0,d,"id",function(){return this._id});g(0,d,"name",function(){return this._name},function(a){this._name=a});g(0,d,"rotation",function(){return this._rotation},function(a){this._rotation!=a&&(this._rotation=a,null!=this._displayObject&&(this._displayObject.rotation=this.normalizeRotation,this.applyPivot()),this.updateGear(3))});g(0,d,"width",function(){this.ensureSizeCorrect();this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect();return this._width},function(a){this.setSize(a,this._rawHeight)});g(0,d,"x",function(){return this._x},function(a){this.setXY(a,this._y)});g(0,d,"draggable",function(){return this._draggable},function(a){this._draggable!=a&&(this._draggable=a,this.initDrag())});g(0,d,"y",function(){return this._y},function(a){this.setXY(this._x,a)});g(0,d,"gearXY",function(){return this.getGear(1)});g(0,d,"xMin",function(){return this._pivotAsAnchor?this._x-this._width*this._pivotX:this._x},function(a){this._pivotAsAnchor?this.setXY(a+this._width*this._pivotX,this._y):this.setXY(a,this._y)});g(0,d,"pixelSnapping",function(){return this._pixelSnapping},function(a){this._pixelSnapping!=a&&(this._pixelSnapping=a,this.handleXYChanged())});g(0,d,"height",function(){this.ensureSizeCorrect();this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect();return this._height},function(a){this.setSize(this._rawWidth,a)});g(0,d,"asButton",function(){return this});g(0,d,"actualWidth",function(){return this.width*Math.abs(this._scaleX)});g(0,d,"actualHeight",function(){return this.height*Math.abs(this._scaleY)});g(0,d,"blendMode",function(){return this._displayObject.blendMode},function(a){this._displayObject.blendMode=a});g(0,d,"scaleX",function(){return this._scaleX},function(a){this.setScale(a,this._scaleY)});g(0,d,"scaleY",function(){return this._scaleY},function(a){this.setScale(this._scaleX,a)});g(0,d,"skewX",function(){return this._skewX},function(a){this.setSkew(a,this._skewY)});g(0,d,"skewY",function(){return this._skewY},function(a){this.setSkew(this._skewX,a)});g(0,d,"pivotAsAnchor",function(){return this._pivotAsAnchor});g(0,d,"pivotX",function(){return this._pivotX},function(a){this.setPivot(a,this._pivotY)});g(0,d,"asTextInput",function(){return this});g(0,d,"asLoader",function(){return this});g(0,d,"pivotY",function(){return this._pivotY},function(a){this.setPivot(this._pivotX,a)});g(0,d,"displayObject",function(){return this._displayObject});g(0,d,"normalizeRotation",function(){var a=this._rotation%360;180<a?a-=360:-180>a&&(a=360+a);return a});g(0,d,"touchable",function(){return this._touchable},function(a){this._touchable!=a&&(this._touchable=a,this.updateGear(3),this instanceof fairygui.GImage||this instanceof fairygui.GMovieClip||!(!(this instanceof fairygui.GTextField)||this instanceof fairygui.GTextInput||this instanceof fairygui.GRichTextField)||null==this._displayObject||(this._displayObject.mouseEnabled=this._touchable))});g(0,d,"alpha",function(){return this._alpha},function(a){this._alpha!=a&&(this._alpha=a,this.handleAlphaChanged(),this.updateGear(3))});g(0,d,"grayed",function(){return this._grayed},function(a){this._grayed!=a&&(this._grayed=a,this.handleGrayedChanged(),this.updateGear(3))});g(0,d,"dragBounds",function(){return this._dragBounds},function(a){this._dragBounds=a});g(0,d,"asProgress",function(){return this});g(0,d,"enabled",function(){return!this._grayed&&this._touchable},function(a){this.grayed=!a;this.touchable=a});g(0,d,"sortingOrder",function(){return this._sortingOrder},function(a){0>a&&(a=0);if(this._sortingOrder!=a){var b=this._sortingOrder;this._sortingOrder=a;null!=this._parent&&this._parent.childSortingOrderChanged(this,b,this._sortingOrder)}});g(0,d,"visible",function(){return this._visible},function(a){this._visible!=a&&(this._visible=a,this.handleVisibleChanged(),this._parent&&this._parent.setBoundsChangedFlag())});g(0,d,"internalVisible",function(){return this._internalVisible&&(!this._group||this._group.internalVisible)&&!this._displayObject._cacheStyle.maskParent});g(0,d,"internalVisible2",function(){return this._visible&&(!this._group||this._group.internalVisible2)});g(0,d,"icon",function(){return null},function(a){});g(0,d,"asGraph",function(){return this});g(0,d,"gearSize",function(){return this.getGear(2)});g(0,d,"focusable",function(){return this._focusable},function(a){this._focusable=a});g(0,d,"focused",function(){return this.root.focus==this});g(0,d,"tooltips",function(){return this._tooltips},function(a){this._tooltips&&(this.off("mouseover",this,this.__rollOver),this.off("mouseout",this,this.__rollOut));if(this._tooltips=a)this.on("mouseover",this,this.__rollOver),this.on("mouseout",this,this.__rollOut)});g(0,d,"dragging",function(){return fairygui.GObject.draggingObject==this});g(0,d,"group",function(){return this._group},function(a){this._group!=a&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=a,null!=this._group&&this._group.setBoundsChangedFlag(!0))});g(0,d,"filters",function(){return this._displayObject.filters},function(a){this._displayObject.filters=a});g(0,d,"inContainer",function(){return null!=this._displayObject&&null!=this._displayObject.parent});g(0,d,"resourceURL",function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null});g(0,d,"onStage",function(){return null!=this._displayObject&&null!=this._displayObject.stage});g(0,d,"root",function(){if(this instanceof fairygui.GRoot)return this;for(var a=this._parent;a;){if(a instanceof fairygui.GRoot)return a;a=a.parent}return C.inst});g(0,d,"gearLook",function(){return this.getGear(3)});g(0,d,"asCom",function(){return this});g(0,d,"relations",function(){return this._relations});g(0,d,"parent",function(){return this._parent},function(a){this._parent=a});g(0,d,"asLabel",function(){return this});g(0,d,"asTextField",function(){return this});g(0,d,"asImage",function(){return this});g(0,d,"asGroup",function(){return this});g(0,d,"asRichTextField",function(){return this});g(0,d,"asList",function(){return this});g(0,d,"asSlider",function(){return this});g(0,d,"asComboBox",function(){return this});g(0,d,"asMovieClip",function(){return this});g(0,d,"text",function(){return null},function(a){});g(0,d,"isDisposed",function(){return null==this._displayObject});c.cast=function(a){return a.$owner};c.draggingObject=null;c._gInstanceCounter=0;c.grayFilter=null;c.sDraggingQuery=!1;c.sUpdateInDragging=!1;F(c,["sGlobalDragStart",function(){return this.sGlobalDragStart=new y},"sGlobalRect",function(){return this.sGlobalRect=new D},"sHelperPoint",function(){return this.sHelperPoint=new y},"sDragHelperRect",function(){return this.sDragHelperRect=new D}]);return c}();(function(){function c(){}m(c,"fairygui.RelationType");c.Left_Left=0;c.Left_Center=1;c.Left_Right=2;c.Center_Center=3;c.Right_Left=4;c.Right_Center=5;c.Right_Right=6;c.Top_Top=7;c.Top_Middle=8;c.Top_Bottom=9;c.Middle_Middle=10;c.Bottom_Top=11;c.Bottom_Middle=12;c.Bottom_Bottom=13;c.Width=14;c.Height=15;c.LeftExt_Left=16;c.LeftExt_Right=17;c.RightExt_Left=18;c.RightExt_Right=19;c.TopExt_Top=20;c.TopExt_Bottom=21;c.BottomExt_Top=22;c.BottomExt_Bottom=23;c.Size=24;return c})();(function(){function c(){}m(c,"fairygui.ChildrenRenderOrder");c.Ascent=0;c.Descent=1;c.Arch=2;return c})();var Ea=function(){function c(){this._text=null;this._readPos=0;this.smallFontSize=12;this.normalFontSize=14;this.largeFontSize=16;this.defaultImgHeight=this.defaultImgWidth=0;this._handlers={};this._handlers.url=this.onTag_URL;this._handlers.img=this.onTag_IMG;this._handlers.b=this.onTag_Simple;this._handlers.i=this.onTag_Simple;this._handlers.u=this.onTag_Simple;this._handlers.sup=this.onTag_Simple;this._handlers.sub=this.onTag_Simple;this._handlers.color=this.onTag_COLOR;this._handlers.font=this.onTag_FONT;this._handlers.size=this.onTag_SIZE}m(c,"fairygui.utils.UBBParser");var d=c.prototype;d.onTag_URL=function(a,b,e){return b?"\x3c/a\x3e":null!=e?'\x3ca href\x3d"'+e+'" target\x3d"_blank"\x3e':'\x3ca href\x3d"'+this.getTagText()+'" target\x3d"_blank"\x3e'};d.onTag_IMG=function(a,b,e){return b?null:(a=this.getTagText(!0))?this.defaultImgWidth?'\x3cimg src\x3d"'+a+'" width\x3d"'+this.defaultImgWidth+'" height\x3d"'+this.defaultImgHeight+'"/\x3e':'\x3cimg src\x3d"'+a+'"/\x3e':null};d.onTag_Simple=function(a,b,e){return b?"\x3c/"+a+"\x3e":"\x3c"+a+"\x3e"};d.onTag_COLOR=function(a,b,e){return b?"\x3c/span\x3e":'\x3cspan style\x3d"color:'+e+'"\x3e'};d.onTag_FONT=function(a,b,e){return b?"\x3c/span\x3e":'\x3cspan style\x3d"font-family:'+e+'"\x3e'};d.onTag_SIZE=function(a,b,e){if(b)return"\x3c/span\x3e";"normal"==e?e=""+this.normalFontSize:"small"==e?e=""+this.smallFontSize:"large"==e?e=""+this.largeFontSize:e.length&&"+"==e.charAt(0)?e=""+(this.smallFontSize+parseInt(e.substr(1))):e.length&&"-"==e.charAt(0)&&(e=""+(this.smallFontSize-parseInt(e.substr(1))));return'\x3cspan style\x3d"font-size:'+e+'"\x3e'};d.getTagText=function(a){void 0===a&&(a=!1);for(var b=this._readPos,e,f="";-1!=(e=this._text.indexOf("[",b));)if(92==this._text.charCodeAt(e-1))f+=this._text.substring(b,e-1),f+="[",b=e+1;else{f+=this._text.substring(b,e);break}if(-1==e)return null;a&&(this._readPos=e);return f};d.parse=function(a,b){void 0===b&&(b=!1);this._text=a;for(var e=0,f,c,d,H,g="";-1!=(f=this._text.indexOf("[",e));)if(0<f&&92==this._text.charCodeAt(f-1))g+=this._text.substring(e,f-1),g+="[",e=f+1;else{g+=this._text.substring(e,f);e=f;f=this._text.indexOf("]",e);if(-1==f)break;d="/"==this._text.charAt(e+1);H=this._text.substring(d?e+2:e+1,f);this._readPos=f+1;f=null;c=H.indexOf("\x3d");-1!=c&&(f=H.substring(c+1),H=H.substring(0,c));H=H.toLowerCase();c=this._handlers[H];null!=c?b||(e=c.call(this,H,d,f),null!=e&&(g+=e)):g+=this._text.substring(e,this._readPos);e=this._readPos}e<this._text.length&&(g+=this._text.substr(e));this._text=null;return g};F(c,["inst",function(){return this.inst=new c}]);return c}();(function(){function c(){}m(c,"fairygui.FlipType");c.None=0;c.Horizontal=1;c.Vertical=2;c.Both=3;return c})();var B=function(){function c(){}m(c,"fairygui.tween.GTween");c.to=function(c,a,b){return K.createTween()._to(c,a,b)};c.to2=function(c,a,b,e,f){return K.createTween()._to2(c,a,b,e,f)};c.to3=function(c,a,b,e,f,n,r){return K.createTween()._to3(c,a,b,e,f,n,r)};c.to4=function(c,a,b,e,f,n,r,g,l){return K.createTween()._to4(c,a,b,e,f,n,r,g,l)};c.toColor=function(c,a,b){return K.createTween()._toColor(c,a,b)};c.delayedCall=function(c){return K.createTween().setDelay(c)};c.shake=function(c,a,b,e){return K.createTween()._shake(c,a,b,e)};c.isTweening=function(c,a){return K.isTweening(c,a)};c.kill=function(c,a,b){K.killTweens(c,!1,null)};c.getTween=function(c,a){return K.getTween(c,a)};c.catchCallbackExceptions=!0;return c}(),A=function(){function c(){}m(c,"fairygui.Events");c.createEvent=function(c,a,b){fairygui.Events.$event.setTo(c,a,b?b.target:a);b?(fairygui.Events.$event.touchId=b.touchId,fairygui.Events.$event.nativeEvent=b.nativeEvent):fairygui.Events.$event.nativeEvent=null;fairygui.Events.$event._stoped=!1;return fairygui.Events.$event};c.dispatch=function(c,a,b){a.event(c,fairygui.Events.createEvent(c,a,b))};c.STATE_CHANGED="fui_state_changed";c.XY_CHANGED="fui_xy_changed";c.SIZE_CHANGED="fui_size_changed";c.SIZE_DELAY_CHANGE="fui_size_delay_change";c.CLICK_ITEM="fui_click_item";c.SCROLL="fui_scroll";c.SCROLL_END="fui_scroll_end";c.DROP="fui_drop";c.FOCUS_CHANGED="fui_focus_changed";c.DRAG_START="fui_drag_start";c.DRAG_MOVE="fui_drag_move";c.DRAG_END="fui_drag_end";c.PULL_DOWN_RELEASE="fui_pull_down_release";c.PULL_UP_RELEASE="fui_pull_up_release";c.GEAR_STOP="fui_gear_stop";F(c,["$event",function(){return this.$event=new Aa}]);return c}(),Ka=function(){function c(){this._propType=this._target=null;this._paused=this._killed=!1;this._breakpoint=this._duration=this._delay=NaN;this._easeType=0;this._easePeriod=this._easeOvershootOrAmplitude=NaN;this._repeat=0;this._yoyo=!1;this._timeScale=NaN;this._snapping=!1;this._onCompleteCaller=this._onComplete=this._onStartCaller=this._onStart=this._onUpdateCaller=this._onUpdate=this._userData=null;this._valueSize=0;this._started=!1;this._ended=0;this._normalizedTime=this._elapsedTime=NaN;this._startValue=new Y;this._endValue=new Y;this._value=new Y;this._deltaValue=new Y;this._reset()}m(c,"fairygui.tween.GTweener");var d=c.prototype;d.setDelay=function(a){this._delay=a;return this};d.setDuration=function(a){this._duration=a;return this};d.setBreakpoint=function(a){this._breakpoint=a;return this};d.setEase=function(a){this._easeType=a;return this};d.setEasePeriod=function(a){this._easePeriod=a;return this};d.setEaseOvershootOrAmplitude=function(a){this._easeOvershootOrAmplitude=a;return this};d.setRepeat=function(a,b){void 0===b&&(b=!1);this._repeat=a;this._yoyo=b;return this};d.setTimeScale=function(a){this._timeScale=a;return this};d.setSnapping=function(a){this._snapping=a;return this};d.setTarget=function(a,b){this._target=a;this._propType=b;return this};d.setUserData=function(a){this._userData=a;return this};d.onUpdate=function(a,b){this._onUpdate=a;this._onUpdateCaller=b;return this};d.onStart=function(a,b){this._onStart=a;this._onStartCaller=b;return this};d.onComplete=function(a,b){this._onComplete=a;this._onCompleteCaller=b;return this};d.setPaused=function(a){this._paused=a;return this};d.seek=function(a){if(!this._killed){this._elapsedTime=a;if(this._elapsedTime<this._delay)if(this._started)this._elapsedTime=this._delay;else return;this.update()}};d.kill=function(a){void 0===a&&(a=!1);this._killed||(a&&(0==this._ended&&(this._elapsedTime=0<=this._breakpoint?this._delay+this._breakpoint:0<=this._repeat?this._delay+this._duration*(this._repeat+1):this._delay+2*this._duration,this.update()),this.callCompleteCallback()),this._killed=!0)};d._to=function(a,b,e){this._valueSize=1;this._startValue.x=a;this._endValue.x=b;this._duration=e;return this};d._to2=function(a,b,e,f,c){this._valueSize=2;this._startValue.x=a;this._endValue.x=e;this._startValue.y=b;this._endValue.y=f;this._duration=c;return this};d._to3=function(a,b,e,f,c,d,g){this._valueSize=3;this._startValue.x=a;this._endValue.x=f;this._startValue.y=b;this._endValue.y=c;this._startValue.z=e;this._endValue.z=d;this._duration=g;return this};d._to4=function(a,b,e,f,c,d,g,l,h){this._valueSize=4;this._startValue.x=a;this._endValue.x=c;this._startValue.y=b;this._endValue.y=d;this._startValue.z=e;this._endValue.z=g;this._startValue.w=f;this._endValue.w=l;this._duration=h;return this};d._toColor=function(a,b,e){this._valueSize=4;this._startValue.color=a;this._endValue.color=b;this._duration=e;return this};d._shake=function(a,b,e,f){this._valueSize=5;this._startValue.x=a;this._startValue.y=b;this._startValue.w=e;this._duration=f;this._easeType=0;return this};d._init=function(){this._duration=this._delay=0;this._breakpoint=-1;this._easeType=5;this._timeScale=1;this._easePeriod=0;this._easeOvershootOrAmplitude=1.70158;this._snapping=!1;this._repeat=0;this._yoyo=!1;this._valueSize=0;this._killed=this._paused=this._started=!1;this._ended=this._normalizedTime=this._elapsedTime=0};d._reset=function(){this._onStartCaller=this._onUpdateCaller=this._onCompleteCaller=this._onStart=this._onUpdate=this._onComplete=this._userData=this._target=null};d._update=function(a){1!=this._timeScale&&(a*=this._timeScale);0!=a&&(0!=this._ended?(this.callCompleteCallback(),this._killed=!0):(this._elapsedTime+=a,this.update(),0==this._ended||this._killed||(this.callCompleteCallback(),this._killed=!0)))};d.update=function(){this._ended=0;if(0==this._valueSize)this._elapsedTime>=this._delay+this._duration&&(this._ended=1);else{if(!this._started){if(this._elapsedTime<this._delay)return;this._started=!0;this.callStartCallback();if(this._killed)return}var a=!1,b=this._elapsedTime-this._delay;0<=this._breakpoint&&b>=this._breakpoint&&(b=this._breakpoint,this._ended=2);if(0!=this._repeat){var e=Math.floor(b/this._duration),b=b-this._duration*e;this._yoyo&&(a=1==e%2);0<this._repeat&&0>this._repeat-e&&(this._yoyo&&(a=1==this._repeat%2),b=this._duration,this._ended=1)}else b>=this._duration&&(b=this._duration,this._ended=1);this._normalizedTime=oa.evaluate(this._easeType,a?this._duration-b:b,this._duration,this._easeOvershootOrAmplitude,this._easePeriod);this._value.setZero();this._deltaValue.setZero();if(5==this._valueSize)0==this._ended?(b=this._startValue.w*(1-this._normalizedTime),a=(2*Math.random()-1)*b,b*=2*Math.random()-1,a=0<a?Math.ceil(a):Math.floor(a),b=0<b?Math.ceil(b):Math.floor(b),this._deltaValue.x=a,this._deltaValue.y=b,this._value.x=this._startValue.x+a,this._value.y=this._startValue.y+b):(this._value.x=this._startValue.x,this._value.y=this._startValue.y);else for(a=0;a<this._valueSize;a++)b=this._startValue.getField(a),e=this._endValue.getField(a),b+=(e-b)*this._normalizedTime,this._snapping&&(b=Math.round(b)),this._deltaValue.setField(a,b-this._value.getField(a)),this._value.setField(a,b);if(null!=this._target&&null!=this._propType)if("function"==typeof this._propType)switch(this._valueSize){case 1:this._propType.call(this._target,this._value.x);break;case 2:this._propType.call(this._target,this._value.x,this._value.y);break;case 3:this._propType.call(this._target,this._value.x,this._value.y,this._value.z);break;case 4:this._propType.call(this._target,this._value.x,this._value.y,this._value.z,this._value.w);break;case 5:this._propType.call(this._target,this._value.color);break;case 6:this._propType.call(this._target,this._value.x,this._value.y)}else this._target[this._propType]=5==this._valueSize?this._value.color:this._value.x;this.callUpdateCallback()}};d.callStartCallback=function(){if(null!=this._onStart)if(B.catchCallbackExceptions)try{this._onStart.call(this._onStartCaller,this)}catch(a){console.log("FairyGUI: error in start callback \x3e "+a.message)}else this._onStart.call(this._onStartCaller,this)};d.callUpdateCallback=function(){if(null!=this._onUpdate)if(B.catchCallbackExceptions)try{this._onUpdate.call(this._onUpdateCaller,this)}catch(a){console.log("FairyGUI: error in update callback \x3e "+a.message)}else this._onUpdate.call(this._onUpdateCaller,this)};d.callCompleteCallback=function(){if(null!=this._onComplete)if(B.catchCallbackExceptions)try{this._onComplete.call(this._onCompleteCaller,this)}catch(a){console.log("FairyGUI: error in complete callback \x3e "+a.message)}else this._onComplete.call(this._onCompleteCaller,this)};g(0,d,"target",function(){return this._target});g(0,d,"delay",function(){return this._delay});g(0,d,"duration",function(){return this._duration});g(0,d,"value",function(){return this._value});g(0,d,"userData",function(){return this._userData});g(0,d,"repeat",function(){return this._repeat});g(0,d,"startValue",function(){return this._startValue});g(0,d,"endValue",function(){return this._endValue});g(0,d,"deltaValue",function(){return this._deltaValue});g(0,d,"normalizedTime",function(){return this._normalizedTime});g(0,d,"completed",function(){return 0!=this._ended});g(0,d,"allCompleted",function(){return 1==this._ended});return c}(),ca=function(){function c(){this.toPage=this.fromPage=null}m(c,"fairygui.action.ControllerAction");var d=c.prototype;d.run=function(a,b,e){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(b)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(e)?this.leave(a):this.enter(a)};d.enter=function(a){};d.leave=function(a){};d.setup=function(a){var b,e;b=a.getInt16();this.fromPage=[];for(e=0;e<b;e++)this.fromPage[e]=a.readS();b=a.getInt16();this.toPage=[];for(e=0;e<b;e++)this.toPage[e]=a.readS()};c.createAction=function(a){switch(a){case 0:return new La;case 1:return new Ma}return null};return c}(),Fa=function(){function c(a){this.handling=null;this.sizeDirty=!1;this._owner=a;this._items=[]}m(c,"fairygui.Relations");var d=c.prototype;d.add=function(a,b,e){void 0===e&&(e=!1);for(var f=this._items.length,c=0;c<f;c++){var d=this._items[c];if(d.target==a){d.add(b,e);return}}f=new Z(this._owner);f.target=a;f.add(b,e);this._items.push(f)};d.remove=function(a,b){void 0===b&&(b=0);for(var e=this._items.length,f=0;f<e;){var c=this._items[f];c.target==a?(c.remove(b),c.isEmpty?(c.dispose(),this._items.splice(f,1),e--):f++):f++}};d.contains=function(a){for(var b=this._items.length,e=0;e<b;e++)if(this._items[e].target==a)return!0;return!1};d.clearFor=function(a){for(var b=this._items.length,e=0;e<b;){var f=this._items[e];f.target==a?(f.dispose(),this._items.splice(e,1),b--):e++}};d.clearAll=function(){for(var a=this._items.length,b=0;b<a;b++)this._items[b].dispose();this._items.length=0};d.copyFrom=function(a){this.clearAll();a=a._items;for(var b=a.length,e=0;e<b;e++){var f=a[e],c=new Z(this._owner);c.copyFrom(f);this._items.push(c)}};d.dispose=function(){this.clearAll()};d.onOwnerSizeChanged=function(a,b,e){if(0!=this._items.length)for(var f=this._items.length,c=0;c<f;c++)this._items[c].applyOnSelfResized(a,b,e)};d.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var a=this._items.length,b=0;b<a;b++)this._items[b].target.ensureSizeCorrect()}};d.setup=function(a,b){for(var e=a.readByte(),f,c=0;c<e;c++){var d=a.getInt16();f=-1==d?this._owner.parent:b?this._owner.getChildAt(d):this._owner.parent.getChildAt(d);d=new Z(this._owner);d.target=f;this._items.push(d);f=a.readByte();for(var g=0;g<f;g++){var l=a.readByte(),h=a.readBool();d.internalAdd(l,h)}}};g(0,d,"empty",function(){return 0==this._items.length});return c}(),Na=function(){function c(){this.addDelay=0;this.texture=null}m(c,"fairygui.display.Frame");return c}();(function(){function c(){}m(c,"fairygui.ObjectType");c.Image=0;c.MovieClip=1;c.Swf=2;c.Graph=3;c.Loader=4;c.Group=5;c.Text=6;c.RichText=7;c.InputText=8;c.Component=9;c.List=10;c.Label=11;c.Button=12;c.ComboBox=13;c.ProgressBar=14;c.Slider=15;c.ScrollBar=16;return c})();var J=function(){function c(a){this._tweenConfig=this._controller=null;this._owner=a}m(c,"fairygui.gears.GearBase");var d=c.prototype;d.dispose=function(){null!=this._tweenConfig&&null!=this._tweenConfig._tweener&&(this._tweenConfig._tweener.kill(),this._tweenConfig._tweener=null)};d.setup=function(a){this._controller=this._owner.parent.getControllerAt(a.getInt16());this.init();var b,e,f;if(this instanceof fairygui.gears.GearDisplay){b=a.getInt16();f=[];for(e=0;e<b;e++)f[e]=a.readS();this.pages=f}else{b=a.getInt16();for(e=0;e<b;e++)f=a.readS(),null!=f&&this.addStatus(f,a);a.readBool()&&this.addStatus(null,a)}a.readBool()&&(this._tweenConfig=new pa,this._tweenConfig.easeType=a.readByte(),this._tweenConfig.duration=a.getFloat32(),this._tweenConfig.delay=a.getFloat32())};d.updateFromRelations=function(a,b){};d.addStatus=function(a,b){};d.init=function(){};d.apply=function(){};d.updateState=function(){};g(0,d,"controller",function(){return this._controller},function(a){a!=this._controller&&(this._controller=a)&&this.init()});g(0,d,"tweenConfig",function(){null==this._tweenConfig&&(this._tweenConfig=new pa);return this._tweenConfig});c.disableAllTweenEffect=!1;return c}();(function(){function c(){}m(c,"fairygui.PackageItemType");c.Image=0;c.MovieClip=1;c.Sound=2;c.Component=3;c.Atlas=4;c.Font=5;c.Swf=6;c.Misc=7;c.Unknown=8;return c})();(function(){function c(){}m(c,"fairygui.ListLayoutType");c.SingleColumn=0;c.SingleRow=1;c.FlowHorizontal=2;c.FlowVertical=3;c.Pagination=4;return c})();(function(){function c(a){this._root=null;this._indent=0;this.treeNodeClick=this.treeNodeWillExpand=this.treeNodeRender=this.treeNodeCreateCell=null;this._list=a;this._list.removeChildrenToPool();this._list.on("fui_click_item",this,this.__clickItem);this._root=new Oa(!0);this._root.setTree(this);this._root.setCell(this._list);this._root.expanded=!0;this._indent=15}m(c,"fairygui.tree.TreeView");var d=c.prototype;d.getSelectedNode=function(){return-1!=this._list.selectedIndex?this._list.getChildAt(this._list.selectedIndex).data:null};d.getSelection=function(){for(var a=this._list.getSelection(),b=a.length,e=[],f=0;f<b;f++){var c=this._list.getChildAt(a[f]).data;e.push(c)}return e};d.addSelection=function(a,b){void 0===b&&(b=!1);for(var e=a.parent;null!=e&&e!=this._root;)e.expanded=!0,e=e.parent;a.cell&&this._list.addSelection(this._list.getChildIndex(a.cell),b)};d.removeSelection=function(a){a.cell&&this._list.removeSelection(this._list.getChildIndex(a.cell))};d.clearSelection=function(){this._list.clearSelection()};d.getNodeIndex=function(a){return this._list.getChildIndex(a.cell)};d.updateNode=function(a){null!=a.cell&&this.treeNodeRender&&this.treeNodeRender.runWith(a)};d.updateNodes=function(a){for(var b=a.length,e=0;e<b;e++){var f=a[e];if(null==f.cell)break;this.treeNodeRender&&this.treeNodeRender.runWith(f)}};d.expandAll=function(a){a.expanded=!0;for(var b=a.numChildren,e=0;e<b;e++){var f=a.getChildAt(e);f.isFolder&&this.expandAll(f)}};d.collapseAll=function(a){a!=this._root&&(a.expanded=!1);for(var b=a.numChildren,e=0;e<b;e++){var f=a.getChildAt(e);f.isFolder&&this.collapseAll(f)}};d.createCell=function(a){this.treeNodeCreateCell?a.setCell(this.treeNodeCreateCell.runWith(a)):a.setCell(this._list.itemPool.getObject(this._list.defaultItem));a.cell.data=a;var b=a.cell.getChild("indent");null!=b&&(b.width=(a.level-1)*this._indent);if(b=a.cell.getChild("expandButton"))a.isFolder?(b.visible=!0,b.onClick(this,this.__clickExpandButton),b.data=a,b.selected=a.expanded):b.visible=!1;this.treeNodeRender&&this.treeNodeRender.runWith(a)};d.afterInserted=function(a){this.createCell(a);var b=this.getInsertIndexForNode(a);this._list.addChildAt(a.cell,b);this.treeNodeRender&&this.treeNodeRender.runWith(a);a.isFolder&&a.expanded&&this.checkChildren(a,b)};d.getInsertIndexForNode=function(a){var b=a.getPrevSibling();null==b&&(b=a.parent);b=this._list.getChildIndex(b.cell)+1;a=a.level;for(var e=this._list.numChildren,f=b;f<e&&!(this._list.getChildAt(f).data.level<=a);f++)b++;return b};d.afterRemoved=function(a){this.removeNode(a)};d.afterExpanded=function(a){a!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(a);if(null!=a.cell){if(a!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(a);var b=a.cell.getChild("expandButton");b&&(b.selected=!0)}null!=a.cell.parent&&this.checkChildren(a,this._list.getChildIndex(a.cell))}};d.afterCollapsed=function(a){a!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(a);if(null!=a.cell){if(a!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(a);var b=a.cell.getChild("expandButton");b&&(b.selected=!1)}null!=a.cell.parent&&this.hideFolderNode(a)}};d.afterMoved=function(a){a.isFolder?this.hideFolderNode(a):this._list.removeChild(a.cell);var b=this.getInsertIndexForNode(a);this._list.addChildAt(a.cell,b);a.isFolder&&a.expanded&&this.checkChildren(a,b)};d.checkChildren=function(a,b){for(var e=a.numChildren,f=0;f<e;f++){b++;var c=a.getChildAt(f);null==c.cell&&this.createCell(c);c.cell.parent||this._list.addChildAt(c.cell,b);c.isFolder&&c.expanded&&(b=this.checkChildren(c,b))}return b};d.hideFolderNode=function(a){for(var b=a.numChildren,e=0;e<b;e++){var f=a.getChildAt(e);f.cell&&null!=f.cell.parent&&this._list.removeChild(f.cell);f.isFolder&&f.expanded&&this.hideFolderNode(f)}};d.removeNode=function(a){null!=a.cell&&(null!=a.cell.parent&&this._list.removeChild(a.cell),this._list.returnToPool(a.cell),a.cell.data=null,a.setCell(null));if(a.isFolder)for(var b=a.numChildren,e=0;e<b;e++){var f=a.getChildAt(e);this.removeNode(f)}};d.__clickExpandButton=function(a){a.stopPropagation();a=E.cast(a.currentTarget);var b=a.parent.data;if(null!=this._list.scrollPane){var e=this._list.scrollPane.posY;b.expanded=a.selected?!0:!1;this._list.scrollPane.posY=e;this._list.scrollPane.scrollToView(b.cell)}else b.expanded=a.selected?!0:!1};d.__clickItem=function(a,b){if(null!=this._list.scrollPane)var e=this._list.scrollPane.posY;var f=a.data;this.treeNodeClick&&this.treeNodeClick.runWith([f,b]);null!=this._list.scrollPane&&(this._list.scrollPane.posY=e,f.cell&&this._list.scrollPane.scrollToView(f.cell))};g(0,d,"list",function(){return this._list});g(0,d,"root",function(){return this._root});g(0,d,"indent",function(){return this._indent},function(a){this._indent=a});return c})();var Pa=function(){function c(){this.pixelWidth=0;this.scale=NaN;this.pixels=null}m(c,"fairygui.utils.PixelHitTestData");c.prototype.load=function(c){c.getInt32();this.pixelWidth=c.getInt32();this.scale=1/c.readByte();var a=c.getInt32();this.pixels=S(a);for(var b=0;b<a;b++){var e=c.readByte();0>e&&(e+=256);this.pixels[b]=e}};return c}(),Qa=function(){function c(){this.owner=null;this.objectType=this.type=0;this.name=this.id=null;this.height=this.width=0;this.file=null;this.decoded=!1;this.scale9Grid=this.rawData=null;this.scaleByTile=!1;this.tileGridIndice=0;this.smoothing=!1;this.pixelHitTestData=this.texture=null;this.repeatDelay=this.interval=0;this.swing=!1;this.bitmapFont=this.extensionType=this.frames=null}m(c,"fairygui.PackageItem");var d=c.prototype;d.load=function(){return this.owner.getItemAsset(this)};d.toString=function(){return this.name};return c}();(function(){function c(){}m(c,"fairygui.FillOrigin");c.Top=0;c.Bottom=1;c.Left=2;c.Right=3;c.TopLeft=0;c.TopRight=1;c.BottomLeft=2;c.BottomRight=3;return c})();(function(){function c(){this._sourceData=null;this._agent=new qa;this._agent.draggable=!0;this._agent.touchable=!1;this._agent.setSize(100,100);this._agent.setPivot(.5,.5,!0);this._agent.align="center";this._agent.verticalAlign="middle";this._agent.sortingOrder=1E6;this._agent.on("fui_drag_end",this,this.__dragEnd)}m(c,"fairygui.DragDropManager");var d=c.prototype;d.startDrag=function(a,b,e,f){void 0===f&&(f=-1);null==this._agent.parent&&(this._sourceData=e,this._agent.url=b,C.inst.addChild(this._agent),a=C.inst.globalToLocal(k.stage.mouseX,k.stage.mouseY),this._agent.setXY(a.x,a.y),this._agent.startDrag(f))};d.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),C.inst.removeChild(this._agent),this._sourceData=null)};d.__dragEnd=function(a){if(null!=this._agent.parent){C.inst.removeChild(this._agent);var b=this._sourceData;this._sourceData=null;for(var e=E.cast(a.target);null!=e;){if(e.displayObject.hasListener("fui_drop")){e.requestFocus();e.displayObject.event("fui_drop",[b,A.createEvent("fui_drop",e.displayObject,a)]);break}e=e.parent}}};g(0,d,"dragAgent",function(){return this._agent});g(0,d,"dragging",function(){return null!=this._agent.parent});g(1,c,"inst",function(){null==fairygui.DragDropManager._inst&&(fairygui.DragDropManager._inst=new c);return fairygui.DragDropManager._inst});c._inst=null;return c})();var Ra=function(){function c(){this.id=null;this.size=0;this.resizable=this.ttf=!1;this.glyphs={}}m(c,"fairygui.display.BitmapFont",null,"BitmapFont$1");return c}(),aa=function(){function c(){this._asset=k.loader}m(c,"fairygui.AssetProxy");var d=c.prototype;d.getRes=function(a){return this._asset.getRes(a)};d.load=function(a,b,e,f,c,d){void 0===c&&(c=1);void 0===d&&(d=!0);this._asset.load(a,b,e,f,c,d)};d.setAsset=function(a){this._asset=a};g(1,c,"inst",function(){null==fairygui.AssetProxy._inst&&(c._inst=new c);return fairygui.AssetProxy._inst});c._inst=null;return c}(),Sa=function(){function c(){this._id=this._controller=null}m(c,"fairygui.PageOption");var d=c.prototype;d.clear=function(){this._id=null};g(0,d,"controller",null,function(a){this._controller=a});g(0,d,"index",function(){return this._id?this._controller.getPageIndexById(this._id):-1},function(a){this._id=this._controller.getPageId(a)});g(0,d,"name",function(){return this._id?this._controller.getPageNameById(this._id):null},function(a){this._id=this._controller.getPageIdByName(a)});g(0,d,"id",function(){return this._id},function(a){this._id=a});return c}();(function(){function c(){}m(c,"fairygui.ScrollBarDisplayType");c.Default=0;c.Visible=1;c.Auto=2;c.Hidden=3;return c})();ga=function(){function c(){this.callback=null;this._index=0;this._itemList=[];this._objectPool=[]}var d;m(c,"fairygui.AsyncOperation");var a=c.prototype;a.createObject=function(b,a){var e=z.getByName(b);if(e){e=e.getItemByName(a);if(!e)throw Error("resource not found: "+a);this.internalCreateObject(e)}else throw Error("package not found: "+b);};a.createObjectFromURL=function(b){var a=z.getItemByURL(b);if(a)this.internalCreateObject(a);else throw Error("resource not found: "+b);};a.cancel=function(){k.timer.clear(this,this.run);this._itemList.length=0;if(0<this._objectPool.length){for(var b=this._objectPool.length,a=0;a<b;a++)this._objectPool[a].dispose();this._objectPool.length=0}};a.internalCreateObject=function(b){this._itemList.length=0;this._objectPool.length=0;var a=new d(b,9);a.childCount=this.collectComponentChildren(b);this._itemList.push(a);this._index=0;k.timer.frameLoop(1,this,this.run)};a.collectComponentChildren=function(b){var a=b.rawData;a.seek(0,2);var f,c,r,g,l,h=a.getInt16();for(r=0;r<h;r++){g=a.getInt16();l=a.pos;a.seek(l,0);var da=a.readByte();f=a.readS();c=a.readS();a.pos=l;null!=f?(c=null!=c?z.getById(c):b.owner,c=null!=c?c.getItemById(f):null,f=new d(c,da),null!=c&&3==c.type&&(f.childCount=this.collectComponentChildren(c))):(f=new d(null,da),10==da&&(f.listItemCount=this.collectListChildren(a)));this._itemList.push(f);a.pos=l+g}return h};a.collectListChildren=function(b){b.seek(b.pos,8);var a=0,f,c,r,g,l=b.readS(),h=b.getInt16();for(f=0;f<h;f++)c=b.getInt16(),c+=b.pos,r=b.readS(),null==r&&(r=l),r&&(r=z.getItemByURL(r),null!=r&&(g=new d(r,r.objectType),3==r.type&&(g.childCount=this.collectComponentChildren(r)),this._itemList.push(g),a++)),b.pos=c;return a};a.run=function(){for(var b,a,f,c,d=T.now(),g=p.frameTimeForAsyncUIConstruction,l=this._itemList.length;this._index<l;){a=this._itemList[this._index];if(null!=a.packageItem)b=M.newObject(a.packageItem),b.packageItem=a.packageItem,this._objectPool.push(b),z._constructing++,3==a.packageItem.type?(f=this._objectPool.length-a.childCount-1,b.constructFromResource2(this._objectPool,f),this._objectPool.splice(f,a.childCount)):b.constructFromResource(),z._constructing--;else if(b=M.newObject2(a.type),this._objectPool.push(b),10==a.type&&0<a.listItemCount){f=this._objectPool.length-a.listItemCount-1;for(c=0;c<a.listItemCount;c++)b.itemPool.returnObject(this._objectPool[c+f]);this._objectPool.splice(f,a.listItemCount)}this._index++;if(0==this._index%5&&T.now()-d>=g)return}k.timer.clear(this,this.run);b=this._objectPool[0];this._itemList.length=0;this._objectPool.length=0;null!=this.callback&&this.callback.runWith(b)};c.__init$=function(){d=function(){function b(b,a){this.packageItem=null;this.listItemCount=this.childCount=this.type=0;this.packageItem=b;this.type=a}m(b,"");return b}()};return c}();(function(){function c(){}m(c,"fairygui.FillMethod");c.None=0;c.Horizontal=1;c.Vertical=2;c.Radial90=3;c.Radial180=4;c.Radial360=5;return c})();var ra=function(){function c(){this._count=0;this._pool={}}m(c,"fairygui.GObjectPool");var d=c.prototype;d.clear=function(){for(var a in this._pool)for(var b=this._pool[a],e=b.length,f=0;f<e;f++)b[f].dispose();this._pool={};this._count=0};d.getObject=function(a){a=z.normalizeURL(a);if(null==a)return null;var b=this._pool[a];return null!=b&&0<b.length?(this._count--,b.shift()):z.createObjectFromURL(a)};d.returnObject=function(a){var b=a.resourceURL;if(b){var e=this._pool[b];null==e&&(e=[],this._pool[b]=e);this._count++;e.push(a)}};g(0,d,"count",function(){return this._count});return c}();(function(){function c(){}m(c,"fairygui.ScrollType");c.Horizontal=0;c.Vertical=1;c.Both=2;return c})();(function(){function c(){}m(c,"fairygui.OverflowType");c.Visible=0;c.Hidden=1;c.Scroll=2;return c})();var pa=function(){function c(){this.tween=!1;this.easeType=0;this._displayLockToken=this.delay=this.duration=NaN;this._tweener=null;this.tween=!0;this.easeType=5;this.duration=.3;this.delay=0}m(c,"fairygui.gears.GearTweenConfig");return c}(),sa=function(){function c(b){this.name=null;this._ownerBaseY=this._ownerBaseX=NaN;this._totalTasks=this._totalTimes=0;this._paused=this._playing=!1;this._onComplete=null;this._options=0;this._autoPlay=this._reversed=!1;this.OPTION_IGNORE_DISPLAY_CONTROLLER=1;this.OPTION_AUTO_STOP_DISABLED=2;this.OPTION_AUTO_STOP_AT_END=4;this._owner=b;this._items=[];this._totalDuration=0;this._autoPlayTimes=1;this._autoPlayDelay=0;this._timeScale=1;this._endTime=this._startTime=0}var d,a,b,e,f,n,r,H,l;m(c,"fairygui.Transition");var h=c.prototype;h.play=function(b,a,e,f,c){void 0===a&&(a=1);void 0===e&&(e=0);void 0===f&&(f=0);void 0===c&&(c=-1);this._play(b,a,e,f,c,!1)};h.playReverse=function(b,a,e,f,c){void 0===e&&(e=0);void 0===f&&(f=0);void 0===c&&(c=-1);this._play(b,1,e,f,c,!0)};h.changePlayTimes=function(b){this._totalTimes=b};h.setAutoPlay=function(b,a,e){void 0===a&&(a=1);void 0===e&&(e=0);this._autoPlay!=b&&(this._autoPlay=b,this._autoPlayTimes=a,this._autoPlayDelay=e,this._autoPlay?this._owner.onStage&&this.play(null,null,this._autoPlayTimes,this._autoPlayDelay):this._owner.onStage||this.stop(!1,!0))};h._play=function(b,a,e,f,c,d){void 0===a&&(a=1);void 0===e&&(e=0);void 0===f&&(f=0);void 0===c&&(c=-1);void 0===d&&(d=!1);this.stop(!0,!0);this._totalTimes=a;this._reversed=d;this._startTime=f;this._endTime=c;this._playing=!0;this._paused=!1;this._onComplete=b;b=this._items.length;for(a=0;a<b;a++)if(f=this._items[a],null==f.target?f.target=f.targetId?this._owner.getChildById(f.targetId):this._owner:f.target!=this._owner&&f.target.parent!=this._owner&&(f.target=null),null!=f.target&&10==f.type){c=f.target.getTransition(f.value.transName);c==this&&(c=null);if(null!=c)if(0==f.value.playTimes){for(d=a-1;0<=d;d--){var n=this._items[d];if(10==n.type&&n.value.trans==c){n.value.stopTime=f.time-n.time;break}}0>d?f.value.stopTime=0:c=null}else f.value.stopTime=-1;f.value.trans=c}if(0==e)this.onDelayedPlay();else B.delayedCall(e).onComplete(this.onDelayedPlay,this)};h.stop=function(b,a){void 0===b&&(b=!0);void 0===a&&(a=!1);if(this._playing){this._playing=!1;this._totalTimes=this._totalTasks=0;var e=this._onComplete;this._onComplete=null;B.kill(this);var f=this._items.length;if(this._reversed)for(var c=f-1;0<=c;c--){var d=this._items[c];null!=d.target&&this.stopItem(d,b)}else for(c=0;c<f;c++)d=this._items[c],null!=d.target&&this.stopItem(d,b);a&&null!=e&&e.run()}};h.stopItem=function(b,a){0!=b.displayLockToken&&(b.target.releaseDisplayLock(b.displayLockToken),b.displayLockToken=0);null!=b.tweener&&(b.tweener.kill(a),b.tweener=null,11!=b.type||a||(b.target._gearLocked=!0,b.target.setXY(b.target.x-b.value.lastOffsetX,b.target.y-b.value.lastOffsetY),b.target._gearLocked=!1));if(10==b.type){var e=b.value.trans;null!=e&&e.stop(a,!1)}};h.setPaused=function(b){if(this._playing&&this._paused!=b){this._paused=b;var a=B.getTween(this);null!=a&&a.setPaused(b);for(var a=this._items.length,e=0;e<a;e++){var f=this._items[e];null!=f.target&&(10==f.type?null!=f.value.trans&&f.value.trans.setPaused(b):7==f.type&&(b?(f.value.flag=f.target.playing,f.target.playing=!1):f.target.playing=f.value.flag),null!=f.tweener&&f.tweener.setPaused(b))}}};h.dispose=function(){this._playing&&B.kill(this);for(var b=this._items.length,a=0;a<b;a++){var e=this._items[a];null!=e.tweener&&(e.tweener.kill(),e.tweener=null);e.target=null;e.hook=null;null!=e.tweenConfig&&(e.tweenConfig.endHook=null)}this._items.length=0;this._playing=!1;this._onComplete=null};h.setValue=function(b,a){for(var e=[],f=1,c=arguments.length;f<c;f++)e.push(arguments[f]);for(var c=this._items.length,d=!1,n,f=0;f<c;f++){var r=this._items[f];if(r.label==b)n=null!=r.tweenConfig?r.tweenConfig.startValue:r.value,d=!0;else if(null!=r.tweenConfig&&r.tweenConfig.endLabel==b)n=r.tweenConfig.endValue,d=!0;else continue;switch(r.type){case 0:case 1:case 3:case 2:case 13:n.b1=!0;n.b2=!0;n.f1=parseFloat(e[0]);n.f2=parseFloat(e[1]);break;case 4:n.f1=parseFloat(e[0]);break;case 5:n.f1=parseFloat(e[0]);break;case 6:n.f1=parseFloat(e[0]);break;case 7:n.frame=parseInt(e[0]);1<e.length&&(n.playing=e[1]);break;case 8:n.visible=e[0];break;case 9:n.sound=e[0];1<e.length&&(n.volume=parseFloat(e[1]));break;case 10:n.transName=e[0];1<e.length&&(n.playTimes=parseInt(e[1]));break;case 11:n.amplitude=parseFloat(e[0]);1<e.length&&(n.duration=parseFloat(e[1]));break;case 12:n.f1=parseFloat(e[0]);n.f2=parseFloat(e[1]);n.f3=parseFloat(e[2]);n.f4=parseFloat(e[3]);break;case 14:case 15:n.text=e[0]}}if(!d)throw Error("label not exists");};h.setHook=function(b,a){for(var e=this._items.length,f=!1,c=0;c<e;c++){var d=this._items[c];if(d.label==b){d.hook=a;f=!0;break}else if(null!=d.tweenConfig&&d.tweenConfig.endLabel==b){d.tweenConfig.endHook=a;f=!0;break}}if(!f)throw Error("label not exists");};h.clearHooks=function(){for(var b=this._items.length,a=0;a<b;a++){var e=this._items[a];e.hook=null;null!=e.tweenConfig&&(e.tweenConfig.endHook=null)}};h.setTarget=function(b,a){for(var e=this._items.length,f=!1,c=0;c<e;c++){var d=this._items[c];d.label==b&&(d.targetId=a==this._owner||null==a?"":a.id,d.target=this._playing?0<d.targetId.length?this._owner.getChildById(d.targetId):this._owner:null,f=!0)}if(!f)throw Error("label not exists");};h.setDuration=function(b,a){for(var e=this._items.length,f=!1,c=0;c<e;c++){var d=this._items[c];null!=d.tweenConfig&&d.label==b&&(d.tweenConfig.duration=a,f=!0)}if(!f)throw Error("label not exists");};h.getLabelTime=function(b){for(var a=this._items.length,e=0;e<a;e++){var f=this._items[e];if(f.label==b)return f.time;if(null!=f.tweenConfig&&f.tweenConfig.endLabel==b)return f.time+f.tweenConfig.duration}return Number.NaN};h.updateFromRelations=function(b,a,e){var f=this._items.length;if(0!=f)for(var c=0;c<f;c++){var d=this._items[c];0==d.type&&d.targetId==b&&(null!=d.tweenConfig?(d.tweenConfig.startValue.f1+=a,d.tweenConfig.startValue.f2+=e,d.tweenConfig.endValue.f1+=a,d.tweenConfig.endValue.f2+=e):(d.value.f1+=a,d.value.f2+=e))}};h.onOwnerAddedToStage=function(){this._autoPlay&&!this._playing&&this.play(null,this._autoPlayTimes,this._autoPlayDelay)};h.onOwnerRemovedFromStage=function(){0==(this._options&this.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&this.OPTION_AUTO_STOP_AT_END)?!0:!1,!1)};h.onDelayedPlay=function(){this.internalPlay();if(this._playing=0<this._totalTasks){if(0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var b=this._items.length,a=0;a<b;a++){var e=this._items[a];null!=e.target&&e.target!=this._owner&&(e.displayLockToken=e.target.addDisplayLock())}}else null!=this._onComplete&&(b=this._onComplete,this._onComplete=null,b.run())};h.internalPlay=function(){this._ownerBaseX=this._owner.x;this._ownerBaseY=this._owner.y;this._totalTasks=0;var b=this._items.length,a,e=!1;if(this._reversed)for(f=b-1;0<=f;f--)a=this._items[f],null!=a.target&&this.playItem(a);else for(var f=0;f<b;f++)a=this._items[f],null!=a.target&&(7==a.type&&0!=this._startTime&&a.time<=this._startTime?(e=!0,a.value.flag=!1):this.playItem(a));e&&this.skipAnimations()};h.playItem=function(b){var a;if(null!=b.tweenConfig){if(a=this._reversed?this._totalDuration-b.time-b.tweenConfig.duration:b.time,-1==this._endTime||a<=this._endTime){var e,f;this._reversed?(e=b.tweenConfig.endValue,f=b.tweenConfig.startValue):(e=b.tweenConfig.startValue,f=b.tweenConfig.endValue);b.value.b1=e.b1||f.b1;b.value.b2=e.b2||f.b2;switch(b.type){case 0:case 1:case 2:case 13:b.tweener=B.to2(e.f1,e.f2,f.f1,f.f2,b.tweenConfig.duration);break;case 4:case 5:b.tweener=B.to(e.f1,f.f1,b.tweenConfig.duration);break;case 6:b.tweener=B.toColor(e.f1,f.f1,b.tweenConfig.duration);break;case 12:b.tweener=B.to4(e.f1,e.f2,e.f3,e.f4,f.f1,f.f2,f.f3,f.f4,b.tweenConfig.duration)}b.tweener.setDelay(a).setEase(b.tweenConfig.easeType).setRepeat(b.tweenConfig.repeat,b.tweenConfig.yoyo).setTimeScale(this._timeScale).setTarget(b).onStart(this.onTweenStart,this).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this);0<=this._endTime&&b.tweener.setBreakpoint(this._endTime-a);this._totalTasks++}}else if(11==b.type)a=this._reversed?this._totalDuration-b.time-b.value.duration:b.time,b.value.offsetX=b.value.offsetY=0,b.value.lastOffsetX=b.value.lastOffsetY=0,b.tweener=B.shake(0,0,b.value.amplitude,b.value.duration).setDelay(a).setTimeScale(this._timeScale).setTarget(b).onUpdate(this.onTweenUpdate,this).onComplete(this.onTweenComplete,this),0<=this._endTime&&b.tweener.setBreakpoint(this._endTime-b.time),this._totalTasks++;else if(a=this._reversed?this._totalDuration-b.time:b.time,a<=this._startTime)this.applyValue(b),this.callHook(b,!1);else if(-1==this._endTime||a<=this._endTime)this._totalTasks++,b.tweener=B.delayedCall(a).setTimeScale(this._timeScale).setTarget(b).onComplete(this.onDelayedPlayItem,this);null!=b.tweener&&b.tweener.seek(this._startTime)};h.skipAnimations=function(){for(var b,a,e,f,c,d,n=this._items.length,r=0;r<n;r++)if(d=this._items[r],!(7!=d.type||d.time>this._startTime||(f=d.value,f.flag))){c=d.target;b=c.frame;a=c.playing?0:-1;e=0;for(var g=r;g<n;g++)d=this._items[g],7!=d.type||d.target!=c||d.time>this._startTime||(f=d.value,f.flag=!0,-1!=f.frame?(b=f.frame,a=f.playing?d.time:-1,e=0):f.playing?0>a&&(a=d.time):(0<=a&&(e+=d.time-a),a=-1),this.callHook(d,!1));0<=a&&(e+=this._startTime-a);c.playing=0<=a;c.frame=b;0<e&&c.advance(1E3*e)}};h.onDelayedPlayItem=function(b){b=b.target;b.tweener=null;this._totalTasks--;this.applyValue(b);this.callHook(b,!1);this.checkAllComplete()};h.onTweenStart=function(b){var a=b.target;if(0==a.type||1==a.type){var e,f;this._reversed?(e=a.tweenConfig.endValue,f=a.tweenConfig.startValue):(e=a.tweenConfig.startValue,f=a.tweenConfig.endValue);0==a.type?a.target!=this._owner?(e.b1||(e.f1=a.target.x),e.b2||(e.f2=a.target.y)):(e.b1||(e.f1=a.target.x-this._ownerBaseX),e.b2||(e.f2=a.target.y-this._ownerBaseY)):(e.b1||(e.f1=a.target.width),e.b2||(e.f2=a.target.height));f.b1||(f.f1=e.f1);f.b2||(f.f2=e.f2);b.startValue.x=e.f1;b.startValue.y=e.f2;b.endValue.x=f.f1;b.endValue.y=f.f2}this.callHook(a,!1)};h.onTweenUpdate=function(b){var a=b.target;switch(a.type){case 0:case 1:case 2:case 13:a.value.f1=b.value.x;a.value.f2=b.value.y;break;case 4:case 5:a.value.f1=b.value.x;break;case 6:a.value.f1=b.value.color;break;case 12:a.value.f1=b.value.x;a.value.f2=b.value.y;a.value.f3=b.value.z;a.value.f4=b.value.w;break;case 11:a.value.offsetX=b.deltaValue.x,a.value.offsetY=b.deltaValue.y}this.applyValue(a)};h.onTweenComplete=function(b){var a=b.target;a.tweener=null;this._totalTasks--;b.allCompleted&&this.callHook(a,!0);this.checkAllComplete()};h.onPlayTransCompleted=function(b){this._totalTasks--;this.checkAllComplete()};h.callHook=function(b,a){a?null!=b.tweenConfig&&null!=b.tweenConfig.endHook&&b.tweenConfig.endHook.run():b.time>=this._startTime&&null!=b.hook&&b.hook.run()};h.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(0>this._totalTimes)this.internalPlay();else if(this._totalTimes--,0<this._totalTimes)this.internalPlay();else{this._playing=!1;for(var b=this._items.length,a=0;a<b;a++){var e=this._items[a];null!=e.target&&0!=e.displayLockToken&&(e.target.releaseDisplayLock(e.displayLockToken),e.displayLockToken=0)}null!=this._onComplete&&(b=this._onComplete,this._onComplete=null,b.run())}};h.applyValue=function(b){b.target._gearLocked=!0;switch(b.type){case 0:b.target==this._owner?b.target.setXY(b.value.b1?b.value.f1+this._ownerBaseX:b.target.x,b.value.b2?b.value.f2+this._ownerBaseY:b.target.y):(b.value.b1||(b.value.f1=b.target.x),b.value.b2||(b.value.f2=b.target.y),b.target.setXY(b.value.f1,b.value.f2));break;case 1:b.value.b1||(b.value.f1=b.target.width);b.value.b2||(b.value.f2=b.target.height);b.target.setSize(b.value.f1,b.value.f2);break;case 3:b.target.setPivot(b.value.f1,b.value.f2,b.target.pivotAsAnchor);break;case 4:b.target.alpha=b.value.f1;break;case 5:b.target.rotation=b.value.f1;break;case 2:b.target.setScale(b.value.f1,b.value.f2);break;case 13:b.target.setSkew(b.value.f1,b.value.f2);break;case 6:b.target.color=t.convertToHtmlColor(b.value.f1,!1);break;case 7:0<=b.value.frame&&(b.target.frame=b.value.frame);b.target.playing=b.value.playing;b.target.timeScale=this._timeScale;break;case 8:b.target.visible=b.value.visible;break;case 10:if(this._playing){var a=b.value.trans;if(null!=a){this._totalTasks++;var e=this._startTime>b.time?this._startTime-b.time:0,f=0<=this._endTime?this._endTime-b.time:-1;0<=b.value.stopTime&&(0>f||f>b.value.stopTime)&&(f=b.value.stopTime);a.timeScale=this._timeScale;a._play(ha.create(this,this.onPlayTransCompleted,[b]),b.value.playTimes,0,e,f,this._reversed)}}break;case 9:this._playing&&b.time>=this._startTime&&(null==b.value.audioClip&&(a=z.getItemByURL(b.value.sound),b.value.audioClip=a?a.file:b.value.sound),b.value.audioClip&&C.inst.playOneShotSound(b.value.audioClip,b.value.volume));break;case 11:b.target.setXY(b.target.x-b.value.lastOffsetX+b.value.offsetX,b.target.y-b.value.lastOffsetY+b.value.offsetY);b.value.lastOffsetX=b.value.offsetX;b.value.lastOffsetY=b.value.offsetY;break;case 12:a=new na;a.adjustBrightness(b.value.f1);a.adjustContrast(b.value.f2);a.adjustSaturation(b.value.f3);a.adjustHue(b.value.f4);a=[new U(a)];b.target.filters=a;break;case 14:b.target.text=b.value.text;break;case 15:b.target.icon=b.value.text}b.target._gearLocked=!1};h.setup=function(b){this.name=b.readS();this._options=b.getInt32();this._autoPlay=b.readBool();this._autoPlayTimes=b.getInt32();this._autoPlayDelay=b.getFloat32();for(var e=b.getInt16(),f=0;f<e;f++){var c=b.getInt16(),n=b.pos;b.seek(n,0);var r=new d(b.readByte());this._items[f]=r;r.time=b.getFloat32();var g=b.getInt16();r.targetId=0>g?"":this._owner.getChildAt(g).id;r.label=b.readS();b.readBool()?(b.seek(n,1),r.tweenConfig=new a,r.tweenConfig.duration=b.getFloat32(),r.time+r.tweenConfig.duration>this._totalDuration&&(this._totalDuration=r.time+r.tweenConfig.duration),r.tweenConfig.easeType=b.readByte(),r.tweenConfig.repeat=b.getInt32(),r.tweenConfig.yoyo=b.readBool(),r.tweenConfig.endLabel=b.readS(),b.seek(n,2),this.decodeValue(r,b,r.tweenConfig.startValue),b.seek(n,3),this.decodeValue(r,b,r.tweenConfig.endValue)):(r.time>this._totalDuration&&(this._totalDuration=r.time),b.seek(n,2),this.decodeValue(r,b,r.value));b.pos=n+c}};h.decodeValue=function(b,a,e){switch(b.type){case 0:case 1:case 3:case 13:e.b1=a.readBool();e.b2=a.readBool();e.f1=a.getFloat32();e.f2=a.getFloat32();break;case 4:case 5:e.f1=a.getFloat32();break;case 2:e.f1=a.getFloat32();e.f2=a.getFloat32();break;case 6:e.f1=a.readColor();break;case 7:e.playing=a.readBool();e.frame=a.getInt32();break;case 8:e.visible=a.readBool();break;case 9:e.sound=a.readS();e.volume=a.getFloat32();break;case 10:e.transName=a.readS();e.playTimes=a.getInt32();break;case 11:e.amplitude=a.getFloat32();e.duration=a.getFloat32();break;case 12:e.f1=a.getFloat32();e.f2=a.getFloat32();e.f3=a.getFloat32();e.f4=a.getFloat32();break;case 14:case 15:e.text=a.readS()}};g(0,h,"playing",function(){return this._playing});g(0,h,"timeScale",function(){return this._timeScale},function(b){if(this._timeScale!=b&&(this._timeScale=b,this._playing))for(var a=this._items.length,e=0;e<a;e++){var f=this._items[e];null!=f.tweener?f.tweener.setTimeScale(b):10==f.type?null!=f.value.trans&&(f.value.trans.timeScale=b):7==f.type&&null!=f.target&&(f.target.timeScale=b)}});c.__init$=function(){(function(){function b(){}m(b,"");b.XY=0;b.Size=1;b.Scale=2;b.Pivot=3;b.Alpha=4;b.Rotation=5;b.Color=6;b.Animation=7;b.Visible=8;b.Sound=9;b.Transition=10;b.Shake=11;b.ColorFilter=12;b.Skew=13;b.Text=14;b.Icon=15;b.Unknown=16;return b})();d=function(){function a(a){this.time=NaN;this.targetId=null;this.type=0;this.target=this.tweener=this.hook=this.value=this.label=this.tweenConfig=null;this.displayLockToken=0;this.type=a;switch(a){case 0:case 1:case 2:case 3:case 13:case 4:case 5:case 6:case 12:this.value=new l;break;case 7:this.value=new e;break;case 11:this.value=new r;break;case 9:this.value=new f;break;case 10:this.value=new n;break;case 8:this.value=new b;break;case 14:case 15:this.value=new H}}m(a,"");return a}();a=function(){function b(){this.duration=NaN;this.repeat=this.easeType=0;this.yoyo=!1;this.endHook=this.endLabel=null;this.easeType=5;this.startValue=new l;this.endValue=new l}m(b,"");return b}();b=function(){function b(){this.visible=!1}m(b,"");return b}();e=function(){function b(){this.frame=0;this.flag=this.playing=!1}m(b,"");return b}();f=function(){function b(){this.sound=null;this.volume=NaN;this.audioClip=null}m(b,"");return b}();n=function(){function b(){this.transName=null;this.playTimes=0;this.trans=null;this.stopTime=NaN}m(b,"");return b}();r=function(){function b(){this.lastOffsetY=this.lastOffsetX=this.offsetY=this.offsetX=this.duration=this.amplitude=NaN}m(b,"");return b}();H=function(){function b(){this.text=null}m(b,"");return b}();l=function(){function b(){this.f4=this.f3=this.f2=this.f1=NaN;this.b1=this.b2=!0}m(b,"");return b}()};return c}();(function(){function c(){}m(c,"fairygui.LoaderFillType");c.None=0;c.Scale=1;c.ScaleMatchHeight=2;c.ScaleMatchWidth=3;c.ScaleFree=4;c.ScaleNoBorder=5;return c})();var oa=function(){function c(){}var d;m(c,"fairygui.tween.EaseManager");c.evaluate=function(a,b,e,f,n){switch(a){case 0:return b/e;case 1:return-Math.cos(b/e*c._PiOver2)+1;case 2:return Math.sin(b/e*c._PiOver2);case 3:return-.5*(Math.cos(Math.PI*b/e)-1);case 4:return(b/=e)*b;case 5:return-(b/=e)*(b-2);case 6:return 1>(b/=.5*e)?.5*b*b:-.5*(--b*(b-2)-1);case 7:return(b/=e)*b*b;case 8:return(b=b/e-1)*b*b+1;case 9:return 1>(b/=.5*e)?.5*b*b*b:.5*((b-=2)*b*b+2);case 10:return(b/=e)*b*b*b;case 11:return-((b=b/e-1)*b*b*b-1);case 12:return 1>(b/=.5*e)?.5*b*b*b*b:-.5*((b-=2)*b*b*b-2);case 13:return(b/=e)*b*b*b*b;case 14:return(b=b/e-1)*b*b*b*b+1;case 15:return 1>(b/=.5*e)?.5*b*b*b*b*b:.5*((b-=2)*b*b*b*b+2);case 16:return 0==b?0:Math.pow(2,10*(b/e-1));case 17:return b==e?1:-Math.pow(2,-10*b/e)+1;case 18:return 0==b?0:b==e?1:1>(b/=.5*e)?.5*Math.pow(2,10*(b-1)):.5*(-Math.pow(2,-10*--b)+2);case 19:return-(Math.sqrt(1-(b/=e)*b)-1);case 20:return Math.sqrt(1-(b=b/e-1)*b);case 21:return 1>(b/=.5*e)?-.5*(Math.sqrt(1-b*b)-1):.5*(Math.sqrt(1-(b-=2)*b)+1);case 22:if(0==b)return 0;if(1==(b/=e))return 1;0==n&&(n=.3*e);1>f?(f=1,a=n/4):a=n/c._TwoPi*Math.asin(1/f);return-(f*Math.pow(2,10*--b)*Math.sin((b*e-a)*c._TwoPi/n));case 23:if(0==b)return 0;if(1==(b/=e))return 1;0==n&&(n=.3*e);1>f?(f=1,a=n/4):a=n/c._TwoPi*Math.asin(1/f);return f*Math.pow(2,-10*b)*Math.sin((b*e-a)*c._TwoPi/n)+1;case 24:if(0==b)return 0;if(2==(b/=.5*e))return 1;0==n&&(n=.3*e*1.5);1>f?(f=1,a=n/4):a=n/c._TwoPi*Math.asin(1/f);return 1>b?-.5*f*Math.pow(2,10*--b)*Math.sin((b*e-a)*c._TwoPi/n):f*Math.pow(2,-10*--b)*Math.sin((b*e-a)*c._TwoPi/n)*.5+1;case 25:return(b/=e)*b*((f+1)*b-f);case 26:return(b=b/e-1)*b*((f+1)*b+f)+1;case 27:return 1>(b/=.5*e)?.5*b*b*(((f*=1.525)+1)*b-f):.5*((b-=2)*b*(((f*=1.525)+1)*b+f)+2);case 28:return d.easeIn(b,e);case 29:return d.easeOut(b,e);case 30:return d.easeInOut(b,e);default:return-(b/=e)*(b-2)}};F(c,["_PiOver2",function(){return this._PiOver2=.5*Math.PI},"_TwoPi",function(){return this._TwoPi=2*Math.PI}]);c.__init$=function(){d=function(){function a(){}m(a,"");a.easeIn=function(b,e){return 1-a.easeOut(e-b,e)};a.easeOut=function(b,a){return(b/=a)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375};a.easeInOut=function(b,e){return b<.5*e?.5*a.easeIn(2*b,e):.5*a.easeOut(2*b-e,e)+.5};return a}()};return c}(),Ta=function(){function c(){this.channel=this.lineHeight=this.advance=this.height=this.width=this.offsetY=this.offsetX=0;this.texture=null}m(c,"fairygui.display.BMGlyph");return c}(),Ua=function(){function c(a){this._alignContainer=this._container=null;this._mouseWheelStep=this._scrollStep=this._scrollType=0;this._decelerationRate=NaN;this._scrollBarMargin=null;this._needRefresh=this._hScrollNone=this._vScrollNone=this._scrollBarDisplayAuto=this._touchEffect=this._bouncebackEffect=!1;this._refreshBarAxis=null;this._inertiaDisabled=this._pageMode=this._mouseWheelEnabled=this._displayInDemand=this._snapToItem=this._displayOnLeft=!1;this._yPos=this._xPos=NaN;this._velocity=this._lastTouchGlobalPos=this._lastTouchPos=this._beginTouchPos=this._containerPos=this._pageSize=this._overlapSize=this._contentSize=this._viewSize=null;this._lastMoveTime=this._velocityScale=NaN;this._isHoldAreaDone=!1;this._aniFlag=0;this._scrollBarVisible=!1;this._footerLockedSize=this._headerLockedSize=this._loop=0;this._refreshEventDispatching=!1;this._tweening=0;this._footer=this._header=this._vtScrollBar=this._hzScrollBar=this._pageController=this._tweenChange=this._tweenStart=this._tweenDuration=this._tweenTime=null;this.isDragged=!1;this._owner=a;this._maskContainer=new I;this._owner.displayObject.addChild(this._maskContainer);this._container=this._owner._container;this._container.pos(0,0);this._maskContainer.addChild(this._container);this._mouseWheelEnabled=this._scrollBarVisible=!0;this._headerLockedSize=this._footerLockedSize=this._aniFlag=this._yPos=this._xPos=0;this._scrollBarMargin=new ja;this._viewSize=new y;this._contentSize=new y;this._pageSize=new y(1,1);this._overlapSize=new y;this._tweenTime=new y;this._tweenStart=new y;this._tweenDuration=new y;this._tweenChange=new y;this._velocity=new y;this._containerPos=new y;this._beginTouchPos=new y;this._lastTouchPos=new y;this._lastTouchGlobalPos=new y;this._scrollStep=p.defaultScrollStep;this._mouseWheelStep=2*this._scrollStep;this._decelerationRate=p.defaultScrollDecelerationRate;this._owner.on("mousedown",this,this.__mouseDown);this._owner.on("mousewheel",this,this.__mouseWheel)}m(c,"fairygui.ScrollPane");var d=c.prototype;d.setup=function(a){this._scrollType=a.readByte();var b=a.readByte(),e=a.getInt32();a.readBool()&&(this._scrollBarMargin.top=a.getInt32(),this._scrollBarMargin.bottom=a.getInt32(),this._scrollBarMargin.left=a.getInt32(),this._scrollBarMargin.right=a.getInt32());var f=a.readS(),c=a.readS(),d=a.readS();a=a.readS();this._displayOnLeft=0!=(e&1);this._snapToItem=0!=(e&2);this._displayInDemand=0!=(e&4);this._pageMode=0!=(e&8);this._touchEffect=e&16?!0:e&32?!1:p.defaultScrollTouchEffect;this._bouncebackEffect=e&64?!0:e&128?!1:p.defaultScrollBounceEffect;this._inertiaDisabled=0!=(e&256);0==(e&512)&&(this._maskContainer.scrollRect=new D);0==b&&(b=p.defaultScrollBarDisplay);if(3!=b){if(2==this._scrollType||1==this._scrollType)if(e=f?f:p.verticalScrollBar){this._vtScrollBar=z.createObjectFromURL(e);if(!this._vtScrollBar)throw"cannot create scrollbar from "+e;this._vtScrollBar.setScrollPane(this,!0);this._owner.displayObject.addChild(this._vtScrollBar.displayObject)}if(2==this._scrollType||0==this._scrollType)if(e=c?c:p.horizontalScrollBar){this._hzScrollBar=z.createObjectFromURL(e);if(!this._hzScrollBar)throw"cannot create scrollbar from "+e;this._hzScrollBar.setScrollPane(this,!1);this._owner.displayObject.addChild(this._hzScrollBar.displayObject)}if(this._scrollBarDisplayAuto=2==b)this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1)}else this._mouseWheelEnabled=!1;if(d&&(this._header=z.createObjectFromURL(d),null==this._header))throw Error("FairyGUI: cannot create scrollPane header from "+d);if(a&&(this._footer=z.createObjectFromURL(a),null==this._footer))throw Error("FairyGUI: cannot create scrollPane footer from "+a);if(null!=this._header||null!=this._footer)this._refreshBarAxis=2==this._scrollType||1==this._scrollType?"y":"x";this.setSize(this.owner.width,this.owner.height)};d.dispose=function(){0!=this._tweening&&k.timer.clear(this,this.tweenUpdate);this._pageController=null;null!=this._hzScrollBar&&this._hzScrollBar.dispose();null!=this._vtScrollBar&&this._vtScrollBar.dispose();null!=this._header&&this._header.dispose();null!=this._footer&&this._footer.dispose()};d.setPercX=function(a,b){void 0===b&&(b=!1);this._owner.ensureBoundsCorrect();this.setPosX(this._overlapSize.x*t.clamp01(a),b)};d.setPercY=function(a,b){void 0===b&&(b=!1);this._owner.ensureBoundsCorrect();this.setPosY(this._overlapSize.y*t.clamp01(a),b)};d.setPosX=function(a,b){void 0===b&&(b=!1);this._owner.ensureBoundsCorrect();1==this._loop&&(a=this.loopCheckingNewPos(a,"x"));a=t.clamp(a,0,this._overlapSize.x);a!=this._xPos&&(this._xPos=a,this.posChanged(b))};d.setPosY=function(a,b){void 0===b&&(b=!1);this._owner.ensureBoundsCorrect();1==this._loop&&(a=this.loopCheckingNewPos(a,"y"));a=t.clamp(a,0,this._overlapSize.y);a!=this._yPos&&(this._yPos=a,this.posChanged(b))};d.setCurrentPageX=function(a,b){this._pageMode&&0<this._overlapSize.x&&this.setPosX(a*this._pageSize.x,b)};d.setCurrentPageY=function(a,b){this._pageMode&&0<this._overlapSize.y&&this.setPosY(a*this._pageSize.y,b)};d.scrollTop=function(a){void 0===a&&(a=!1);this.setPercY(0,a)};d.scrollBottom=function(a){void 0===a&&(a=!1);this.setPercY(1,a)};d.scrollUp=function(a,b){void 0===a&&(a=1);void 0===b&&(b=!1);this._pageMode?this.setPosY(this._yPos-this._pageSize.y*a,b):this.setPosY(this._yPos-this._scrollStep*a,b)};d.scrollDown=function(a,b){void 0===a&&(a=1);void 0===b&&(b=!1);this._pageMode?this.setPosY(this._yPos+this._pageSize.y*a,b):this.setPosY(this._yPos+this._scrollStep*a,b)};d.scrollLeft=function(a,b){void 0===a&&(a=1);void 0===b&&(b=!1);this._pageMode?this.setPosX(this._xPos-this._pageSize.x*a,b):this.setPosX(this._xPos-this._scrollStep*a,b)};d.scrollRight=function(a,b){void 0===a&&(a=1);void 0===b&&(b=!1);this._pageMode?this.setPosX(this._xPos+this._pageSize.x*a,b):this.setPosX(this._xPos+this._scrollStep*a,b)};d.scrollToView=function(a,b,e){void 0===b&&(b=!1);void 0===e&&(e=!1);this._owner.ensureBoundsCorrect();this._needRefresh&&this.refresh();var f;a instanceof fairygui.GObject?a.parent!=this._owner?(a.parent.localToGlobalRect(a.x,a.y,a.width,a.height,fairygui.ScrollPane.sHelperRect),f=this._owner.globalToLocalRect(fairygui.ScrollPane.sHelperRect.x,fairygui.ScrollPane.sHelperRect.y,fairygui.ScrollPane.sHelperRect.width,fairygui.ScrollPane.sHelperRect.height,fairygui.ScrollPane.sHelperRect)):(f=fairygui.ScrollPane.sHelperRect,f.setTo(a.x,a.y,a.width,a.height)):f=a;0<this._overlapSize.y&&(a=this._yPos+this._viewSize.y,e||f.y<=this._yPos||f.height>=this._viewSize.y?this._pageMode?this.setPosY(Math.floor(f.y/this._pageSize.y)*this._pageSize.y,b):this.setPosY(f.y,b):f.y+f.height>a&&(this._pageMode?this.setPosY(Math.floor(f.y/this._pageSize.y)*this._pageSize.y,b):f.height<=this._viewSize.y/2?this.setPosY(f.y+2*f.height-this._viewSize.y,b):this.setPosY(f.y+f.height-this._viewSize.y,b)));0<this._overlapSize.x&&(a=this._xPos+this._viewSize.x,e||f.x<=this._xPos||f.width>=this._viewSize.x?this._pageMode?this.setPosX(Math.floor(f.x/this._pageSize.x)*this._pageSize.x,b):this.setPosX(f.x,b):f.x+f.width>a&&(this._pageMode?this.setPosX(Math.floor(f.x/this._pageSize.x)*this._pageSize.x,b):f.width<=this._viewSize.x/2?this.setPosX(f.x+2*f.width-this._viewSize.x,b):this.setPosX(f.x+f.width-this._viewSize.x,b)));!b&&this._needRefresh&&this.refresh()};d.isChildInView=function(a){if(0<this._overlapSize.y){var b=a.y+this._container.y;if(b<-a.height||b>this._viewSize.y)return!1}return 0<this._overlapSize.x&&(b=a.x+this._container.x,b<-a.width||b>this._viewSize.x)?!1:!0};d.cancelDragging=function(){this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove);this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp);this._owner.displayObject.stage.off("click",this,this.__click);c.draggingPane==this&&(c.draggingPane=null);c._gestureFlag=0;this.isDragged=!1;this._maskContainer.mouseEnabled=!0};d.lockHeader=function(a){this._headerLockedSize!=a&&(this._headerLockedSize=a,!this._refreshEventDispatching&&0<=this._container[this._refreshBarAxis]&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),this._tweenChange[this._refreshBarAxis]=this._headerLockedSize-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,k.timer.frameLoop(1,this,this.tweenUpdate)))};d.lockFooter=function(a){this._footerLockedSize!=a&&(this._footerLockedSize=a,!this._refreshEventDispatching&&this._container[this._refreshBarAxis]<=-this._overlapSize[this._refreshBarAxis]&&(this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(0,0),a=this._overlapSize[this._refreshBarAxis],a=0==a?Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):a+this._footerLockedSize,this._tweenChange[this._refreshBarAxis]=-a-this._tweenStart[this._refreshBarAxis],this._tweenDuration.setTo(.3,.3),this._tweenTime.setTo(0,0),this._tweening=2,k.timer.frameLoop(1,this,this.tweenUpdate)))};d.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height);this.posChanged(!1)};d.handleControllerChanged=function(a){this._pageController==a&&(0==this._scrollType?this.setCurrentPageX(a.selectedIndex,!0):this.setCurrentPageY(a.selectedIndex,!0))};d.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var a;a=0==this._scrollType?this.currentPageX:this.currentPageY;if(a<this._pageController.pageCount){var b=this._pageController;this._pageController=null;b.selectedIndex=a;this._pageController=b}}};d.adjustMaskContainer=function(){this._maskContainer.pos(this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),Math.floor(this._owner.margin.top));0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new I,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.pos(this._owner._alignOffset.x,this._owner._alignOffset.y)):this._alignContainer&&this._alignContainer.pos(0,0)};d.setSize=function(a,b){this.adjustMaskContainer();this._hzScrollBar&&(this._hzScrollBar.y=b-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=a-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._displayOnLeft?this._scrollBarMargin.left+this._vtScrollBar.width:this._scrollBarMargin.left):(this._hzScrollBar.width=a-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left));this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=a-this._vtScrollBar.width),this._vtScrollBar.height=this._hzScrollBar?b-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:b-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top);this._viewSize.x=a;this._viewSize.y=b;this._hzScrollBar&&!this._hScrollNone&&(this._viewSize.y-=this._hzScrollBar.height);this._vtScrollBar&&!this._vScrollNone&&(this._viewSize.x-=this._vtScrollBar.width);this._viewSize.x-=this._owner.margin.left+this._owner.margin.right;this._viewSize.y-=this._owner.margin.top+this._owner.margin.bottom;this._viewSize.x=Math.max(1,this._viewSize.x);this._viewSize.y=Math.max(1,this._viewSize.y);this._pageSize.x=this._viewSize.x;this._pageSize.y=this._viewSize.y;this.handleSizeChanged()};d.setContentSize=function(a,b){if(this._contentSize.x!=a||this._contentSize.y!=b)this._contentSize.x=a,this._contentSize.y=b,this.handleSizeChanged()};d.changeContentSizeOnScrolling=function(a,b,e,f){var c=this._xPos==this._overlapSize.x,d=this._yPos==this._overlapSize.y;this._contentSize.x+=a;this._contentSize.y+=b;this.handleSizeChanged();1==this._tweening?(0!=a&&c&&0>this._tweenChange.x&&(this._xPos=this._overlapSize.x,this._tweenChange.x=-this._xPos-this._tweenStart.x),0!=b&&d&&0>this._tweenChange.y&&(this._yPos=this._overlapSize.y,this._tweenChange.y=-this._yPos-this._tweenStart.y)):2==this._tweening?(0!=e&&(this._container.x-=e,this._tweenStart.x-=e,this._xPos=-this._container.x),0!=f&&(this._container.y-=f,this._tweenStart.y-=f,this._yPos=-this._container.y)):this.isDragged?(0!=e&&(this._container.x-=e,this._containerPos.x-=e,this._xPos=-this._container.x),0!=f&&(this._container.y-=f,this._containerPos.y-=f,this._yPos=-this._container.y)):(0!=a&&c&&(this._xPos=this._overlapSize.x,this._container.x=-this._xPos),0!=b&&d&&(this._yPos=this._overlapSize.y,this._container.y=-this._yPos));this._pageMode&&this.updatePageController()};d.handleSizeChanged=function(a){this._displayInDemand&&(this._vtScrollBar&&(this._contentSize.y<=this._viewSize.y?this._vScrollNone||(this._vScrollNone=!0,this._viewSize.x+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewSize.x-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentSize.x<=this._viewSize.x?this._hScrollNone||(this._hScrollNone=!0,this._viewSize.y+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewSize.y-=this._hzScrollBar.height)));this._vtScrollBar&&(this._viewSize.y<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,this._vtScrollBar.displayPerc=0==this._contentSize.y?0:Math.min(1,this._viewSize.y/this._contentSize.y)));this._hzScrollBar&&(this._viewSize.x<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,this._hzScrollBar.displayPerc=0==this._contentSize.x?0:Math.min(1,this._viewSize.x/this._contentSize.x)));if(a=this._maskContainer.scrollRect)a.width=this._viewSize.x,a.height=this._viewSize.y,this._maskContainer.scrollRect=a;this._overlapSize.x=0==this._scrollType||2==this._scrollType?Math.ceil(Math.max(0,this._contentSize.x-this._viewSize.x)):0;this._overlapSize.y=1==this._scrollType||2==this._scrollType?Math.ceil(Math.max(0,this._contentSize.y-this._viewSize.y)):0;this._xPos=t.clamp(this._xPos,0,this._overlapSize.x);this._yPos=t.clamp(this._yPos,0,this._overlapSize.y);null!=this._refreshBarAxis?(a=this._overlapSize[this._refreshBarAxis],a=0==a?Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):a+this._footerLockedSize,"x"==this._refreshBarAxis?this._container.pos(t.clamp(this._container.x,-a,this._headerLockedSize),t.clamp(this._container.y,-this._overlapSize.y,0)):this._container.pos(t.clamp(this._container.x,-this._overlapSize.x,0),t.clamp(this._container.y,-a,this._headerLockedSize)),null!=this._header&&("x"==this._refreshBarAxis?this._header.height=this._viewSize.y:this._header.width=this._viewSize.x),null!=this._footer&&("y"==this._refreshBarAxis?this._footer.height=this._viewSize.y:this._footer.width=this._viewSize.x)):this._container.pos(t.clamp(this._container.x,-this._overlapSize.x,0),t.clamp(this._container.y,-this._overlapSize.y,0));this.syncScrollBar(!0);this.checkRefreshBar();this._pageMode&&this.updatePageController()};d.posChanged=function(a){0==this._aniFlag?this._aniFlag=a?1:-1:1!=this._aniFlag||a||(this._aniFlag=-1);this._needRefresh=!0;k.timer.callLater(this,this.refresh)};d.refresh=function(){this._needRefresh=!1;k.timer.clear(this,this.refresh);if(this._pageMode||this._snapToItem)c.sEndPos.setTo(-this._xPos,-this._yPos),this.alignPosition(c.sEndPos,!1),this._xPos=-c.sEndPos.x,this._yPos=-c.sEndPos.y;this.refresh2();A.dispatch("fui_scroll",this._owner.displayObject);this._needRefresh&&(this._needRefresh=!1,k.timer.clear(this,this.refresh),this.refresh2());this.syncScrollBar();this._aniFlag=0};d.refresh2=function(){if(1!=this._aniFlag||this.isDragged)0!=this._tweening&&this.killTween(),this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos)),this.loopCheckingCurrent();else{var a,b;0<this._overlapSize.x?a=-Math.floor(this._xPos):(0!=this._container.x&&(this._container.x=0),a=0);0<this._overlapSize.y?b=-Math.floor(this._yPos):(0!=this._container.y&&(this._container.y=0),b=0);a!=this._container.x||b!=this._container.y?(this._tweening=1,this._tweenTime.setTo(0,0),this._tweenDuration.setTo(.5,.5),this._tweenStart.setTo(this._container.x,this._container.y),this._tweenChange.setTo(a-this._tweenStart.x,b-this._tweenStart.y),k.timer.frameLoop(1,this,this.tweenUpdate)):0!=this._tweening&&this.killTween()}this._pageMode&&this.updatePageController()};d.syncScrollBar=function(a){void 0===a&&(a=!1);null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._overlapSize.y?0:t.clamp(-this._container.y,0,this._overlapSize.y)/this._overlapSize.y,this._scrollBarDisplayAuto&&this.showScrollBar(!a));null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._overlapSize.x?0:t.clamp(-this._container.x,0,this._overlapSize.x)/this._overlapSize.x,this._scrollBarDisplayAuto&&this.showScrollBar(!a));a&&(this._maskContainer.mouseEnabled=!0)};d.__mouseDown=function(){if(this._touchEffect){0!=this._tweening?(this.killTween(),this.isDragged=!0):this.isDragged=!1;var a=this._owner.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.ScrollPane.sHelperPoint);this._containerPos.setTo(this._container.x,this._container.y);this._beginTouchPos.setTo(a.x,a.y);this._lastTouchPos.setTo(a.x,a.y);this._lastTouchGlobalPos.setTo(k.stage.mouseX,k.stage.mouseY);this._isHoldAreaDone=!1;this._velocity.setTo(0,0);this._velocityScale=1;this._lastMoveTime=k.timer.currTimer/1E3;this._owner.displayObject.stage.on("mousemove",this,this.__mouseMove);this._owner.displayObject.stage.on("mouseup",this,this.__mouseUp);this._owner.displayObject.stage.on("click",this,this.__click)}};d.__mouseMove=function(){if(this._touchEffect&&(null==c.draggingPane||c.draggingPane==this)&&null==E.draggingObject){var a=p.touchScrollSensitivity,b=this._owner.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.ScrollPane.sHelperPoint),e,f=!1,d=!1;if(1==this._scrollType){if(!this._isHoldAreaDone&&(c._gestureFlag|=1,e=Math.abs(this._beginTouchPos.y-b.y),e<a||0!=(c._gestureFlag&2)&&(a=Math.abs(this._beginTouchPos.x-b.x),e<a)))return;f=!0}else if(0==this._scrollType){if(!this._isHoldAreaDone&&(c._gestureFlag|=2,e=Math.abs(this._beginTouchPos.x-b.x),e<a||0!=(c._gestureFlag&1)&&(a=Math.abs(this._beginTouchPos.y-b.y),e<a)))return;d=!0}else{c._gestureFlag=3;if(!this._isHoldAreaDone&&(e=Math.abs(this._beginTouchPos.y-b.y),e<a&&(e=Math.abs(this._beginTouchPos.x-b.x),e<a)))return;f=d=!0}e=Math.floor(this._containerPos.x+b.x-this._beginTouchPos.x);a=Math.floor(this._containerPos.y+b.y-this._beginTouchPos.y);f&&(this._container.y=0<a?this._bouncebackEffect?null!=this._header&&0!=this._header.maxHeight?Math.floor(Math.min(.5*a,this._header.maxHeight)):Math.floor(Math.min(.5*a,.5*this._viewSize.y)):0:a<-this._overlapSize.y?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxHeight?Math.floor(Math.max(.5*(a+this._overlapSize.y),-this._footer.maxHeight)-this._overlapSize.y):Math.floor(Math.max(.5*(a+this._overlapSize.y),.5*-this._viewSize.y)-this._overlapSize.y):-this._overlapSize.y:a);d&&(this._container.x=0<e?this._bouncebackEffect?null!=this._header&&0!=this._header.maxWidth?Math.floor(Math.min(.5*e,this._header.maxWidth)):Math.floor(Math.min(.5*e,.5*this._viewSize.x)):0:e<0-this._overlapSize.x?this._bouncebackEffect?null!=this._footer&&0<this._footer.maxWidth?Math.floor(Math.max(.5*(e+this._overlapSize.x),-this._footer.maxWidth)-this._overlapSize.x):Math.floor(Math.max(.5*(e+this._overlapSize.x),.5*-this._viewSize.x)-this._overlapSize.x):-this._overlapSize.x:e);var r="slow"==k.stage.frameRate?30:60;e=k.timer.currTimer/1E3;var g=Math.max(e-this._lastMoveTime,1/r),a=b.x-this._lastTouchPos.x,l=b.y-this._lastTouchPos.y;d||(a=0);f||(l=0);0!=g&&(f=g*r-1,1<f&&(f=Math.pow(.833,f),this._velocity.x*=f,this._velocity.y*=f),this._velocity.x=t.lerp(this._velocity.x,60*a/r/g,10*g),this._velocity.y=t.lerp(this._velocity.y,60*l/r/g,10*g));f=this._lastTouchGlobalPos.x-k.stage.mouseX;d=this._lastTouchGlobalPos.y-k.stage.mouseY;0!=a?this._velocityScale=Math.abs(f/a):0!=l&&(this._velocityScale=Math.abs(d/l));this._lastTouchPos.setTo(b.x,b.y);this._lastTouchGlobalPos.setTo(k.stage.mouseX,k.stage.mouseY);this._lastMoveTime=e;0<this._overlapSize.x&&(this._xPos=t.clamp(-this._container.x,0,this._overlapSize.x));0<this._overlapSize.y&&(this._yPos=t.clamp(-this._container.y,0,this._overlapSize.y));0!=this._loop&&(e=this._container.x,a=this._container.y,this.loopCheckingCurrent()&&(this._containerPos.x+=this._container.x-e,this._containerPos.y+=this._container.y-a));c.draggingPane=this;this.isDragged=this._isHoldAreaDone=!0;this._maskContainer.mouseEnabled=!1;this.syncScrollBar();this.checkRefreshBar();this._pageMode&&this.updatePageController();A.dispatch("fui_scroll",this._owner.displayObject)}};d.__mouseUp=function(){this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove);this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp);this._owner.displayObject.stage.off("click",this,this.__click);c.draggingPane==this&&(c.draggingPane=null);c._gestureFlag=0;if(this.isDragged&&this._touchEffect){this.isDragged=!1;this._maskContainer.mouseEnabled=!0;this._tweenStart.setTo(this._container.x,this._container.y);c.sEndPos.setTo(this._tweenStart.x,this._tweenStart.y);var a=!1;0<this._container.x?(c.sEndPos.x=0,a=!0):this._container.x<-this._overlapSize.x&&(c.sEndPos.x=-this._overlapSize.x,a=!0);0<this._container.y?(c.sEndPos.y=0,a=!0):this._container.y<-this._overlapSize.y&&(c.sEndPos.y=-this._overlapSize.y,a=!0);if(a){this._tweenChange.setTo(c.sEndPos.x-this._tweenStart.x,c.sEndPos.y-this._tweenStart.y);if(this._tweenChange.x<-p.touchDragSensitivity||this._tweenChange.y<-p.touchDragSensitivity)this._refreshEventDispatching=!0,A.dispatch("fui_pull_down_release",this._owner.displayObject),this._refreshEventDispatching=!1;else if(this._tweenChange.x>p.touchDragSensitivity||this._tweenChange.y>p.touchDragSensitivity)this._refreshEventDispatching=!0,A.dispatch("fui_pull_up_release",this._owner.displayObject),this._refreshEventDispatching=!1;0<this._headerLockedSize&&0==c.sEndPos[this._refreshBarAxis]?(c.sEndPos[this._refreshBarAxis]=this._headerLockedSize,this._tweenChange.x=c.sEndPos.x-this._tweenStart.x,this._tweenChange.y=c.sEndPos.y-this._tweenStart.y):0<this._footerLockedSize&&c.sEndPos[this._refreshBarAxis]==-this._overlapSize[this._refreshBarAxis]&&(a=this._overlapSize[this._refreshBarAxis],a=0==a?Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):a+this._footerLockedSize,c.sEndPos[this._refreshBarAxis]=-a,this._tweenChange.x=c.sEndPos.x-this._tweenStart.x,this._tweenChange.y=c.sEndPos.y-this._tweenStart.y);this._tweenDuration.setTo(.3,.3)}else{this._inertiaDisabled?this._tweenDuration.setTo(.3,.3):(a=(k.timer.currTimer/1E3-this._lastMoveTime)*("slow"==k.stage.frameRate?30:60)-1,1<a&&(a=Math.pow(.833,a),this._velocity.x*=a,this._velocity.y*=a),this.updateTargetAndDuration(this._tweenStart,c.sEndPos));c.sOldChange.setTo(c.sEndPos.x-this._tweenStart.x,c.sEndPos.y-this._tweenStart.y);this.loopCheckingTarget(c.sEndPos);(this._pageMode||this._snapToItem)&&this.alignPosition(c.sEndPos,!0);this._tweenChange.x=c.sEndPos.x-this._tweenStart.x;this._tweenChange.y=c.sEndPos.y-this._tweenStart.y;if(0==this._tweenChange.x&&0==this._tweenChange.y){this._scrollBarDisplayAuto&&this.showScrollBar(!1);return}if(this._pageMode||this._snapToItem)this.fixDuration("x",c.sOldChange.x),this.fixDuration("y",c.sOldChange.y)}this._tweening=2;this._tweenTime.setTo(0,0);k.timer.frameLoop(1,this,this.tweenUpdate)}else this.isDragged=!1,this._maskContainer.mouseEnabled=!0};d.__click=function(){this.isDragged=!1};d.__mouseWheel=function(a){this._mouseWheelEnabled&&(this._owner.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.ScrollPane.sHelperPoint),a=a.delta,a=0<a?-1:0>a?1:0,0<this._overlapSize.x&&0==this._overlapSize.y?this._pageMode?this.setPosX(this._xPos+this._pageSize.x*a,!1):this.setPosX(this._xPos+this._mouseWheelStep*a,!1):this._pageMode?this.setPosY(this._yPos+this._pageSize.y*a,!1):this.setPosY(this._yPos+this._mouseWheelStep*a,!1))};d.__rollOver=function(){this.showScrollBar(!0)};d.__rollOut=function(){this.showScrollBar(!1)};d.showScrollBar=function(a){if(a)this.__showScrollBar(!0),k.timer.clear(this,this.__showScrollBar);else k.timer.once(500,this,this.__showScrollBar,[a])};d.__showScrollBar=function(a){this._scrollBarVisible=a&&0<this._viewSize.x&&0<this._viewSize.y;this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone);this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)};d.getLoopPartSize=function(a,b){return(this._contentSize[b]+("x"==b?this._owner.columnGap:this._owner.lineGap))/a};d.loopCheckingCurrent=function(){var a=!1;1==this._loop&&0<this._overlapSize.x?.001>this._xPos?(this._xPos+=this.getLoopPartSize(2,"x"),a=!0):this._xPos>=this._overlapSize.x&&(this._xPos-=this.getLoopPartSize(2,"x"),a=!0):2==this._loop&&0<this._overlapSize.y&&(.001>this._yPos?(this._yPos+=this.getLoopPartSize(2,"y"),a=!0):this._yPos>=this._overlapSize.y&&(this._yPos-=this.getLoopPartSize(2,"y"),a=!0));a&&this._container.pos(Math.floor(-this._xPos),Math.floor(-this._yPos));return a};d.loopCheckingTarget=function(a){1==this._loop&&this.loopCheckingTarget2(a,"x");2==this._loop&&this.loopCheckingTarget2(a,"y")};d.loopCheckingTarget2=function(a,b){var e,f;0<a[b]?(e=this.getLoopPartSize(2,b),f=this._tweenStart[b]-e,0>=f&&f>=-this._overlapSize[b]&&(a[b]-=e,this._tweenStart[b]=f)):a[b]<-this._overlapSize[b]&&(e=this.getLoopPartSize(2,b),f=this._tweenStart[b]+e,0>=f&&f>=-this._overlapSize[b]&&(a[b]+=e,this._tweenStart[b]=f))};d.loopCheckingNewPos=function(a,b){if(0==this._overlapSize[b])return a;var e="x"==b?this._xPos:this._yPos,f=!1;.001>a?(a+=this.getLoopPartSize(2,b),a>e&&(f=this.getLoopPartSize(6,b),f*=Math.ceil((a-e)/f),e=t.clamp(e+f,0,this._overlapSize[b]),f=!0)):a>=this._overlapSize[b]&&(a-=this.getLoopPartSize(2,b),a<e&&(f=this.getLoopPartSize(6,b),f*=Math.ceil((e-a)/f),e=t.clamp(e-f,0,this._overlapSize[b]),f=!0));f&&("x"==b?this._container.x=-Math.floor(e):this._container.y=-Math.floor(e));return a};d.alignPosition=function(a,b){if(this._pageMode)a.x=this.alignByPage(a.x,"x",b),a.y=this.alignByPage(a.y,"y",b);else if(this._snapToItem){var e=0,f=0;b&&(e=a.x-this._containerPos.x,f=a.y-this._containerPos.y);e=this._owner.getSnappingPositionWithDir(-a.x,-a.y,e,f,c.sHelperPoint);0>a.x&&a.x>-this._overlapSize.x&&(a.x=-e.x);0>a.y&&a.y>-this._overlapSize.y&&(a.y=-e.y)}};d.alignByPage=function(a,b,e){var f;if(0<a)f=0;else if(a<-this._overlapSize[b])f=Math.ceil(this._contentSize[b]/this._pageSize[b])-1;else{f=Math.floor(-a/this._pageSize[b]);var c=e?a-this._containerPos[b]:a-this._container[b],d=Math.min(this._pageSize[b],this._contentSize[b]-(f+1)*this._pageSize[b]);a=-a-f*this._pageSize[b];Math.abs(c)>this._pageSize[b]?a>.5*d&&f++:a>d*(0>c?p.defaultScrollPagingThreshold:1-p.defaultScrollPagingThreshold)&&f++;a=-f*this._pageSize[b];a<-this._overlapSize[b]&&(a=-this._overlapSize[b])}e&&(e=this._tweenStart[b],e=0<e?0:e<-this._overlapSize[b]?Math.ceil(this._contentSize[b]/this._pageSize[b])-1:Math.floor(-e/this._pageSize[b]),c=Math.floor(-this._containerPos[b]/this._pageSize[b]),1<Math.abs(f-c)&&1>=Math.abs(e-c)&&(a=-(f>c?c+1:c-1)*this._pageSize[b]));return a};d.updateTargetAndDuration=function(a,b){b.x=this.updateTargetAndDuration2(a.x,"x");b.y=this.updateTargetAndDuration2(a.y,"y")};d.updateTargetAndDuration2=function(a,b){var e=this._velocity[b],f=0;if(0<a)a=0;else if(a<-this._overlapSize[b])a=-this._overlapSize[b];else{var c=Math.abs(e)*this._velocityScale;T.onMobile&&(c*=1136/Math.max(k.stage.width,k.stage.height));var d=0;this._pageMode||!T.onMobile?500<c&&(d=Math.pow((c-500)/500,2)):1E3<c&&(d=Math.pow((c-1E3)/1E3,2));0!=d&&(1<d&&(d=1),e*=d,this._velocity[b]=e,f=Math.log(60/(c*d))/Math.log(this._decelerationRate)/60,a+=Math.floor(e*f*.4))}.3>f&&(f=.3);this._tweenDuration[b]=f;return a};d.fixDuration=function(a,b){if(!(0==this._tweenChange[a]||Math.abs(this._tweenChange[a])>=Math.abs(b))){var e=Math.abs(this._tweenChange[a]/b)*this._tweenDuration[a];.3>e&&(e=.3);this._tweenDuration[a]=e}};d.killTween=function(){1==this._tweening&&(this._container.pos(this._tweenStart.x+this._tweenChange.x,this._tweenStart.y+this._tweenChange.y),A.dispatch("fui_scroll",this._owner.displayObject));this._tweening=0;k.timer.clear(this,this.tweenUpdate);A.dispatch("fui_scroll_end",this._owner.displayObject)};d.checkRefreshBar=function(){if(null!=this._header||null!=this._footer){var a=this._container[this._refreshBarAxis];if(null!=this._header)if(0<a){null==this._header.displayObject.parent&&this._maskContainer.addChildAt(this._header.displayObject,0);var b=c.sHelperPoint;b.setTo(this._header.width,this._header.height);b[this._refreshBarAxis]=a;this._header.setSize(b.x,b.y)}else null!=this._header.displayObject.parent&&this._maskContainer.removeChild(this._header.displayObject);if(null!=this._footer){var e=this._overlapSize[this._refreshBarAxis];a<-e||0==e&&0<this._footerLockedSize?(null==this._footer.displayObject.parent&&this._maskContainer.addChildAt(this._footer.displayObject,0),b=c.sHelperPoint,b.setTo(this._footer.x,this._footer.y),b[this._refreshBarAxis]=0<e?a+this._contentSize[this._refreshBarAxis]:Math.max(Math.min(a+this._viewSize[this._refreshBarAxis],this._viewSize[this._refreshBarAxis]-this._footerLockedSize),this._viewSize[this._refreshBarAxis]-this._contentSize[this._refreshBarAxis]),this._footer.setXY(b.x,b.y),b.setTo(this._footer.width,this._footer.height),b[this._refreshBarAxis]=0<e?-e-a:this._viewSize[this._refreshBarAxis]-this._footer[this._refreshBarAxis],this._footer.setSize(b.x,b.y)):null!=this._footer.displayObject.parent&&this._maskContainer.removeChild(this._footer.displayObject)}}};d.tweenUpdate=function(){var a=this.runTween("x"),b=this.runTween("y");this._container.pos(a,b);2==this._tweening&&(0<this._overlapSize.x&&(this._xPos=t.clamp(-a,0,this._overlapSize.x)),0<this._overlapSize.y&&(this._yPos=t.clamp(-b,0,this._overlapSize.y)),this._pageMode&&this.updatePageController());0==this._tweenChange.x&&0==this._tweenChange.y?(this._tweening=0,k.timer.clear(this,this.tweenUpdate),this.loopCheckingCurrent(),this.syncScrollBar(!0),this.checkRefreshBar(),A.dispatch("fui_scroll",this._owner.displayObject),A.dispatch("fui_scroll_end",this._owner.displayObject)):(this.syncScrollBar(!1),this.checkRefreshBar(),A.dispatch("fui_scroll",this._owner.displayObject))};d.runTween=function(a){var b;if(0!=this._tweenChange[a]){this._tweenTime[a]+=k.timer.delta/1E3;this._tweenTime[a]>=this._tweenDuration[a]?(b=this._tweenStart[a]+this._tweenChange[a],this._tweenChange[a]=0):(b=c.easeFunc(this._tweenTime[a],this._tweenDuration[a]),b=this._tweenStart[a]+Math.floor(this._tweenChange[a]*b));var e=0,f=-this._overlapSize[a];0<this._headerLockedSize&&this._refreshBarAxis==a&&(e=this._headerLockedSize);0<this._footerLockedSize&&this._refreshBarAxis==a&&(f=this._overlapSize[this._refreshBarAxis],f=0==f?Math.max(this._contentSize[this._refreshBarAxis]+this._footerLockedSize-this._viewSize[this._refreshBarAxis],0):f+this._footerLockedSize,f=-f);if(2==this._tweening&&this._bouncebackEffect)if(b>20+e&&0<this._tweenChange[a]||b>e&&0==this._tweenChange[a])this._tweenTime[a]=0,this._tweenDuration[a]=.3,this._tweenChange[a]=-b+e,this._tweenStart[a]=b;else{if(b<f-20&&0>this._tweenChange[a]||b<f&&0==this._tweenChange[a])this._tweenTime[a]=0,this._tweenDuration[a]=.3,this._tweenChange[a]=f-b,this._tweenStart[a]=b}else b>e?(b=e,this._tweenChange[a]=0):b<f&&(b=f,this._tweenChange[a]=0)}else b=this._container[a];return b};g(0,d,"viewWidth",function(){return this._viewSize.x},function(a){a=a+this._owner.margin.left+this._owner.margin.right;null!=this._vtScrollBar&&(a+=this._vtScrollBar.width);this._owner.width=a});g(0,d,"percY",function(){return 0==this._overlapSize.y?0:this._yPos/this._overlapSize.y},function(a){this.setPercY(a,!1)});g(0,d,"owner",function(){return this._owner});g(0,d,"bouncebackEffect",function(){return this._bouncebackEffect},function(a){this._bouncebackEffect=a});g(0,d,"vtScrollBar",function(){return this._vtScrollBar});g(0,d,"hzScrollBar",function(){return this._hzScrollBar});g(0,d,"header",function(){return this._header});g(0,d,"footer",function(){return this._footer});g(0,d,"isBottomMost",function(){return this._yPos==this._overlapSize.y||0==this._overlapSize.y});g(0,d,"touchEffect",function(){return this._touchEffect},function(a){this._touchEffect=a});g(0,d,"contentWidth",function(){return this._contentSize.x});g(0,d,"scrollStep",function(){return this._scrollStep},function(a){this._scrollStep=a;0==this._scrollStep&&(this._scrollStep=p.defaultScrollStep);this._mouseWheelStep=2*this._scrollStep});g(0,d,"viewHeight",function(){return this._viewSize.y},function(a){a=a+this._owner.margin.top+this._owner.margin.bottom;null!=this._hzScrollBar&&(a+=this._hzScrollBar.height);this._owner.height=a});g(0,d,"posX",function(){return this._xPos},function(a){this.setPosX(a,!1)});g(0,d,"snapToItem",function(){return this._snapToItem},function(a){this._snapToItem=a});g(0,d,"mouseWheelEnabled",function(){return this._mouseWheelEnabled},function(a){this._mouseWheelEnabled=a});g(0,d,"decelerationRate",function(){return this._decelerationRate},function(a){this._decelerationRate=a});g(0,d,"percX",function(){return 0==this._overlapSize.x?0:this._xPos/this._overlapSize.x},function(a){this.setPercX(a,!1)});g(0,d,"posY",function(){return this._yPos},function(a){this.setPosY(a,!1)});g(0,d,"contentHeight",function(){return this._contentSize.y});g(0,d,"currentPageX",function(){if(!this._pageMode)return 0;var a=Math.floor(this._xPos/this._pageSize.x);this._xPos-a*this._pageSize.x>.5*this._pageSize.x&&a++;return a},function(a){this.setCurrentPageX(a,!1)});g(0,d,"currentPageY",function(){if(!this._pageMode)return 0;var a=Math.floor(this._yPos/this._pageSize.y);this._yPos-a*this._pageSize.y>.5*this._pageSize.y&&a++;return a},function(a){this.setCurrentPageY(a,!1)});g(0,d,"isRightMost",function(){return this._xPos==this._overlapSize.x||0==this._overlapSize.x});g(0,d,"pageController",function(){return this._pageController},function(a){this._pageController=a});g(0,d,"scrollingPosX",function(){return t.clamp(-this._container.x,0,this._overlapSize.x)});g(0,d,"scrollingPosY",function(){return t.clamp(-this._container.y,0,this._overlapSize.y)});c.easeFunc=function(a,b){return(a=a/b-1)*a*a+1};c.draggingPane=null;c._gestureFlag=0;c.TWEEN_TIME_GO=.5;c.TWEEN_TIME_DEFAULT=.3;c.PULL_RATIO=.5;F(c,["sHelperPoint",function(){return this.sHelperPoint=new y},"sHelperRect",function(){return this.sHelperRect=new D},"sEndPos",function(){return this.sEndPos=new y},"sOldChange",function(){return this.sOldChange=new y}]);return c}();(function(){function c(){}m(c,"fairygui.ButtonMode");c.Common=0;c.Check=1;c.Radio=2;return c})();var z=function(){function c(){this._customId=this._name=this._id=null;this._items=[];this._itemsById={};this._itemsByName={};this._sprites={}}var d;m(c,"fairygui.UIPackage");var a=c.prototype;a.loadPackage=function(b,a){if(1179080009!=b.getUint32())throw Error("FairyGUI: old package format found in '"+a+"'");b.version=b.getInt32();var e=b.readBool();this._id=b.readUTFString();this._name=b.readUTFString();b.skip(20);e&&(e=new Uint8Array(b.buffer,b.pos,b.length-b.pos),e=(new Zlib.RawInflate(e)).decompress(),b=new ta(e));var e=b.pos,c,r,g;b.seek(e,4);c=b.getInt32();g=S(c);for(r=0;r<c;r++)g[r]=b.readUTFString();b.stringTable=g;b.seek(e,1);var l;a+="_";c=b.getUint16();for(r=0;r<c;r++){g=b.getInt32();g+=b.pos;l=new Qa;l.owner=this;l.type=b.readByte();l.id=b.readS();l.name=b.readS();b.readS();l.file=b.readS();b.readBool();l.width=b.getInt32();l.height=b.getInt32();switch(l.type){case 0:l.objectType=0;var h=b.readByte();1==h?(l.scale9Grid=new laya.maths.Rectangle,l.scale9Grid.x=b.getInt32(),l.scale9Grid.y=b.getInt32(),l.scale9Grid.width=b.getInt32(),l.scale9Grid.height=b.getInt32(),l.tileGridIndice=b.getInt32()):2==h&&(l.scaleByTile=!0);l.smoothing=b.readBool();break;case 1:l.smoothing=b.readBool();l.objectType=1;l.rawData=b.readBuffer();break;case 5:l.rawData=b.readBuffer();break;case 3:h=b.readByte();l.objectType=0<h?h:9;l.rawData=b.readBuffer();M.resolvePackageItemExtension(l);break;case 4:case 2:case 7:l.file=a+l.file}this._items.push(l);this._itemsById[l.id]=l;null!=l.name&&(this._itemsByName[l.name]=l);b.pos=g}b.seek(e,2);c=b.getUint16();for(r=0;r<c;r++){g=b.getUint16();g+=b.pos;h=b.readS();l=this._itemsById[b.readS()];var k=new d;k.atlas=l;k.rect.x=b.getInt32();k.rect.y=b.getInt32();k.rect.width=b.getInt32();k.rect.height=b.getInt32();k.rotated=b.readBool();this._sprites[h]=k;b.pos=g}if(b.seek(e,3))for(c=b.getUint16(),r=0;r<c;r++)g=b.getInt32(),g+=b.pos,(l=this._itemsById[b.readS()])&&0==l.type&&(l.pixelHitTestData=new Pa,l.pixelHitTestData.load(b)),b.pos=g};a.loadAllAssets=function(){for(var b=this._items.length,a=0;a<b;a++)this.getItemAsset(this._items[a])};a.unloadAssets=function(){for(var b=this._items.length,a=0;a<b;a++){var f=this._items[a];4==f.type&&null!=f.texture&&k.loader.clearTextureRes(f.texture.url)}};a.dispose=function(){for(var b=this._items.length,a=0;a<b;a++){var f=this._items[a];4==f.type?null!=f.texture&&(f.texture.destroy(),f.texture=null):2==f.type&&V.destroySound(f.file)}};a.createObject=function(b,a){var e=this._itemsByName[b];return e?this.internalCreateObject(e,a):null};a.internalCreateObject=function(b,a){var e;e=3==b.type?null!=a?new a:M.newObject(b):M.newObject(b);if(null==e)return null;fairygui.UIPackage._constructing++;e.packageItem=b;e.constructFromResource();fairygui.UIPackage._constructing--;return e};a.getItemById=function(b){return this._itemsById[b]};a.getItemByName=function(b){return this._itemsByName[b]};a.getItemAssetByName=function(b){var a=this._itemsByName[b];if(null==a)throw"Resource not found -"+b;return this.getItemAsset(a)};a.getItemAsset=function(b){switch(b.type){case 0:if(!b.decoded){b.decoded=!0;var a=this._sprites[b.id];if(null!=a){var f=this.getItemAsset(a.atlas);b.texture=W.create(f,a.rect.x,a.rect.y,a.rect.width,a.rect.height)}else b.texture=null}return b.texture;case 4:return b.decoded||(b.decoded=!0,b.texture=aa.inst.getRes(b.file)),b.texture;case 5:return b.decoded||(b.decoded=!0,this.loadFont(b)),b.bitmapFont;case 1:return b.decoded||(b.decoded=!0,this.loadMovieClip(b)),b.frames;case 3:return b.rawData;case 7:return b.file?aa.inst.getRes(b.file):null;default:return null}};a.loadMovieClip=function(b){var a=b.rawData;a.seek(0,0);b.interval=a.getInt32();b.swing=a.readBool();b.repeatDelay=a.getInt32();a.seek(0,1);var f=a.getInt16();b.frames=S(f);for(var c,d,g,l,h,k=0;k<f;k++){var N=a.getInt16(),N=N+a.pos;d=new Na;l=a.getInt32();h=a.getInt32();a.getInt32();a.getInt32();d.addDelay=a.getInt32();c=a.readS();null!=c&&null!=(g=this._sprites[c])&&(c=this.getItemAsset(g.atlas),d.texture=W.create(c,g.rect.x,g.rect.y,g.rect.width,g.rect.height,l,h,b.width,b.height));b.frames[k]=d;a.pos=N}};a.loadFont=function(b){var a=new Ra;b.bitmapFont=a;var f=b.rawData;f.seek(0,0);a.ttf=f.readBool();f.readBool();a.resizable=f.readBool();f.readBool();a.size=f.getInt32();var c=f.getInt32(),d=f.getInt32(),g=null;b=this._sprites[b.id];null!=b&&(g=this.getItemAsset(b.atlas));f.seek(0,1);for(var l,h=f.getInt32(),k=0;k<h;k++){var N=f.getInt16(),N=N+f.pos;l=new Ta;var m=f.readChar();a.glyphs[m]=l;var m=f.readS(),q=f.getInt32(),O=f.getInt32();l.offsetX=f.getInt32();l.offsetY=f.getInt32();l.width=f.getInt32();l.height=f.getInt32();l.advance=f.getInt32();l.channel=f.readByte();1==l.channel?l.channel=3:2==l.channel?l.channel=2:3==l.channel&&(l.channel=1);if(a.ttf)l.texture=W.create(g,q+b.rect.x,O+b.rect.y,l.width,l.height);else if(m=this._itemsById[m])this.getItemAsset(m),l.width=m.width,l.height=m.height,l.texture=m.texture;a.ttf?l.lineHeight=d:(0==l.advance&&(l.advance=0==c?l.offsetX+l.width:c),l.lineHeight=0>l.offsetY?l.height:l.offsetY+l.height,l.lineHeight<a.size&&(l.lineHeight=a.size));f.pos=N}};g(0,a,"id",function(){return this._id});g(0,a,"name",function(){return this._name});g(0,a,"customId",function(){return this._customId},function(b){null!=this._customId&&delete fairygui.UIPackage._packageInstById[this._customId];this._customId=b;null!=this._customId&&(fairygui.UIPackage._packageInstById[this._customId]=this)});c.getById=function(b){return fairygui.UIPackage._packageInstById[b]};c.getByName=function(b){return fairygui.UIPackage._packageInstByName[b]};c.addPackage=function(b,a){if(!a&&(a=aa.inst.getRes(b+"."+p.packageFileExtension),!a||0==a.byteLength))throw Error("package resource not ready: "+b);var e=new ta(a),d=new c;d.loadPackage(e,b);fairygui.UIPackage._packageInstById[d.id]=d;fairygui.UIPackage._packageInstByName[d.name]=d;d.customId=b;return d};c.removePackage=function(b){var a=fairygui.UIPackage._packageInstById[b];a||(a=fairygui.UIPackage._packageInstByName[b]);if(!a)throw Error("unknown package: "+b);a.dispose();delete fairygui.UIPackage._packageInstById[a.id];null!=a._customId&&delete fairygui.UIPackage._packageInstById[a._customId];delete fairygui.UIPackage._packageInstByName[a.name]};c.createObject=function(b,a,f){return(b=fairygui.UIPackage.getByName(b))?b.createObject(a,f):null};c.createObjectFromURL=function(b,a){var e=fairygui.UIPackage.getItemByURL(b);return e?e.owner.internalCreateObject(e,a):null};c.getItemURL=function(b,a){var e=fairygui.UIPackage.getByName(b);if(!e)return null;var c=e._itemsByName[a];return c?"ui://"+e.id+c.id:null};c.getItemByURL=function(b){var a=b.indexOf("//");if(-1==a)return null;var f=b.indexOf("/",a+2);if(-1==f){if(13<b.length&&(f=b.substr(5,8),a=c.getById(f),null!=a))return b=b.substr(13),a.getItemById(b)}else if(a=b.substr(a+2,f-a-2),a=c.getByName(a),null!=a)return b=b.substr(f+1),a.getItemByName(b);return null};c.getItemAssetByURL=function(b){b=c.getItemByURL(b);return null==b?null:b.owner.getItemAsset(b)};c.normalizeURL=function(b){if(null==b)return null;var a=b.indexOf("//");if(-1==a)return null;var f=b.indexOf("/",a+2);if(-1==f)return b;a=b.substr(a+2,f-a-2);b=b.substr(f+1);return c.getItemURL(a,b)};c.setStringsSource=function(b){ua.loadFromXML(b)};c._constructing=0;c._packageInstById={};c._packageInstByName={};c.__init$=function(){d=function(){function b(){this.rect=this.atlas=null;this.rotated=!1;this.rect=new D}m(b,"");return b}()};return c}(),ua=function(){function c(){}m(c,"fairygui.TranslationHelper");c.loadFromXML=function(d){c.strings={};d=X.parseXMLFromString(d);d=c.findChildNode(d,"resources").childNodes;for(var a=d.length,b=0;b<a;b++){var e=d[b];if("string"==e.nodeName){var f=e.getAttribute("name"),e=e.textContent,n=f.indexOf("-");if(-1!=n){var r=f.substr(0,n),f=f.substr(n+1),n=c.strings[r];n||(n={},c.strings[r]=n);n[f]=e}}}};c.translateComponent=function(d){if(null!=c.strings){var a=c.strings[d.owner.id+d.id];if(null!=a){var b,e=d.rawData,f,n,r,g,l,h,k,m;e.seek(0,2);var v=e.getInt16();for(r=0;r<v;r++){l=e.getInt16();h=e.pos;e.seek(h,0);var q=e.readByte();e.skip(4);d=e.readS();9==q&&e.seek(h,6)&&(q=e.readByte());e.seek(h,1);null!=(b=a[d+"-tips"])&&e.writeS(b);e.seek(h,2);var O=e.getInt16();for(g=0;g<O;g++){f=e.getInt16();f+=e.pos;if(6==e.readByte()){e.skip(2);k=e.getInt16();for(n=0;n<k;n++)m=e.readS(),null!=m&&(null!=(b=a[d+"-texts_"+n])?e.writeS(b):e.skip(2));e.readBool()&&null!=(b=a[d+"-texts_def"])&&e.writeS(b)}e.pos=f}switch(q){case 6:case 7:case 8:null!=(b=a[d])&&(e.seek(h,6),e.writeS(b));null!=(b=a[d+"-prompt"])&&(e.seek(h,4),e.writeS(b));break;case 10:e.seek(h,8);e.skip(2);n=e.getInt16();for(g=0;g<n;g++)f=e.getInt16(),f+=e.pos,e.skip(2),null!=(b=a[d+"-"+g])?e.writeS(b):e.skip(2),null!=(b=a[d+"-"+g+"-0"])&&e.writeS(b),e.pos=f;break;case 11:e.seek(h,6)&&e.readByte()==q&&(null!=(b=a[d])?e.writeS(b):e.skip(2),e.skip(2),e.readBool()&&e.skip(4),e.skip(4),e.readBool()&&null!=(b=a[d+"-prompt"])&&e.writeS(b));break;case 12:e.seek(h,6)&&e.readByte()==q&&(null!=(b=a[d])?e.writeS(b):e.skip(2),null!=(b=a[d+"-0"])&&e.writeS(b));break;case 13:if(e.seek(h,6)&&e.readByte()==q){n=e.getInt16();for(g=0;g<n;g++)f=e.getInt16(),f+=e.pos,null!=(b=a[d+"-"+g])&&e.writeS(b),e.pos=f;null!=(b=a[d])&&e.writeS(b)}}e.pos=h+l}}}};c.findChildNode=function(c,a){var b=c.childNodes,e=b.length;if(0<e)for(var f=0;f<e;f++){var d=b[f];if(d.nodeName==a)return d}return null};c.strings=null;return c}();(function(){function c(){}m(c,"fairygui.PopupDirection");c.Auto=0;c.Up=1;c.Down=2;return c})();var M=function(){function c(){}m(c,"fairygui.UIObjectFactory");c.setPackageItemExtension=function(d,a){if(null==d)throw Error("Invaild url: "+d);var b=z.getItemByURL(d);null!=b&&(b.extensionType=a);c.packageItemExtensions[d]=a};c.setLoaderExtension=function(c){fairygui.UIObjectFactory.loaderType=c};c.resolvePackageItemExtension=function(d){d.extensionType=c.packageItemExtensions["ui://"+d.owner.id+d.id];d.extensionType||(d.extensionType=c.packageItemExtensions["ui://"+d.owner.name+"/"+d.name])};c.newObject=function(d){return null!=d.extensionType?new d.extensionType:c.newObject2(d.objectType)};c.newObject2=function(c){switch(c){case 0:return new Va;case 1:return new Wa;case 9:return new L;case 6:return new va;case 7:return new Xa;case 8:return new Ya;case 5:return new Za;case 10:return new wa;case 3:return new xa;case 4:return null!=fairygui.UIObjectFactory.loaderType?new fairygui.UIObjectFactory.loaderType:new qa;case 12:return new $a;case 11:return new ab;case 14:return new bb;case 15:return new cb;case 16:return new db;case 13:return new eb;default:return null}};c.packageItemExtensions={};c.loaderType=null;return c}(),fb=function(){function c(){}m(c,"fairygui.display.FillUtils");c.fill=function(c,a,b,e,f,n){if(0>=n)return null;if(.9999<=n)return[0,0,c,0,c,a,0,a];var d;switch(b){case 1:d=fairygui.display.FillUtils.fillHorizontal(c,a,e,n);break;case 2:d=fairygui.display.FillUtils.fillVertical(c,a,e,n);break;case 3:d=fairygui.display.FillUtils.fillRadial90(c,a,e,f,n);break;case 4:d=fairygui.display.FillUtils.fillRadial180(c,a,e,f,n);break;case 5:d=fairygui.display.FillUtils.fillRadial360(c,a,e,f,n)}return d};c.fillHorizontal=function(c,a,b,e){e*=c;return 2==b||0==b?[0,0,e,0,e,a,0,a]:[c,0,c,a,c-e,a,c-e,0]};c.fillVertical=function(c,a,b,e){e*=a;return 2==b||0==b?[0,0,0,e,c,e,c,0]:[0,a,c,a,c,a-e,0,a-e]};c.fillRadial90=function(c,a,b,e,f){if(e&&(1==b||2==b)||!e&&(0==b||3==b))f=1-f;var d;d=c*Math.tan(Math.PI/2*f);f=(d-a)/d;var r;switch(b){case 0:r=e?d<=a?[0,0,c,d,c,0]:[0,0,c*(1-f),a,c,a,c,0]:d<=a?[0,0,c,d,c,a,0,a]:[0,0,c*(1-f),a,0,a];break;case 1:r=e?d<=a?[c,0,0,d,0,a,c,a]:[c,0,c*f,a,c,a]:d<=a?[c,0,0,d,0,0]:[c,0,c*f,a,0,a,0,0];break;case 2:r=e?d<=a?[0,a,c,a-d,c,0,0,0]:[0,a,c*(1-f),0,0,0]:d<=a?[0,a,c,a-d,c,a]:[0,a,c*(1-f),0,c,0,c,a];break;case 3:r=e?d<=a?[c,a,0,a-d,0,a]:[c,a,c*f,0,0,0,0,a]:d<=a?[c,a,0,a-d,0,0,c,0]:[c,a,c*f,0,c,0]}return r};c.movePoints=function(c,a,b){for(var e=c.length,f=0;f<e;f+=2)c[f]+=a,c[f+1]+=b};c.fillRadial180=function(d,a,b,e,f){var n;switch(b){case 0:.5>=f?(n=c.fillRadial90(d/2,a,e?0:1,e,f/.5),e&&c.movePoints(n,d/2,0)):(n=c.fillRadial90(d/2,a,e?1:0,e,(f-.5)/.5),e?n.push(d,a,d,0):(c.movePoints(n,d/2,0),n.push(0,a,0,0)));break;case 1:.5>=f?(n=c.fillRadial90(d/2,a,e?3:2,e,f/.5),e||c.movePoints(n,d/2,0)):(n=c.fillRadial90(d/2,a,e?2:3,e,(f-.5)/.5),e?(c.movePoints(n,d/2,0),n.push(0,0,0,a)):n.push(d,0,d,a));break;case 2:.5>=f?(n=c.fillRadial90(d,a/2,e?2:0,e,f/.5),e||c.movePoints(n,0,a/2)):(n=c.fillRadial90(d,a/2,e?0:2,e,(f-.5)/.5),e?(c.movePoints(n,0,a/2),n.push(d,0,0,0)):n.push(d,a,0,a));break;case 3:.5>=f?(n=c.fillRadial90(d,a/2,e?1:3,e,f/.5),e&&c.movePoints(n,0,a/2)):(n=c.fillRadial90(d,a/2,e?3:1,e,(f-.5)/.5),e?n.push(0,a,d,a):(c.movePoints(n,0,a/2),n.push(0,0,d,0)))}return n};c.fillRadial360=function(d,a,b,e,f){var n;switch(b){case 0:.5>=f?(n=c.fillRadial180(d/2,a,e?2:3,e,f/.5),e&&c.movePoints(n,d/2,0)):(n=c.fillRadial180(d/2,a,e?3:2,e,(f-.5)/.5),e?n.push(d,a,d,0,d/2,0):(c.movePoints(n,d/2,0),n.push(0,a,0,0,d/2,0)));break;case 1:.5>=f?(n=c.fillRadial180(d/2,a,e?3:2,e,f/.5),e||c.movePoints(n,d/2,0)):(n=c.fillRadial180(d/2,a,e?2:3,e,(f-.5)/.5),e?(c.movePoints(n,d/2,0),n.push(0,0,0,a,d/2,a)):n.push(d,0,d,a,d/2,a));break;case 2:.5>=f?(n=c.fillRadial180(d,a/2,e?1:0,e,f/.5),e||c.movePoints(n,0,a/2)):(n=c.fillRadial180(d,a/2,e?0:1,e,(f-.5)/.5),e?(c.movePoints(n,0,a/2),n.push(d,0,0,0,0,a/2)):n.push(d,a,0,a,0,a/2));break;case 3:.5>=f?(n=c.fillRadial180(d,a/2,e?0:1,e,f/.5),e&&c.movePoints(n,0,a/2)):(n=c.fillRadial180(d,a/2,e?1:0,e,(f-.5)/.5),e?n.push(0,a,d,a,d,a/2):(c.movePoints(n,0,a/2),n.push(0,0,d,0,d,a/2)))}return n};return c}(),Y=function(){function c(){this.w=this.z=this.y=this.x=NaN;this.x=this.y=this.z=this.w=0}m(c,"fairygui.tween.TweenValue");var d=c.prototype;d.getField=function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("Index out of bounds: "+a);}};d.setField=function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("Index out of bounds: "+a);}};d.setZero=function(){this.x=this.y=this.z=this.w=0};g(0,d,"color",function(){return(this.w<<24)+(this.x<<16)+(this.y<<8)+this.z},function(a){this.x=(a&16711680)>>16;this.y=(a&65280)>>8;this.z=a&255;this.w=(a&4278190080)>>24});return c}();(function(){function c(){}m(c,"fairygui.AutoSizeType");c.None=0;c.Both=1;c.Height=2;c.Shrink=3;return c})();(function(){function c(){}m(c,"fairygui.tween.EaseType");c.Linear=0;c.SineIn=1;c.SineOut=2;c.SineInOut=3;c.QuadIn=4;c.QuadOut=5;c.QuadInOut=6;c.CubicIn=7;c.CubicOut=8;c.CubicInOut=9;c.QuartIn=10;c.QuartOut=11;c.QuartInOut=12;c.QuintIn=13;c.QuintOut=14;c.QuintInOut=15;c.ExpoIn=16;c.ExpoOut=17;c.ExpoInOut=18;c.CircIn=19;c.CircOut=20;c.CircInOut=21;c.ElasticIn=22;c.ElasticOut=23;c.ElasticInOut=24;c.BackIn=25;c.BackOut=26;c.BackInOut=27;c.BounceIn=28;c.BounceOut=29;c.BounceInOut=30;c.Custom=31;return c})();var K=function(){function c(){}m(c,"fairygui.tween.TweenManager");c.createTween=function(){c._inited||(k.timer.frameLoop(1,null,c.update),c._inited=!0);var d;d=0<c._tweenerPool.length?c._tweenerPool.pop():new Ka;d._init();c._activeTweens[c._totalActiveTweens++]=d;c._totalActiveTweens==c._activeTweens.length&&(c._activeTweens.length+=Math.ceil(.5*c._activeTweens.length));return d};c.isTweening=function(d,a){if(null==d)return!1;for(var b=null==a,e=0;e<c._totalActiveTweens;e++){var f=c._activeTweens[e];if(null!=f&&f.target==d&&!f._killed&&(b||f._propType==a))return!0}return!1};c.killTweens=function(d,a,b){if(null==d)return!1;for(var e=!1,f=c._totalActiveTweens,n=null==b,r=0;r<f;r++){var g=c._activeTweens[r];null==g||g.target!=d||g._killed||!n&&g._propType!=b||(g.kill(a),e=!0)}return e};c.getTween=function(d,a){if(null==d)return null;for(var b=c._totalActiveTweens,e=null==a,f=0;f<b;f++){var n=c._activeTweens[f];if(null!=n&&n.target==d&&!n._killed&&(e||n._propType==a))return n}return null};c.update=function(){for(var d=k.timer.delta/1E3,a=c._totalActiveTweens,b=-1,e=0,f=0;f<a;f++){var n=c._activeTweens[f];null==n?(-1==b&&(b=f),e++):n._killed?(n._reset(),c._tweenerPool.push(n),c._activeTweens[f]=null,-1==b&&(b=f),e++):(n._target instanceof fairygui.GObject&&n._target.isDisposed?n._killed=!0:n._paused||n._update(d),-1!=b&&(c._activeTweens[b]=n,c._activeTweens[f]=null,b++))}if(0<=b){if(c._totalActiveTweens!=a)for(d=a,a=c._totalActiveTweens-a,f=0;f<a;f++)c._activeTweens[b++]=c._activeTweens[d++];c._totalActiveTweens=b}};c._tweenerPool=[];c._totalActiveTweens=0;c._inited=!1;F(c,["_activeTweens",function(){return this._activeTweens=Array(30)}]);return c}(),Z=function(){function c(b){this._target=null;this._targetHeight=this._targetWidth=this._targetY=this._targetX=NaN;this._owner=b;this._defs=[]}var d;m(c,"fairygui.RelationItem");var a=c.prototype;a.add=function(b,a){if(24==b)this.add(14,a),this.add(15,a);else{for(var e=this._defs.length,c=0;c<e;c++)if(this._defs[c].type==b)return;this.internalAdd(b,a)}};a.internalAdd=function(b,a){if(24==b)this.internalAdd(14,a),this.internalAdd(15,a);else{var e=new d;e.percent=a;e.type=b;e.axis=6>=b||14==b||16<=b&&19>=b?0:1;this._defs.push(e);if(a||1==b||3==b||5==b||8==b||10==b||12==b)this._owner.pixelSnapping=!0}};a.remove=function(b){if(24==b)this.remove(14),this.remove(15);else for(var a=this._defs.length,f=0;f<a;f++)if(this._defs[f].type==b){this._defs.splice(f,1);break}};a.copyFrom=function(b){this.target=b.target;this._defs.length=0;for(var a=b._defs.length,f=0;f<a;f++){var c=b._defs[f],r=new d;r.copyFrom(c);this._defs.push(r)}};a.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)};a.applyOnSelfResized=function(b,a,f){var e=this._defs.length;if(0!=e){for(var c=this._owner.x,d=this._owner.y,g=0;g<e;g++)switch(this._defs[g].type){case 3:this._owner.x-=(.5-(f?this._owner.pivotX:0))*b;break;case 5:case 4:case 6:this._owner.x-=(1-(f?this._owner.pivotX:0))*b;break;case 10:this._owner.y-=(.5-(f?this._owner.pivotY:0))*a;break;case 12:case 11:case 13:this._owner.y-=(1-(f?this._owner.pivotY:0))*a}if(c!=this._owner.x||d!=this._owner.y)if(c=this._owner.x-c,d=this._owner.y-d,this._owner.updateGearFromRelations(1,c,d),null!=this._owner.parent&&0<this._owner.parent._transitions.length)for(e=this._owner.parent._transitions.length,b=0;b<e;b++)this._owner.parent._transitions[b].updateFromRelations(this._owner.id,c,d)}};a.applyOnXYChanged=function(b,a,f){switch(b.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this._owner.x+=a;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this._owner.y+=f;break;case 16:case 17:b=this._owner.xMin;this._owner.width=this._owner._rawWidth-a;this._owner.xMin=b+a;break;case 18:case 19:b=this._owner.xMin;this._owner.width=this._owner._rawWidth+a;this._owner.xMin=b;break;case 20:case 21:b=this._owner.yMin;this._owner.height=this._owner._rawHeight-f;this._owner.yMin=b+f;break;case 22:case 23:b=this._owner.yMin,this._owner.height=this._owner._rawHeight+f,this._owner.yMin=b}};a.applyOnSizeChanged=function(b){var a=0,f=0,c=0,d;0==b.axis?(this._target!=this._owner.parent&&(a=this._target.x,this._target.pivotAsAnchor&&(f=this._target.pivotX)),b.percent?0!=this._targetWidth&&(c=this._target._width/this._targetWidth):c=this._target._width-this._targetWidth):(this._target!=this._owner.parent&&(a=this._target.y,this._target.pivotAsAnchor&&(f=this._target.pivotY)),b.percent?0!=this._targetHeight&&(c=this._target._height/this._targetHeight):c=this._target._height-this._targetHeight);switch(b.type){case 0:b.percent?this._owner.xMin=a+(this._owner.xMin-a)*c:0!=f&&(this._owner.x+=c*-f);break;case 1:b.percent?this._owner.xMin=a+(this._owner.xMin-a)*c:this._owner.x+=c*(.5-f);break;case 2:b.percent?this._owner.xMin=a+(this._owner.xMin-a)*c:this._owner.x+=c*(1-f);break;case 3:b.percent?this._owner.xMin=a+(this._owner.xMin+.5*this._owner._rawWidth-a)*c-.5*this._owner._rawWidth:this._owner.x+=c*(.5-f);break;case 4:b.percent?this._owner.xMin=a+(this._owner.xMin+this._owner._rawWidth-a)*c-this._owner._rawWidth:0!=f&&(this._owner.x+=c*-f);break;case 5:b.percent?this._owner.xMin=a+(this._owner.xMin+this._owner._rawWidth-a)*c-this._owner._rawWidth:this._owner.x+=c*(.5-f);break;case 6:b.percent?this._owner.xMin=a+(this._owner.xMin+this._owner._rawWidth-a)*c-this._owner._rawWidth:this._owner.x+=c*(1-f);break;case 7:b.percent?this._owner.yMin=a+(this._owner.yMin-a)*c:0!=f&&(this._owner.y+=c*-f);break;case 8:b.percent?this._owner.yMin=a+(this._owner.yMin-a)*c:this._owner.y+=c*(.5-f);break;case 9:b.percent?this._owner.yMin=a+(this._owner.yMin-a)*c:this._owner.y+=c*(1-f);break;case 10:b.percent?this._owner.yMin=a+(this._owner.yMin+.5*this._owner._rawHeight-a)*c-.5*this._owner._rawHeight:this._owner.y+=c*(.5-f);break;case 11:b.percent?this._owner.yMin=a+(this._owner.yMin+this._owner._rawHeight-a)*c-this._owner._rawHeight:0!=f&&(this._owner.y+=c*-f);break;case 12:b.percent?this._owner.yMin=a+(this._owner.yMin+this._owner._rawHeight-a)*c-this._owner._rawHeight:this._owner.y+=c*(.5-f);break;case 13:b.percent?this._owner.yMin=a+(this._owner.yMin+this._owner._rawHeight-a)*c-this._owner._rawHeight:this._owner.y+=c*(1-f);break;case 14:a=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth;b.percent&&(a*=c);this._target==this._owner.parent?this._owner.pivotAsAnchor?(d=this._owner.xMin,this._owner.setSize(this._target._width+a,this._owner._rawHeight,!0),this._owner.xMin=d):this._owner.setSize(this._target._width+a,this._owner._rawHeight,!0):this._owner.width=this._target._width+a;break;case 15:a=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight;b.percent&&(a*=c);this._target==this._owner.parent?this._owner.pivotAsAnchor?(d=this._owner.yMin,this._owner.setSize(this._owner._rawWidth,this._target._height+a,!0),this._owner.yMin=d):this._owner.setSize(this._owner._rawWidth,this._target._height+a,!0):this._owner.height=this._target._height+a;break;case 16:d=this._owner.xMin;a=b.percent?a+(d-a)*c-d:c*-f;this._owner.width=this._owner._rawWidth-a;this._owner.xMin=d+a;break;case 17:d=this._owner.xMin;a=b.percent?a+(d-a)*c-d:c*(1-f);this._owner.width=this._owner._rawWidth-a;this._owner.xMin=d+a;break;case 18:d=this._owner.xMin;a=b.percent?a+(d+this._owner._rawWidth-a)*c-(d+this._owner._rawWidth):c*-f;this._owner.width=this._owner._rawWidth+a;this._owner.xMin=d;break;case 19:d=this._owner.xMin;b.percent?this._owner==this._target.parent?this._owner.width=this._owner._underConstruct?a+this._target._width-this._target._width*f+(this._owner.sourceWidth-a-this._target.initWidth+this._target.initWidth*f)*c:a+(this._owner._rawWidth-a)*c:(a=a+(d+this._owner._rawWidth-a)*c-(d+this._owner._rawWidth),this._owner.width=this._owner._rawWidth+a,this._owner.xMin=d):this._owner==this._target.parent?this._owner.width=this._owner._underConstruct?this._owner.sourceWidth+(this._target._width-this._target.initWidth)*(1-f):this._owner._rawWidth+c*(1-f):(this._owner.width=this._owner._rawWidth+c*(1-f),this._owner.xMin=d);break;case 20:d=this._owner.yMin;a=b.percent?a+(d-a)*c-d:c*-f;this._owner.height=this._owner._rawHeight-a;this._owner.yMin=d+a;break;case 21:d=this._owner.yMin;a=b.percent?a+(d-a)*c-d:c*(1-f);this._owner.height=this._owner._rawHeight-a;this._owner.yMin=d+a;break;case 22:d=this._owner.yMin;a=b.percent?a+(d+this._owner._rawHeight-a)*c-(d+this._owner._rawHeight):c*-f;this._owner.height=this._owner._rawHeight+a;this._owner.yMin=d;break;case 23:d=this._owner.yMin,b.percent?this._owner==this._target.parent?this._owner.height=this._owner._underConstruct?a+this._target._height-this._target._height*f+(this._owner.sourceHeight-a-this._target.initHeight+this._target.initHeight*f)*c:a+(this._owner._rawHeight-a)*c:(a=a+(d+this._owner._rawHeight-a)*c-(d+this._owner._rawHeight),this._owner.height=this._owner._rawHeight+a,this._owner.yMin=d):this._owner==this._target.parent?this._owner.height=this._owner._underConstruct?this._owner.sourceHeight+(this._target._height-this._target.initHeight)*(1-f):this._owner._rawHeight+c*(1-f):(this._owner.height=this._owner._rawHeight+c*(1-f),this._owner.yMin=d)}};a.addRefTarget=function(b){if(b!=this._owner.parent)b.on("fui_xy_changed",this,this.__targetXYChanged);b.on("fui_size_changed",this,this.__targetSizeChanged);b.on("fui_size_delay_change",this,this.__targetSizeWillChange);this._targetX=this._target.x;this._targetY=this._target.y;this._targetWidth=this._target._width;this._targetHeight=this._target._height};a.releaseRefTarget=function(b){null!=b.displayObject&&(b.off("fui_xy_changed",this,this.__targetXYChanged),b.off("fui_size_changed",this,this.__targetSizeChanged),b.off("fui_size_delay_change",this,this.__targetSizeWillChange))};a.__targetXYChanged=function(b){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)this._targetX=this._target.x,this._targetY=this._target.y;else{this._owner.relations.handling=b;b=this._owner.x;for(var a=this._owner.y,f=this._target.x-this._targetX,c=this._target.y-this._targetY,d=this._defs.length,g=0;g<d;g++)this.applyOnXYChanged(this._defs[g],f,c);this._targetX=this._target.x;this._targetY=this._target.y;if(b!=this._owner.x||a!=this._owner.y)if(b=this._owner.x-b,a=this._owner.y-a,this._owner.updateGearFromRelations(1,b,a),null!=this._owner.parent&&0<this._owner.parent._transitions.length)for(d=this._owner.parent._transitions.length,f=0;f<d;f++)this._owner.parent._transitions[f].updateFromRelations(this._owner.id,b,a);this._owner.relations.handling=null}};a.__targetSizeChanged=function(b){if(null!=this._owner.relations.handling)this._targetWidth=this._target._width,this._targetHeight=this._target._height;else{this._owner.relations.handling=b;b=this._owner.x;for(var a=this._owner.y,f=this._owner._rawWidth,c=this._owner._rawHeight,d=this._defs.length,g=0;g<d;g++)this.applyOnSizeChanged(this._defs[g]);this._targetWidth=this._target._width;this._targetHeight=this._target._height;if(b!=this._owner.x||a!=this._owner.y)if(b=this._owner.x-b,a=this._owner.y-a,this._owner.updateGearFromRelations(1,b,a),null!=this._owner.parent&&0<this._owner.parent._transitions.length)for(d=this._owner.parent._transitions.length,g=0;g<d;g++)this._owner.parent._transitions[g].updateFromRelations(this._owner.id,b,a);if(f!=this._owner._rawWidth||c!=this._owner._rawHeight)f=this._owner._rawWidth-f,c=this._owner._rawHeight-c,this._owner.updateGearFromRelations(2,f,c);this._owner.relations.handling=null}};a.__targetSizeWillChange=function(b){this._owner.relations.sizeDirty=!0};g(0,a,"owner",function(){return this._owner});g(0,a,"target",function(){return this._target},function(b){this._target!=b&&(this._target&&this.releaseRefTarget(this._target),(this._target=b)&&this.addRefTarget(this._target))});g(0,a,"isEmpty",function(){return 0==this._defs.length});c.__init$=function(){d=function(){function b(){this.percent=!1;this.axis=this.type=0}m(b,"");b.prototype.copyFrom=function(b){this.percent=b.percent;this.type=b.type;this.axis=b.axis};return b}()};return c}(),Oa=function(){function c(a){this._children=this._parent=this._data=null;this._expanded=!1;this._cell=this._tree=null;this._level=0;a&&(this._children=[])}m(c,"fairygui.tree.TreeNode");var d=c.prototype;d.setCell=function(a){this._cell=a};d.setLevel=function(a){this._level=a};d.addChild=function(a){this.addChildAt(a,this._children.length);return a};d.addChildAt=function(a,b){if(!a)throw Error("child is null");var e=this._children.length;if(0<=b&&b<=e)return a._parent==this?this.setChildIndex(a,b):(a._parent&&a._parent.removeChild(a),b==this._children.length?this._children.push(a):this._children.splice(b,0,a),a._parent=this,a._level=this._level+1,a.setTree(this._tree),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterInserted(a)),a;throw Error("Invalid child index");};d.removeChild=function(a){var b=this._children.indexOf(a);-1!=b&&this.removeChildAt(b);return a};d.removeChildAt=function(a){if(0<=a&&a<this.numChildren){var b=this._children[a];this._children.splice(a,1);b._parent=null;null!=this._tree&&(b.setTree(null),this._tree.afterRemoved(b));return b}throw Error("Invalid child index");};d.removeChildren=function(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);if(0>b||b>=this.numChildren)b=this.numChildren-1;for(var e=a;e<=b;++e)this.removeChildAt(a)};d.getChildAt=function(a){if(0<=a&&a<this.numChildren)return this._children[a];throw Error("Invalid child index");};d.getChildIndex=function(a){return this._children.indexOf(a)};d.getPrevSibling=function(){if(null==this._parent)return null;var a=this._parent._children.indexOf(this);return 0>=a?null:this._parent._children[a-1]};d.getNextSibling=function(){if(null==this._parent)return null;var a=this._parent._children.indexOf(this);return 0>a||a>=this._parent._children.length-1?null:this._parent._children[a+1]};d.setChildIndex=function(a,b){var e=this._children.indexOf(a);if(-1==e)throw Error("Not a child of this container");var f=this._children.length;0>b?b=0:b>f&&(b=f);e!=b&&(this._children.splice(e,1),this._children.splice(b,0,a),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterMoved(a))};d.swapChildren=function(a,b){var e=this._children.indexOf(a),f=this._children.indexOf(b);if(-1==e||-1==f)throw Error("Not a child of this container");this.swapChildrenAt(e,f)};d.swapChildrenAt=function(a,b){var e=this._children[b];this.setChildIndex(this._children[a],b);this.setChildIndex(e,a)};d.setTree=function(a){this._tree=a;null!=this._tree&&this._tree.treeNodeWillExpand&&this._expanded&&this._tree.treeNodeWillExpand.runWith(this);if(null!=this._children)for(var b=this._children.length,e=0;e<b;e++){var f=this._children[e];f._level=this._level+1;f.setTree(a)}};g(0,d,"expanded",function(){return this._expanded},function(a){null!=this._children&&this._expanded!=a&&(this._expanded=a,null!=this._tree&&(this._expanded?this._tree.afterExpanded(this):this._tree.afterCollapsed(this)))});g(0,d,"tree",function(){return this._tree});g(0,d,"level",function(){return this._level});g(0,d,"cell",function(){return this._cell});g(0,d,"data",function(){return this._data},function(a){this._data=a});g(0,d,"parent",function(){return this._parent});g(0,d,"isFolder",function(){return null!=this._children});g(0,d,"text",function(){return null!=this._cell?this._cell.text:null});g(0,d,"numChildren",function(){return this._children.length});return c}(),p=function(){function c(){}m(c,"fairygui.UIConfig",null,"UIConfig$1");c.defaultFont="SimSun";c.windowModalWaiting=null;c.globalModalWaiting=null;c.modalLayerColor="rgba(33,33,33,0.2)";c.buttonSound=null;c.buttonSoundVolumeScale=1;c.horizontalScrollBar=null;c.verticalScrollBar=null;c.defaultScrollStep=25;c.defaultScrollDecelerationRate=.967;c.defaultScrollBarDisplay=1;c.defaultScrollTouchEffect=!0;c.defaultScrollBounceEffect=!0;c.defaultScrollSnappingThreshold=.1;c.defaultScrollPagingThreshold=.3;c.popupMenu=null;c.popupMenu_seperator=null;c.loaderErrorSign=null;c.tooltipsWin=null;c.defaultComboBoxVisibleItemCount=10;c.touchScrollSensitivity=20;c.touchDragSensitivity=10;c.clickDragSensitivity=2;c.bringWindowToFrontOnClick=!0;c.frameTimeForAsyncUIConstruction=2;c.textureLinearSampling=!0;c.packageFileExtension="fui";return c}();(function(){function c(){}m(c,"fairygui.ListSelectionMode");c.Single=0;c.Multiple=1;c.Multiple_SingleClick=2;c.None=3;return c})();(function(){function c(a){this._list=this._contentPane=null;if(!a&&(a=p.popupMenu,!a))throw"UIConfig.popupMenu not defined";this._contentPane=z.createObjectFromURL(a).asCom;this._contentPane.on("display",this,this.__addedToStage);this._list=this._contentPane.getChild("list");this._list.removeChildrenToPool();this._list.addRelation(this._contentPane,14);this._list.removeRelation(this._contentPane,15);this._contentPane.addRelation(this._list,15);this._list.on("fui_click_item",this,this.__clickItem)}m(c,"fairygui.PopupMenu");var d=c.prototype;d.dispose=function(){this._contentPane.dispose()};d.addItem=function(a,b){var e=this._list.addItemFromPool().asButton;e.title=a;e.data=b;e.grayed=!1;var f=e.getController("checked");null!=f&&(f.selectedIndex=0);return e};d.addItemAt=function(a,b,e){var f=this._list.getFromPool().asButton;this._list.addChildAt(f,b);f.title=a;f.data=e;f.grayed=!1;a=f.getController("checked");null!=a&&(a.selectedIndex=0);return f};d.addSeperator=function(){if(null==p.popupMenu_seperator)throw"UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(p.popupMenu_seperator)};d.getItemName=function(a){return this._list.getChildAt(a).name};d.setItemText=function(a,b){this._list.getChild(a).asButton.title=b};d.setItemVisible=function(a,b){var e=this._list.getChild(a).asButton;e.visible!=b&&(e.visible=b,this._list.setBoundsChangedFlag())};d.setItemGrayed=function(a,b){this._list.getChild(a).asButton.grayed=b};d.setItemCheckable=function(a,b){var e=this._list.getChild(a).asButton.getController("checked");null!=e&&(b?0==e.selectedIndex&&(e.selectedIndex=1):e.selectedIndex=0)};d.setItemChecked=function(a,b){var e=this._list.getChild(a).asButton.getController("checked");null!=e&&(e.selectedIndex=b?2:1)};d.isItemChecked=function(a){a=this._list.getChild(a).asButton.getController("checked");return null!=a?2==a.selectedIndex:!1};d.removeItem=function(a){a=this._list.getChild(a);return null!=a?(a=this._list.getChildIndex(a),this._list.removeChildToPoolAt(a),!0):!1};d.clearItems=function(){this._list.removeChildrenToPool()};d.show=function(a,b){(null!=a?a.root:C.inst).showPopup(this.contentPane,a instanceof fairygui.GRoot?null:a,b)};d.__clickItem=function(a){k.timer.once(100,this,this.__clickItem2,[a])};d.__clickItem2=function(a){if(a instanceof fairygui.GButton)if(a.grayed)this._list.selectedIndex=-1;else{var b=a.asCom.getController("checked");null!=b&&0!=b.selectedIndex&&(b.selectedIndex=1==b.selectedIndex?2:1);this._contentPane.parent.hidePopup(this.contentPane);null!=a.data&&a.data.run()}};d.__addedToStage=function(){this._list.selectedIndex=-1;this._list.resizeToFit(1E5,10)};g(0,d,"itemCount",function(){return this._list.numChildren});g(0,d,"contentPane",function(){return this._contentPane});g(0,d,"list",function(){return this._list});return c})();(function(){function c(){}m(c,"fairygui.ProgressTitleType");c.Percent=0;c.ValueAndMax=1;c.Value=2;c.Max=3;return c})();var na=function(c){function d(){d.__super.call(this);this.reset()}m(d,"fairygui.utils.ColorMatrix",Array);c=d.prototype;c.reset=function(){for(var a=0;a<d.LENGTH;a++)this[a]=d.IDENTITY_MATRIX[a]};c.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])};c.adjustColor=function(a,b,e,f){this.adjustHue(f);this.adjustContrast(b);this.adjustBrightness(a);this.adjustSaturation(e)};c.adjustBrightness=function(a){a=255*this.cleanValue(a,1);this.multiplyMatrix([1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0])};c.adjustContrast=function(a){a=this.cleanValue(a,1);a+=1;var b=128*(1-a);this.multiplyMatrix([a,0,0,0,b,0,a,0,0,b,0,0,a,0,b,0,0,0,1,0])};c.adjustSaturation=function(a){a=this.cleanValue(a,1);a+=1;var b=1-a,e=.299*b,f=.587*b,b=.114*b;this.multiplyMatrix([e+a,f,b,0,0,e,f+a,b,0,0,e,f,b+a,0,0,0,0,0,1,0])};c.adjustHue=function(a){a=this.cleanValue(a,1);a*=Math.PI;var b=Math.cos(a);a=Math.sin(a);this.multiplyMatrix([.299+b*(1-.299)+-.299*a,.587+-.587*b+-.587*a,.114+-.114*b+.886*a,0,0,.299+-.299*b+.143*a,.587+b*(1-.587)+.14*a,.114+-.114*b+-.283*a,0,0,.299+-.299*b+a*-(1-.299),.587+-.587*b+.587*a,.114+.886*b+.114*a,0,0,0,0,0,1,0])};c.concat=function(a){a.length==d.LENGTH&&this.multiplyMatrix(a)};c.clone=function(){var a=new d;a.copyMatrix(this);return a};c.copyMatrix=function(a){for(var b=d.LENGTH,e=0;e<b;e++)this[e]=a[e]};c.multiplyMatrix=function(a){for(var b=[],e=0,f=0;4>f;++f){for(var c=0;5>c;++c)b[e+c]=a[e]*this[c]+a[e+1]*this[c+5]+a[e+2]*this[c+10]+a[e+3]*this[c+15]+(4==c?a[e+4]:0);e+=5}this.copyMatrix(b)};c.cleanValue=function(a,b){return Math.min(b,Math.max(-b,a))};d.create=function(a,b,e,f){var c=new d;c.adjustColor(a,b,e,f);return c};d.LUMA_R=.299;d.LUMA_G=.587;d.LUMA_B=.114;F(d,["IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},"LENGTH",function(){return this.LENGTH=d.IDENTITY_MATRIX.length}]);return d}(Array),gb=function(c){function d(){this._previousIndex=this._selectedIndex=0;this.parent=this.name=this._actions=this._pageNames=this._pageIds=null;this.changing=this.autoRadioGroupDepth=!1;d.__super.call(this);this._pageIds=[];this._pageNames=[];this._previousIndex=this._selectedIndex=-1}m(d,"fairygui.Controller",c);c=d.prototype;c.dispose=function(){this.offAll()};c.setSelectedIndex=function(a){void 0===a&&(a=0);if(this._selectedIndex!=a){if(a>this._pageIds.length-1)throw"index out of bounds: "+a;this.changing=!0;this._previousIndex=this._selectedIndex;this._selectedIndex=a;this.parent.applyController(this);this.changing=!1}};c.setSelectedPage=function(a){a=this._pageNames.indexOf(a);-1==a&&(a=0);this.setSelectedIndex(a)};c.getPageName=function(a){void 0===a&&(a=0);return this._pageNames[a]};c.addPage=function(a){void 0===a&&(a="");this.addPageAt(a,this._pageIds.length)};c.addPageAt=function(a,b){void 0===b&&(b=0);var e=""+fairygui.Controller._nextPageId++;b==this._pageIds.length?(this._pageIds.push(e),this._pageNames.push(a)):(this._pageIds.splice(b,0,e),this._pageNames.splice(b,0,a))};c.removePage=function(a){a=this._pageNames.indexOf(a);-1!=a&&(this._pageIds.splice(a,1),this._pageNames.splice(a,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this))};c.removePageAt=function(a){void 0===a&&(a=0);this._pageIds.splice(a,1);this._pageNames.splice(a,1);this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this.parent.applyController(this)};c.clearPages=function(){this._pageIds.length=0;this._pageNames.length=0;-1!=this._selectedIndex?this.selectedIndex=-1:this.parent.applyController(this)};c.hasPage=function(a){return-1!=this._pageNames.indexOf(a)};c.getPageIndexById=function(a){return this._pageIds.indexOf(a)};c.getPageIdByName=function(a){a=this._pageNames.indexOf(a);return-1!=a?this._pageIds[a]:null};c.getPageNameById=function(a){a=this._pageIds.indexOf(a);return-1!=a?this._pageNames[a]:null};c.getPageId=function(a){void 0===a&&(a=0);return this._pageIds[a]};c.runActions=function(){if(this._actions)for(var a=this._actions.length,b=0;b<a;b++)this._actions[b].run(this,this.previousPageId,this.selectedPageId)};c.setup=function(a){var b=a.pos;a.seek(b,0);this.name=a.readS();this.autoRadioGroupDepth=a.readBool();a.seek(b,1);var e,f=a.getInt16();for(e=0;e<f;e++)this._pageIds.push(a.readS()),this._pageNames.push(a.readS());a.seek(b,2);f=a.getInt16();if(0<f)for(null==this._actions&&(this._actions=[]),e=0;e<f;e++){var b=a.getInt16(),b=b+a.pos,c=ca.createAction(a.readByte());c.setup(a);this._actions.push(c);a.pos=b}this._selectedIndex=null!=this.parent&&0<this._pageIds.length?0:-1};g(0,c,"selectedIndex",function(){return this._selectedIndex},function(a){if(this._selectedIndex!=a){if(a>this._pageIds.length-1)throw"index out of bounds: "+a;this.changing=!0;this._previousIndex=this._selectedIndex;this._selectedIndex=a;this.parent.applyController(this);this.event("fui_state_changed");this.changing=!1}});g(0,c,"selectedPage",function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},function(a){a=this._pageNames.indexOf(a);-1==a&&(a=0);this.selectedIndex=a});g(0,c,"previsousIndex",function(){return this._previousIndex});g(0,c,"previousPage",function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]});g(0,c,"pageCount",function(){return this._pageIds.length});g(0,c,"selectedPageId",function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},function(a){this.selectedIndex=this._pageIds.indexOf(a)});g(0,c,"previousPageId",function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]});g(0,c,"oppositePageId",null,function(a){0<this._pageIds.indexOf(a)?this.selectedIndex=0:1<this._pageIds.length&&(this.selectedIndex=1)});d._nextPageId=0;return d}(P),hb=function(c){function d(a,b,e){this._data=null;this.offsetY=this.offsetX=0;this.scaleY=this.scaleX=NaN;d.__super.call(this);void 0===b&&(b=0);void 0===e&&(e=0);this._data=a;this.offsetX=b;this.offsetY=e;this.scaleY=this.scaleX=1}m(d,"fairygui.utils.PixelHitTest",c);d.prototype.contains=function(a,b){a=Math.floor((a/this.scaleX-this.offsetX)*this._data.scale);b=Math.floor((b/this.scaleY-this.offsetY)*this._data.scale);if(0>a||0>b||a>=this._data.pixelWidth)return!1;var e=b*this._data.pixelWidth+a,f=Math.floor(e/8);return 0<=f&&f<this._data.pixels.length?1==(this._data.pixels[f]>>e%8&1):!1};return d}(Q),ib=function(c){function d(a,b){this._child=null;this._reversed=!1;d.__super.call(this);this._child=a;(this._reversed=b)?this.unHit=a.hitArea.hit:this.hit=a.hitArea.hit}m(d,"fairygui.utils.ChildHitArea",c);d.prototype.contains=function(a,b){var e;e=y.TEMP;e.setTo(0,0);e=this._child.toParentPoint(e);return this._reversed?!Q._isHitGraphic(a-e.x,b-e.y,this.unHit):Q._isHitGraphic(a-e.x,b-e.y,this.hit)};return d}(Q),L=function(c){function d(){this._sortingChildCount=0;this._opaque=!1;this._margin=this._mask=this._applyingController=null;this._boundsChanged=this._trackBounds=!1;this._apexIndex=this._childrenRenderOrder=0;this._buildingDisplayList=!1;this._alignOffset=this._scrollPane=this._container=this._transitions=this._controllers=this._children=null;d.__super.call(this);this._children=[];this._controllers=[];this._transitions=[];this._margin=new ja;this._alignOffset=new y;this._opaque=!1}m(d,"fairygui.GComponent",c);var a=d.prototype;a.createDisplayObject=function(){c.prototype.createDisplayObject.call(this);this._displayObject.mouseEnabled=!0;this._displayObject.mouseThrough=!0;this._container=this._displayObject};a.dispose=function(){var b,a;a=this._transitions.length;for(b=0;b<a;++b)this._transitions[b].dispose();a=this._controllers.length;for(b=0;b<a;++b)this._controllers[b].dispose();null!=this.scrollPane&&this.scrollPane.dispose();a=this._children.length;for(b=a-1;0<=b;--b)a=this._children[b],a.parent=null,a.dispose();this._boundsChanged=!1;this._mask=null;c.prototype.dispose.call(this)};a.addChild=function(b){this.addChildAt(b,this._children.length);return b};a.addChildAt=function(b,a){void 0===a&&(a=0);if(!b)throw"child is null";var e=this._children.length;if(0<=a&&a<=e)return b.parent==this?this.setChildIndex(b,a):(b.removeFromParent(),b.parent=this,e=this._children.length,0!=b.sortingOrder?(this._sortingChildCount++,a=this.getInsertPosForSortingChild(b)):0<this._sortingChildCount&&a>e-this._sortingChildCount&&(a=e-this._sortingChildCount),a==e?this._children.push(b):this._children.splice(a,0,b),this.childStateChanged(b),this.setBoundsChangedFlag()),b;throw"Invalid child index";};a.getInsertPosForSortingChild=function(b){var a=this._children.length,f;for(f=0;f<a;f++){var c=this._children[f];if(c!=b&&b.sortingOrder<c.sortingOrder)break}return f};a.removeChild=function(b,a){void 0===a&&(a=!1);var e=this._children.indexOf(b);-1!=e&&this.removeChildAt(e,a);return b};a.removeChildAt=function(b,a){void 0===a&&(a=!1);if(0<=b&&b<this.numChildren){var e=this._children[b];e.parent=null;0!=e.sortingOrder&&this._sortingChildCount--;this._children.splice(b,1);e.group=null;e.inContainer&&(this._container.removeChild(e.displayObject),2==this._childrenRenderOrder&&k.timer.callLater(this,this.buildNativeDisplayList));a&&e.dispose();this.setBoundsChangedFlag();return e}throw"Invalid child index";};a.removeChildren=function(b,a,f){void 0===b&&(b=0);void 0===a&&(a=-1);void 0===f&&(f=!1);if(0>a||a>=this.numChildren)a=this.numChildren-1;for(var e=b;e<=a;++e)this.removeChildAt(b,f)};a.getChildAt=function(b){void 0===b&&(b=0);if(0<=b&&b<this.numChildren)return this._children[b];throw"Invalid child index";};a.getChild=function(b){for(var a=this._children.length,f=0;f<a;++f)if(this._children[f].name==b)return this._children[f];return null};a.getVisibleChild=function(b){for(var a=this._children.length,f=0;f<a;++f){var c=this._children[f];if(c.internalVisible&&c.internalVisible2&&c.name==b)return c}return null};a.getChildInGroup=function(b,a){for(var e=this._children.length,c=0;c<e;++c){var d=this._children[c];if(d.group==a&&d.name==b)return d}return null};a.getChildById=function(b){for(var a=this._children.length,f=0;f<a;++f)if(this._children[f]._id==b)return this._children[f];return null};a.getChildIndex=function(b){return this._children.indexOf(b)};a.setChildIndex=function(b,a){void 0===a&&(a=0);var e=this._children.indexOf(b);if(-1==e)throw"Not a child of this container";if(0==b.sortingOrder){var c=this._children.length;0<this._sortingChildCount&&a>c-this._sortingChildCount-1&&(a=c-this._sortingChildCount-1);this._setChildIndex(b,e,a)}};a.setChildIndexBefore=function(b,a){var e=this._children.indexOf(b);if(-1==e)throw"Not a child of this container";if(0!=b.sortingOrder)return e;var c=this._children.length;0<this._sortingChildCount&&a>c-this._sortingChildCount-1&&(a=c-this._sortingChildCount-1);return e<a?this._setChildIndex(b,e,a-1):this._setChildIndex(b,e,a)};a._setChildIndex=function(b,a,f){var e=this._children.length;f>e&&(f=e);if(a==f)return a;this._children.splice(a,1);this._children.splice(f,0,b);if(b.inContainer){a=0;var c;if(0==this._childrenRenderOrder){for(c=0;c<f;c++)e=this._children[c],e.inContainer&&a++;a==this._container.numChildren&&a--;this._container.setChildIndex(b.displayObject,a)}else if(1==this._childrenRenderOrder){for(c=e-1;c>f;c--)e=this._children[c],e.inContainer&&a++;a==this._container.numChildren&&a--;this._container.setChildIndex(b.displayObject,a)}else k.timer.callLater(this,this.buildNativeDisplayList);this.setBoundsChangedFlag()}return f};a.swapChildren=function(b,a){var e=this._children.indexOf(b),c=this._children.indexOf(a);if(-1==e||-1==c)throw"Not a child of this container";this.swapChildrenAt(e,c)};a.swapChildrenAt=function(b,a){void 0===a&&(a=0);var e=this._children[a];this.setChildIndex(this._children[b],a);this.setChildIndex(e,b)};a.isAncestorOf=function(b){if(null==b)return!1;for(b=b.parent;b;){if(b==this)return!0;b=b.parent}return!1};a.addController=function(b){this._controllers.push(b);b.parent=this;this.applyController(b)};a.getControllerAt=function(b){return this._controllers[b]};a.getController=function(b){for(var a=this._controllers.length,f=0;f<a;++f){var c=this._controllers[f];if(c.name==b)return c}return null};a.removeController=function(b){var a=this._controllers.indexOf(b);if(-1==a)throw Error("controller not exists");b.parent=null;this._controllers.splice(a,1);for(var a=this._children.length,f=0;f<a;f++)this._children[f].handleControllerChanged(b)};a.childStateChanged=function(b){if(!this._buildingDisplayList){var a=this._children.length;if(b instanceof fairygui.GGroup)for(var f=0;f<a;f++){var c=this._children[f];c.group==b&&this.childStateChanged(c)}else if(b.displayObject)if(b.internalVisible&&b.displayObject!=this._displayObject.mask){if(!b.displayObject.parent){var d=0;if(0==this._childrenRenderOrder){for(f=0;f<a;f++){c=this._children[f];if(c==b)break;null!=c.displayObject&&null!=c.displayObject.parent&&d++}this._container.addChildAt(b.displayObject,d)}else if(1==this._childrenRenderOrder){for(f=a-1;0<=f;f--){c=this._children[f];if(c==b)break;null!=c.displayObject&&null!=c.displayObject.parent&&d++}this._container.addChildAt(b.displayObject,d)}else this._container.addChild(b.displayObject),k.timer.callLater(this,this.buildNativeDisplayList)}}else b.displayObject.parent&&(this._container.removeChild(b.displayObject),2==this._childrenRenderOrder&&k.timer.callLater(this,this.buildNativeDisplayList))}};a.buildNativeDisplayList=function(){var b=this._children.length;if(0!=b){var a,f;switch(this._childrenRenderOrder){case 0:for(a=0;a<b;a++)f=this._children[a],null!=f.displayObject&&f.internalVisible&&this._container.addChild(f.displayObject);break;case 1:for(a=b-1;0<=a;a--)f=this._children[a],null!=f.displayObject&&f.internalVisible&&this._container.addChild(f.displayObject);break;case 2:for(a=0;a<this._apexIndex;a++)f=this._children[a],null!=f.displayObject&&f.internalVisible&&this._container.addChild(f.displayObject);for(a=b-1;a>=this._apexIndex;a--)f=this._children[a],null!=f.displayObject&&f.internalVisible&&this._container.addChild(f.displayObject)}}};a.applyController=function(b){this._applyingController=b;for(var a,f=this._children.length,c=0;c<f;c++)a=this._children[c],a.handleControllerChanged(b);this._applyingController=null;b.runActions()};a.applyAllControllers=function(){for(var b=this._controllers.length,a=0;a<b;++a)this.applyController(this._controllers[a])};a.adjustRadioGroupDepth=function(b,a){var e=this._children.length,c,d,g=-1,l=-1;for(c=0;c<e;c++)d=this._children[c],d==b?g=c:d instanceof fairygui.GButton&&d.relatedController==a&&c>l&&(l=c);g<l&&(null!=this._applyingController&&this._children[l].handleControllerChanged(this._applyingController),this.swapChildrenAt(g,l))};a.getTransitionAt=function(b){return this._transitions[b]};a.getTransition=function(b){for(var a=this._transitions.length,f=0;f<a;++f){var c=this._transitions[f];if(c.name==b)return c}return null};a.isChildInView=function(b){return null!=this._displayObject.scrollRect?0<=b.x+b.width&&b.x<=this.width&&0<=b.y+b.height&&b.y<=this.height:null!=this._scrollPane?this._scrollPane.isChildInView(b):!0};a.getFirstChildInView=function(){for(var b=this._children.length,a=0;a<b;++a)if(this.isChildInView(this._children[a]))return a;return-1};a.setMask=function(b,a){this._mask&&this._mask!=b&&"destination-out"==this._mask.blendMode&&(this._mask.blendMode=null);(this._mask=b)?(this._mask.hitArea&&(this._displayObject.hitArea=new ib(this._mask,a),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0),a?(this._displayObject.mask=null,this._displayObject.cacheAs="bitmap",this._mask.blendMode="destination-out"):this._displayObject.mask=this._mask):(this._displayObject.mask=null,this._displayObject.hitArea instanceof fairygui.utils.ChildHitArea&&(this._displayObject.hitArea=null))};a.updateHitArea=function(){if(this._displayObject.hitArea instanceof fairygui.utils.PixelHitTest){var b=this._displayObject.hitArea;0!=this.sourceWidth&&(b.scaleX=this.width/this.sourceWidth);0!=this.sourceHeight&&(b.scaleY=this.height/this.sourceHeight)}else this._displayObject.hitArea instanceof laya.maths.Rectangle&&this._displayObject.hitArea.setTo(0,0,this.width,this.height)};a.updateMask=function(){var b=this._displayObject.scrollRect;null==b&&(b=new D);b.x=this._margin.left;b.y=this._margin.top;b.width=this.width-this._margin.right;b.height=this.height-this._margin.bottom;this._displayObject.scrollRect=b};a.setupScroll=function(b){this._displayObject==this._container&&(this._container=new I,this._displayObject.addChild(this._container));this._scrollPane=new Ua(this);this._scrollPane.setup(b)};a.setupOverflow=function(b){if(1==b)this._displayObject==this._container&&(this._container=new I,this._displayObject.addChild(this._container)),this.updateMask(),this._container.pos(this._margin.left,this._margin.top);else if(0!=this._margin.left||0!=this._margin.top)this._displayObject==this._container&&(this._container=new I,this._displayObject.addChild(this._container)),this._container.pos(this._margin.left,this._margin.top)};a.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);if(this._scrollPane)this._scrollPane.onOwnerSizeChanged();else null!=this._displayObject.scrollRect&&this.updateMask();null!=this._displayObject.hitArea&&this.updateHitArea()};a.handleGrayedChanged=function(){var b=this.getController("grayed");if(null!=b)b.selectedIndex=this.grayed?1:0;else for(var b=this.grayed,a=this._children.length,f=0;f<a;++f)this._children[f].grayed=b};a.handleControllerChanged=function(b){c.prototype.handleControllerChanged.call(this,b);null!=this._scrollPane&&this._scrollPane.handleControllerChanged(b)};a.setBoundsChangedFlag=function(){!this._scrollPane&&!this._trackBounds||this._boundsChanged||(this._boundsChanged=!0,k.timer.callLater(this,this.__render))};a.__render=function(){if(this._boundsChanged){var b,a=this._children.length,f;for(b=0;b<a;b++)f=this._children[b],f.ensureSizeCorrect();this.updateBounds()}};a.ensureBoundsCorrect=function(){var b,a=this._children.length,f;for(b=0;b<a;b++)f=this._children[b],f.ensureSizeCorrect();this._boundsChanged&&this.updateBounds()};a.updateBounds=function(){var b=0,a=0,f=0,c=0,d=this._children.length;if(0<d){var a=b=Number.POSITIVE_INFINITY,c=f=Number.NEGATIVE_INFINITY,g,l;for(l=0;l<d;l++){var h=this._children[l];g=h.x;g<b&&(b=g);g=h.y;g<a&&(a=g);g=h.x+h.actualWidth;g>f&&(f=g);g=h.y+h.actualHeight;g>c&&(c=g)}f-=b;c-=a}this.setBounds(b,a,f,c)};a.setBounds=function(b,a,f,c){this._boundsChanged=!1;this._scrollPane&&this._scrollPane.setContentSize(Math.round(b+f),Math.round(a+c))};a.getSnappingPosition=function(b,a,f){return this.getSnappingPositionWithDir(b,a,0,0,f)};a.getSnappingPositionWithDir=function(b,a,f,c,d){d||(d=new y);f=this._children.length;if(0==f)return d.x=0,d.y=0,d;this.ensureBoundsCorrect();c=null;var e,n=0;if(0!=a){for(;n<f;n++)if(c=this._children[n],a<c.y){0==n?a=0:(e=this._children[n-1],a=a<e.y+e.actualHeight/2?e.y:c.y);break}n==f&&(a=c.y)}if(0!=b){for(0<n&&n--;n<f;n++)if(c=this._children[n],b<c.x){0==n?b=0:(e=this._children[n-1],b=b<e.x+e.actualWidth/2?e.x:c.x);break}n==f&&(b=c.x)}d.x=b;d.y=a;return d};a.childSortingOrderChanged=function(b,a,f){void 0===f&&(f=0);0==f?(this._sortingChildCount--,this.setChildIndex(b,this._children.length)):(0==a&&this._sortingChildCount++,a=this._children.indexOf(b),f=this.getInsertPosForSortingChild(b),a<f?this._setChildIndex(b,a,f-1):this._setChildIndex(b,a,f))};a.constructFromResource=function(){this.constructFromResource2(null,0)};a.constructFromResource2=function(b,a){this.packageItem.decoded||(this.packageItem.decoded=!0,ua.translateComponent(this.packageItem));var e,c,d,g,l,h=this.packageItem.rawData;h.seek(0,0);this._underConstruct=!0;this.sourceWidth=h.getInt32();this.sourceHeight=h.getInt32();this.initWidth=this.sourceWidth;this.initHeight=this.sourceHeight;this.setSize(this.sourceWidth,this.sourceHeight);h.readBool()&&(this.minWidth=h.getInt32(),this.maxWidth=h.getInt32(),this.minHeight=h.getInt32(),this.maxHeight=h.getInt32());h.readBool()&&(e=h.getFloat32(),l=h.getFloat32(),this.internalSetPivot(e,l,h.readBool()));h.readBool()&&(this._margin.top=h.getInt32(),this._margin.bottom=h.getInt32(),this._margin.left=h.getInt32(),this._margin.right=h.getInt32());e=h.readByte();2==e?(e=h.pos,h.seek(0,7),this.setupScroll(h),h.pos=e):this.setupOverflow(e);h.readBool()&&h.skip(8);this._buildingDisplayList=!0;h.seek(0,1);l=h.getInt16();for(e=0;e<l;e++)g=h.getInt16(),g+=h.pos,c=new gb,this._controllers.push(c),c.parent=this,c.setup(h),h.pos=g;h.seek(0,2);var k;l=h.getInt16();for(e=0;e<l;e++){c=h.getInt16();d=h.pos;if(null!=b)k=b[a+e];else{h.seek(d,0);k=h.readByte();var m=h.readS(),v=h.readS();g=null;null!=m&&(g=null!=v?z.getById(v):this.packageItem.owner,g=null!=g?g.getItemById(m):null);null!=g?(k=M.newObject(g),k.packageItem=g,k.constructFromResource()):k=M.newObject2(k)}k._underConstruct=!0;k.setup_beforeAdd(h,d);k.parent=this;this._children.push(k);h.pos=d+c}h.seek(0,3);this.relations.setup(h,!0);h.seek(0,2);h.skip(2);for(e=0;e<l;e++)g=h.getInt16(),g+=h.pos,h.seek(h.pos,3),this._children[e].relations.setup(h,!1),h.pos=g;h.seek(0,2);h.skip(2);for(e=0;e<l;e++)g=h.getInt16(),g+=h.pos,k=this._children[e],k.setup_afterAdd(h,h.pos),k._underConstruct=!1,h.pos=g;h.seek(0,4);h.skip(2);this.opaque=h.readBool();e=h.getInt16();-1!=e&&this.setMask(this.getChildAt(e).displayObject,h.readBool());e=h.readS();null!=e&&(g=this.packageItem.owner.getItemById(e),null!=g&&null!=g.pixelHitTestData&&(e=h.getInt32(),l=h.getInt32(),this._displayObject.hitArea=new hb(g.pixelHitTestData,e,l),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0));h.seek(0,5);l=h.getInt16();for(e=0;e<l;e++)g=h.getInt16(),g+=h.pos,c=new sa(this),c.setup(h),this._transitions.push(c),h.pos=g;0<this._transitions.length&&(this.displayObject.on("display",this,this.___added),this.displayObject.on("undisplay",this,this.___removed));this.applyAllControllers();this._underConstruct=this._buildingDisplayList=!1;this.buildNativeDisplayList();this.setBoundsChangedFlag();9!=this.packageItem.objectType&&this.constructExtension(h);this.constructFromXML(null)};a.constructExtension=function(b){};a.constructFromXML=function(b){};a.setup_afterAdd=function(b,a){c.prototype.setup_afterAdd.call(this,b,a);b.seek(a,4);var e=b.getInt16();-1!=e&&null!=this._scrollPane&&(this._scrollPane.pageController=this._parent.getControllerAt(e));for(var e=b.getInt16(),d=0;d<e;d++){var g=this.getController(b.readS()),H=b.readS();g&&(g.selectedPageId=H)}};a.___added=function(){for(var b=this._transitions.length,a=0;a<b;++a)this._transitions[a].onOwnerAddedToStage()};a.___removed=function(){for(var b=this._transitions.length,a=0;a<b;++a)this._transitions[a].onOwnerRemovedFromStage()};g(0,a,"numChildren",function(){return this._children.length});g(0,a,"displayListContainer",function(){return this._container});g(0,a,"childrenRenderOrder",function(){return this._childrenRenderOrder},function(b){this._childrenRenderOrder!=b&&(this._childrenRenderOrder=b,this.buildNativeDisplayList())});g(0,a,"opaque",function(){return this._opaque},function(b){this._opaque!=b&&((this._opaque=b)?(null==this._displayObject.hitArea&&(this._displayObject.hitArea=new D),this._displayObject.hitArea instanceof laya.maths.Rectangle&&this._displayObject.hitArea.setTo(0,0,this.width,this.height),this._displayObject.mouseThrough=!1):(this._displayObject.hitArea instanceof laya.maths.Rectangle&&(this._displayObject.hitArea=null),this._displayObject.mouseThrough=!0))});g(0,a,"controllers",function(){return this._controllers});g(0,a,"scrollPane",function(){return this._scrollPane});g(0,a,"margin",function(){return this._margin},function(b){this._margin.copy(b);null!=this._displayObject.scrollRect&&this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y);this.handleSizeChanged()});g(0,a,"apexIndex",function(){return this._apexIndex},function(b){this._apexIndex!=b&&(this._apexIndex=b,2==this._childrenRenderOrder&&this.buildNativeDisplayList())});g(0,a,"mask",function(){return this._mask},function(b){this.setMask(b,!1)});g(0,a,"viewHeight",function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},function(b){null!=this._scrollPane?this._scrollPane.viewHeight=b:this.height=b+this._margin.top+this._margin.bottom});g(0,a,"baseUserData",function(){var b=this.packageItem.rawData;b.seek(0,4);return b.readS()});g(0,a,"viewWidth",function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},function(b){null!=this._scrollPane?this._scrollPane.viewWidth=b:this.width=b+this._margin.left+this._margin.right});return d}(E),Za=function(c){function d(){this._columnGap=this._lineGap=this._layout=0;this._boundsChanged=this._percentReady=!1;this._updating=0;d.__super.call(this)}m(d,"fairygui.GGroup",c);var a=d.prototype;a.setBoundsChangedFlag=function(b){void 0===b&&(b=!1);0==this._updating&&null!=this.parent&&(b&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,0!=this._layout&&k.timer.callLater(this,this.ensureBoundsCorrect)))};a.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()};a.updateBounds=function(){k.timer.clear(this,this.ensureBoundsCorrect);this._boundsChanged=!1;if(null!=this.parent){this.handleLayout();var b=this._parent.numChildren,a,f,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h;h=!0;for(a=0;a<b;a++)f=this._parent.getChildAt(a),f.group==this&&(h=f.x,h<c&&(c=h),h=f.y,h<d&&(d=h),h=f.x+f.width,h>g&&(g=h),h=f.y+f.height,h>l&&(l=h),h=!1);h?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(c,d),this._updating=2,this.setSize(g-c,l-d));this._updating=0}};a.handleLayout=function(){this._updating|=1;var b,a,f;if(1==this._layout){var c=NaN;f=this.parent.numChildren;for(a=0;a<f;a++)b=this.parent.getChildAt(a),b.group==this&&(isNaN(c)?c=Math.floor(b.x):b.x=c,0!=b.width&&(c+=Math.floor(b.width+this._columnGap)));this._percentReady||this.updatePercent()}else if(2==this._layout){c=NaN;f=this.parent.numChildren;for(a=0;a<f;a++)b=this.parent.getChildAt(a),b.group==this&&(isNaN(c)?c=Math.floor(b.y):b.y=c,0!=b.height&&(c+=Math.floor(b.height+this._lineGap)));this._percentReady||this.updatePercent()}this._updating&=2};a.updatePercent=function(){this._percentReady=!0;var b=this.parent.numChildren,a,f,c=0;if(1==this._layout){for(a=0;a<b;a++)f=this.parent.getChildAt(a),f.group==this&&(c+=f.width);for(a=0;a<b;a++)f=this.parent.getChildAt(a),f.group==this&&(f._sizePercentInGroup=0<c?f.width/c:0)}else{for(a=0;a<b;a++)f=this.parent.getChildAt(a),f.group==this&&(c+=f.height);for(a=0;a<b;a++)f=this.parent.getChildAt(a),f.group==this&&(f._sizePercentInGroup=0<c?f.height/c:0)}};a.moveChildren=function(b,a){if(0==(this._updating&1)&&null!=this.parent){this._updating|=1;var e=this.parent.numChildren,c,d;for(c=0;c<e;c++)d=this.parent.getChildAt(c),d.group==this&&d.setXY(d.x+b,d.y+a);this._updating&=2}};a.resizeChildren=function(b,a){if(0!=this._layout&&0==(this._updating&2)&&null!=this.parent){this._updating|=2;this._percentReady||this.updatePercent();var e=this.parent.numChildren,c,d,g,l=-1;d=0;var h,k,m=!1;for(c=0;c<e;c++)g=this.parent.getChildAt(c),g.group==this&&(l=c,d++);if(1==this._layout){k=h=this.width-(d-1)*this._columnGap;var v=NaN,q;for(c=0;c<e;c++)if(g=this.parent.getChildAt(c),g.group==this)if(isNaN(v)?v=Math.floor(g.x):g.x=v,q=l==c?k:Math.round(g._sizePercentInGroup*h),g.setSize(q,g._rawHeight+a,!0),k-=g.width,l==c){if(1<=k)for(d=0;d<=c;d++)g=this.parent.getChildAt(d),g.group==this&&(m?g.x+=k:(q=g.width+k,(0==g.maxWidth||q<g.maxWidth)&&(0==g.minWidth||q>g.minWidth)&&(g.setSize(q,g.height,!0),m=!0)))}else v+=g.width+this._columnGap}else if(2==this._layout)for(k=h=this.height-(d-1)*this._lineGap,v=NaN,c=0;c<e;c++)if(g=this.parent.getChildAt(c),g.group==this)if(isNaN(v)?v=Math.floor(g.y):g.y=v,q=l==c?k:Math.round(g._sizePercentInGroup*h),g.setSize(g._rawWidth+b,q,!0),k-=g.height,l==c){if(1<=k)for(d=0;d<=c;d++)g=this.parent.getChildAt(d),g.group==this&&(m?g.y+=k:(q=g.height+k,(0==g.maxHeight||q<g.maxHeight)&&(0==g.minHeight||q>g.minHeight)&&(g.setSize(g.width,q,!0),m=!0)))}else v+=g.height+this._lineGap;this._updating&=1}};a.handleAlphaChanged=function(){if(!this._underConstruct)for(var b=this._parent.numChildren,a=0;a<b;a++){var f=this._parent.getChildAt(a);f.group==this&&(f.alpha=this.alpha)}};a.handleVisibleChanged=function(){if(this._parent)for(var b=this._parent.numChildren,a=0;a<b;a++){var f=this._parent.getChildAt(a);f.group==this&&f.handleVisibleChanged()}};a.setup_beforeAdd=function(b,a){c.prototype.setup_beforeAdd.call(this,b,a);b.seek(a,5);this._layout=b.readByte();this._lineGap=b.getInt32();this._columnGap=b.getInt32()};a.setup_afterAdd=function(b,a){c.prototype.setup_afterAdd.call(this,b,a);this.visible||this.handleVisibleChanged()};g(0,a,"layout",function(){return this._layout},function(b){this._layout!=b&&(this._layout=b,this.setBoundsChangedFlag(!0))});g(0,a,"columnGap",function(){return this._columnGap},function(b){this._columnGap!=b&&(this._columnGap=b,this.setBoundsChangedFlag())});g(0,a,"lineGap",function(){return this._lineGap},function(b){this._lineGap!=b&&(this._lineGap=b,this.setBoundsChangedFlag())});return d}(E),P=function(c){function d(){this._text=this._templateVars=this._gearColor=null;d.__super.call(this);this._gearColor=new ba(this)}m(d,"fairygui.GTextField",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IColorGear":!0});a.parseTemplate=function(b){for(var a=0,f,c,d,g="";-1!=(f=b.indexOf("{",a));){if(0<f&&92==b.charCodeAt(f-1))g+=b.substring(a,f-1),g+="{";else{g+=b.substring(a,f);a=f;f=b.indexOf("}",a);if(-1==f)break;f==a+1?g+=b.substr(a,2):(c=b.substring(a+1,f),a=c.indexOf("\x3d"),-1!=a?(d=this._templateVars[c.substring(0,a)],g=null==d?g+c.substring(a+1):g+d):(d=this._templateVars[c],null!=d&&(g+=d)))}a=f+1}a<b.length&&(g+=b.substr(a));return g};a.setVar=function(b,a){this._templateVars||(this._templateVars={});this._templateVars[b]=a;return this};a.flushVars=function(){this.text=this._text};a.handleControllerChanged=function(b){c.prototype.handleControllerChanged.call(this,b);this._gearColor.controller==b&&this._gearColor.apply()};a.setup_beforeAdd=function(b,a){c.prototype.setup_beforeAdd.call(this,b,a);b.seek(a,5);var e;this.font=b.readS();this.fontSize=b.getInt16();this.color=b.readColorS();e=b.readByte();this.align=0==e?"left":1==e?"center":"right";e=b.readByte();this.valign=0==e?"top":1==e?"middle":"bottom";this.leading=b.getInt16();this.letterSpacing=b.getInt16();this.ubbEnabled=b.readBool();this.autoSize=b.readByte();this.underline=b.readBool();this.italic=b.readBool();this.bold=b.readBool();this.singleLine=b.readBool();b.readBool()&&(this.strokeColor=b.readColorS(),this.stroke=b.getFloat32()+1);b.readBool()&&b.skip(12);b.readBool()&&(this._templateVars={})};a.setup_afterAdd=function(b,a){c.prototype.setup_afterAdd.call(this,b,a);b.seek(a,6);var e=b.readS();null!=e&&(this.text=e)};g(0,a,"color",function(){return null},function(b){});g(0,a,"font",function(){return null},function(b){});g(0,a,"templateVars",function(){return this._templateVars},function(b){if(null!=this._templateVars||null!=b)this._templateVars=b,this.flushVars()});g(0,a,"leading",function(){return 0},function(b){});g(0,a,"fontSize",function(){return 0},function(b){});g(0,a,"bold",function(){return!1},function(b){});g(0,a,"letterSpacing",function(){return 0},function(b){});g(0,a,"align",function(){return null},function(b){});g(0,a,"valign",function(){return null},function(b){});g(0,a,"italic",function(){return!1},function(b){});g(0,a,"underline",function(){return!1},function(b){});g(0,a,"singleLine",function(){return!1},function(b){});g(0,a,"stroke",function(){return 0},function(b){});g(0,a,"strokeColor",function(){return null},function(b){});g(0,a,"ubbEnabled",function(){return!1},function(b){});g(0,a,"autoSize",function(){return 0},function(b){});g(0,a,"textWidth",function(){return 0});return d}(E),Ma=function(c){function d(){this.targetPage=this.controllerName=this.objectId=null;d.__super.call(this)}m(d,"fairygui.action.ChangePageAction",c);var a=d.prototype;a.enter=function(b){if(this.controllerName){var a;(a=this.objectId?b.parent.getChildById(this.objectId):b.parent)&&(a=a.getController(this.controllerName))&&a!=b&&!a.changing&&(a.selectedPageId=this.targetPage)}};a.setup=function(b){c.prototype.setup.call(this,b);this.objectId=b.readS();this.controllerName=b.readS();this.targetPage=b.readS()};return d}(ca),xa=function(c){function d(){this._type=0;this._lineSize=NaN;this._hitArea=this._cornerRadius=this._fillColor=this._lineColor=null;d.__super.call(this);this._type=0;this._lineSize=1;this._lineColor="#000000";this._fillColor="#FFFFFF";this._cornerRadius=null}m(d,"fairygui.GGraph",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IColorGear":!0});a.drawRect=function(b,a,f,c){this._type=1;this._lineSize=b;this._lineColor=a;this._fillColor=f;this._cornerRadius=c;this.drawCommon()};a.drawEllipse=function(b,a,f){this._type=2;this._lineSize=b;this._lineColor=a;this._fillColor=f;this.drawCommon()};a.drawCommon=function(){this._displayObject.mouseEnabled=this.touchable;var b=this._displayObject.graphics;b.clear();var a=this.width,f=this.height;if(0!=a&&0!=f){var c=this._fillColor,d=this._lineColor;if(Da.isWebGL&&t.startsWith(c,"rgba")){var c=c.substring(5,c.lastIndexOf(")")).split(","),g=parseFloat(c[3]);0==g?c=null:(c=X.toHexColor((parseInt(c[0])<<16)+(parseInt(c[1])<<8)+parseInt(c[2])),this.alpha=g)}1==this._type?null!=this._cornerRadius?b.drawPath(0,0,[["moveTo",this._cornerRadius[0],0],["lineTo",a-this._cornerRadius[1],0],["arcTo",a,0,a,this._cornerRadius[1],this._cornerRadius[1]],["lineTo",a,f-this._cornerRadius[3]],["arcTo",a,f,a-this._cornerRadius[3],f,this._cornerRadius[3]],["lineTo",this._cornerRadius[2],f],["arcTo",0,f,0,f-this._cornerRadius[2],this._cornerRadius[2]],["lineTo",0,this._cornerRadius[0]],["arcTo",0,0,this._cornerRadius[0],0,this._cornerRadius[0]],["closePath"]],{fillStyle:c},0<this._lineSize?{strokeStyle:d,lineWidth:this._lineSize}:null):b.drawRect(0,0,a,f,c,0<this._lineSize?d:null,this._lineSize):b.drawCircle(a/2,f/2,a/2,c,0<this._lineSize?d:null,this._lineSize);this._displayObject.repaint()}};a.replaceMe=function(a){if(!this._parent)throw"parent not set";a.name=this.name;a.alpha=this.alpha;a.rotation=this.rotation;a.visible=this.visible;a.touchable=this.touchable;a.grayed=this.grayed;a.setXY(this.x,this.y);a.setSize(this.width,this.height);var b=this._parent.getChildIndex(this);this._parent.addChildAt(a,b);a.relations.copyFrom(this.relations);this._parent.removeChild(this,!0)};a.addBeforeMe=function(a){if(null==this._parent)throw"parent not set";var b=this._parent.getChildIndex(this);this._parent.addChildAt(a,b)};a.addAfterMe=function(a){if(null==this._parent)throw"parent not set";var b=this._parent.getChildIndex(this);b++;this._parent.addChildAt(a,b)};a.setNativeObject=function(a){this._type=0;this._displayObject.mouseEnabled=this.touchable;this._displayObject.graphics.clear();this._displayObject.addChild(a)};a.createDisplayObject=function(){c.prototype.createDisplayObject.call(this);this._displayObject.mouseEnabled=!1;this._hitArea=new Q;this._hitArea.hit=this._displayObject.graphics;this._displayObject.hitArea=this._hitArea};a.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);0!=this._type&&this.drawCommon()};a.setup_beforeAdd=function(a,e){c.prototype.setup_beforeAdd.call(this,a,e);a.seek(e,5);this._type=a.readByte();if(0!=this._type){this._lineSize=a.getInt32();this._lineColor=a.readColorS(!0);this._fillColor=a.readColorS(!0);if(a.readBool()){this._cornerRadius=[];for(var b=0;4>b;b++)this._cornerRadius[b]=a.getFloat32()}this.drawCommon()}};g(0,a,"color",function(){return this._fillColor},function(a){this._fillColor=a;0!=this._type&&this.drawCommon()});return d}(E),ta=function(c){function d(a,b,e){this.stringTable=null;this.version=0;void 0===b&&(b=0);void 0===e&&(e=-1);-1==e&&(e=a.byteLength-b);0==b&&e==a.byteLength?d.__super.call(this,a):(this._u8d_=new Uint8Array(a,b,e),this._d_=new DataView(this._u8d_.buffer,b,e),this._length=e);this.endian="bigEndian"}m(d,"fairygui.utils.ByteBuffer",c);c=d.prototype;c.skip=function(a){this.pos+=a};c.readBool=function(){return 1==this.getUint8()};c.readS=function(){var a=this.getUint16();return 65534==a?null:65533==a?"":this.stringTable[a]};c.writeS=function(a){var b=this.getUint16();65534!=b&&65533!=b&&(this.stringTable[b]=a)};c.readColor=function(a){void 0===a&&(a=!1);var b=this.getUint8(),e=this.getUint8(),f=this.getUint8(),c=this.getUint8();return(a?c<<24:0)+(b<<16)+(e<<8)+f};c.readColorS=function(a){void 0===a&&(a=!1);var b=this.getUint8(),e=this.getUint8(),f=this.getUint8(),c=this.getUint8();if(a&&255!=c)return"rgba("+b+","+e+","+f+","+c/255+")";a=b.toString(16);e=e.toString(16);f=f.toString(16);1==a.length&&(a="0"+a);1==e.length&&(e="0"+e);1==f.length&&(f="0"+f);return"#"+a+e+f};c.readChar=function(){var a=this.getUint16();return String.fromCharCode(a)};c.readBuffer=function(){var a=this.getUint32(),a=new d(this.buffer,this._pos_,a);a.stringTable=this.stringTable;a.version=this.version;return a};c.seek=function(a,b){var e=this._pos_;this.pos=a;var f=this.getUint8();if(b<f){1==this.getUint8()?(this.pos+=2*b,f=this.getUint16()):(this.pos+=4*b,f=this.getUint32());if(0<f)return this.pos=a+f,!0;this.pos=e;return!1}this.pos=e;return!1};return d}(fa),Ja=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}m(d,"fairygui.gears.GearIcon",c);c=d.prototype;c.init=function(){this._default=this._owner.icon;this._storage={}};c.addStatus=function(a,b){null==a?this._default=b.readS():this._storage[a]=b.readS()};c.apply=function(){this._owner._gearLocked=!0;var a=this._storage[this._controller.selectedPageId];this._owner.icon=void 0!==a?a:this._default;this._owner._gearLocked=!1};c.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon};return d}(J),Wa=function(c){function d(){this._movieClip=null;d.__super.call(this)}m(d,"fairygui.GMovieClip",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IAnimationGear":!0,"fairygui.gears.IColorGear":!0});a.createDisplayObject=function(){this._displayObject=this._movieClip=new ya;this._movieClip.mouseEnabled=!1;this._displayObject.$owner=this};a.rewind=function(){this._movieClip.rewind()};a.syncStatus=function(a){this._movieClip.syncStatus(a._movieClip)};a.advance=function(a){this._movieClip.advance(a)};a.setPlaySettings=function(a,e,f,c,d){void 0===a&&(a=0);void 0===e&&(e=-1);void 0===f&&(f=0);void 0===c&&(c=-1);this._movieClip.setPlaySettings(a,e,f,c,d)};a.constructFromResource=function(){this.sourceWidth=this.packageItem.width;this.sourceHeight=this.packageItem.height;this.initWidth=this.sourceWidth;this.initHeight=this.sourceHeight;this.setSize(this.sourceWidth,this.sourceHeight);this.packageItem.load();this._movieClip.interval=this.packageItem.interval;this._movieClip.swing=this.packageItem.swing;this._movieClip.repeatDelay=this.packageItem.repeatDelay;this._movieClip.frames=this.packageItem.frames};a.setup_beforeAdd=function(a,e){c.prototype.setup_beforeAdd.call(this,a,e);a.seek(e,5);a.readBool()&&(this.color=a.readColorS());a.readByte();this._movieClip.frame=a.getInt32();this._movieClip.playing=a.readBool()};g(0,a,"color",function(){return"#FFFFFF"},function(a){});g(0,a,"playing",function(){return this._movieClip.playing},function(a){this._movieClip.playing!=a&&(this._movieClip.playing=a,this.updateGear(5))});g(0,a,"timeScale",function(){return this._movieClip.timeScale},function(a){this._movieClip.timeScale=a});g(0,a,"frame",function(){return this._movieClip.frame},function(a){this._movieClip.frame!=a&&(this._movieClip.frame=a,this.updateGear(5))});return d}(E),la=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}var a;m(d,"fairygui.gears.GearLook",c);c=d.prototype;c.init=function(){this._default=new a(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable);this._storage={}};c.addStatus=function(b,e){var f;null==b?f=this._default:(f=new a,this._storage[b]=f);f.alpha=e.getFloat32();f.rotation=e.getFloat32();f.grayed=e.readBool();f.touchable=e.readBool()};c.apply=function(){var a=this._storage[this._controller.selectedPageId];a||(a=this._default);if(null==this._tweenConfig||!this._tweenConfig.tween||z._constructing||J.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.grayed=a.grayed,this._owner.alpha=a.alpha,this._owner.rotation=a.rotation,this._owner.touchable=a.touchable,this._owner._gearLocked=!1;else{this._owner.grayed=a.grayed;this._owner.touchable=a.touchable;this._owner._gearLocked=!1;if(null!=this._tweenConfig._tweener)if(this._tweenConfig._tweener.endValue.x!=a.alpha||this._tweenConfig._tweener.endValue.y!=a.rotation)this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null;else return;var e=a.alpha!=this._owner.alpha,f=a.rotation!=this._owner.rotation;if(e||f)this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=B.to2(this._owner.alpha,this._owner.rotation,a.alpha,a.rotation,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(f?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this)}};c.__tweenUpdate=function(a){var b=a.userData;this._owner._gearLocked=!0;0!=(b&1)&&(this._owner.alpha=a.value.x);0!=(b&2)&&(this._owner.rotation=a.value.y);this._owner._gearLocked=!1};c.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0);this._tweenConfig._tweener=null};c.updateState=function(){var b=this._storage[this._controller.selectedPageId];b||(b=new a,this._storage[this._controller.selectedPageId]=b);b.alpha=this._owner.alpha;b.rotation=this._owner.rotation;b.grayed=this._owner.grayed;b.touchable=this._owner.touchable};d.__init$=function(){a=function(){function a(a,b,c,d){this.rotation=this.alpha=NaN;this.touchable=this.grayed=!1;void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=!1);void 0===d&&(d=!0);this.alpha=a;this.rotation=b;this.grayed=c;this.touchable=d}m(a,"");return a}()};return d}(J),ba=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}var a;m(d,"fairygui.gears.GearColor",c);c=d.prototype;c.init=function(){this._default=void 0!=this._owner.strokeColor?new a(this._owner.color,this._owner.strokeColor):new a(this._owner.color,null);this._storage={}};c.addStatus=function(b,e){var f;null==b?f=this._default:(f=new a,this._storage[b]=f);f.color=e.readColorS();f.strokeColor=e.readColorS()};c.apply=function(){this._owner._gearLocked=!0;var a=this._storage[this._controller.selectedPageId];a||(a=this._default);this._owner.color=a.color;void 0!=this._owner.strokeColor&&null!=a.strokeColor&&(this._owner.strokeColor=a.strokeColor);this._owner._gearLocked=!1};c.updateState=function(){var b=this._storage[this._controller.selectedPageId];b||(b=new a(null,null),this._storage[this._controller.selectedPageId]=b);b.color=this._owner.color;void 0!=this._owner.strokeColor&&(b.strokeColor=this._owner.strokeColor)};d.__init$=function(){a=function(){function a(a,b){this.strokeColor=this.color=null;this.color=a;this.strokeColor=b}m(a,"");return a}()};return d}(J),La=function(c){function d(){this.transitionName=null;this.playTimes=1;this.delay=0;this.stopOnExit=!1;this._currentTransition=null;d.__super.call(this)}m(d,"fairygui.action.PlayTransitionAction",c);var a=d.prototype;a.enter=function(a){if(a=a.parent.getTransition(this.transitionName))this._currentTransition&&this._currentTransition.playing?a.changePlayTimes(this.playTimes):a.play(null,this.playTimes,this.delay),this._currentTransition=a};a.leave=function(a){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)};a.setup=function(a){c.prototype.setup.call(this,a);this.transitionName=a.readS();this.playTimes=a.getInt32();this.delay=a.getFloat32();this.stopOnExit=a.readBool()};return d}(ca),Ia=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}m(d,"fairygui.gears.GearText",c);c=d.prototype;c.init=function(){this._default=this._owner.text;this._storage={}};c.addStatus=function(a,b){null==a?this._default=b.readS():this._storage[a]=b.readS()};c.apply=function(){this._owner._gearLocked=!0;var a=this._storage[this._controller.selectedPageId];this._owner.text=void 0!==a?a:this._default;this._owner._gearLocked=!1};c.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text};return d}(J),Va=function(c){function d(){this.image=null;this._flip=0;d.__super.call(this)}m(d,"fairygui.GImage",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IColorGear":!0});a.createDisplayObject=function(){this._displayObject=this.image=new za;this.image.mouseEnabled=!1;this._displayObject.$owner=this};a.constructFromResource=function(){this.packageItem.load();this.sourceWidth=this.packageItem.width;this.sourceHeight=this.packageItem.height;this.initWidth=this.sourceWidth;this.initHeight=this.sourceHeight;this.image.scale9Grid=this.packageItem.scale9Grid;this.image.scaleByTile=this.packageItem.scaleByTile;this.image.tileGridIndice=this.packageItem.tileGridIndice;this.image.texture=this.packageItem.texture;this.setSize(this.sourceWidth,this.sourceHeight)};a.handleXYChanged=function(){c.prototype.handleXYChanged.call(this);0!=this._flip&&(-1==this.scaleX&&(this.image.x+=this.width),-1==this.scaleY&&(this.image.y+=this.height))};a.setup_beforeAdd=function(a,e){c.prototype.setup_beforeAdd.call(this,a,e);a.seek(e,5);a.readBool()&&(this.color=a.readColorS());this.flip=a.readByte();this.image.fillMethod=a.readByte();0!=this.image.fillMethod&&(this.image.fillOrigin=a.readByte(),this.image.fillClockwise=a.readBool(),this.image.fillAmount=a.getFloat32())};a.cleanValue=function(a,e){return Math.min(e,Math.max(-e,a))};g(0,a,"color",function(){return this.image.color},function(a){if(this.image.color!=a){this.image.color=a;this.updateGear(4);var b=parseInt(a.substring(1,3),16)/255,f=parseInt(a.substring(3,5),16)/255;a=parseInt(a.substring(5,7),16)/255;b=this.cleanValue(isNaN(b)?1:b,1);f=this.cleanValue(isNaN(f)?1:f,1);a=this.cleanValue(isNaN(a)?1:a,1);b=new U([b,0,0,0,0,0,f,0,0,0,0,0,a,0,0,0,0,0,1,0]);this.image.filters=[b]}});g(0,a,"fillClockwise",function(){return this.image.fillClockwise},function(a){this.image.fillClockwise=a});g(0,a,"flip",function(){return this._flip},function(a){if(this._flip!=a){this._flip=a;var b=a=1;if(1==this._flip||3==this._flip)a=-1;if(2==this._flip||3==this._flip)b=-1;this.setScale(a,b);this.handleXYChanged()}});g(0,a,"fillMethod",function(){return this.image.fillMethod},function(a){this.image.fillMethod=a});g(0,a,"fillOrigin",function(){return this.image.fillOrigin},function(a){this.image.fillOrigin=a});g(0,a,"fillAmount",function(){return this.image.fillAmount},function(a){this.image.fillAmount=a});return d}(E),Ha=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}m(d,"fairygui.gears.GearXY",c);c=d.prototype;c.init=function(){this._default=new y(this._owner.x,this._owner.y);this._storage={}};c.addStatus=function(a,b){var e;null==a?e=this._default:(e=new y,this._storage[a]=e);e.x=b.getInt32();e.y=b.getInt32()};c.apply=function(){var a=this._storage[this._controller.selectedPageId];a||(a=this._default);if(null==this._tweenConfig||!this._tweenConfig.tween||z._constructing||J.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setXY(a.x,a.y),this._owner._gearLocked=!1;else{if(null!=this._tweenConfig._tweener)if(this._tweenConfig._tweener.endValue.x!=a.x||this._tweenConfig._tweener.endValue.y!=a.y)this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null;else return;if(this._owner.x!=a.x||this._owner.y!=a.y)this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=B.to2(this._owner.x,this._owner.y,a.x,a.y,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this)}};c.__tweenUpdate=function(a){this._owner._gearLocked=!0;this._owner.setXY(a.value.x,a.value.y);this._owner._gearLocked=!1};c.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0);this._tweenConfig._tweener=null};c.updateState=function(){var a=this._storage[this._controller.selectedPageId];a||(a=new y,this._storage[this._controller.selectedPageId]=a);a.x=this._owner.x;a.y=this._owner.y};c.updateFromRelations=function(a,b){if(null!=this._controller&&null!=this._storage){for(var e in this._storage){var f=this._storage[e];f.x+=a;f.y+=b}this._default.x+=a;this._default.y+=b;this.updateState()}};return d}(J),ma=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}var a;m(d,"fairygui.gears.GearAnimation",c);c=d.prototype;c.init=function(){this._default=new a(this._owner.playing,this._owner.frame);this._storage={}};c.addStatus=function(b,e){var f;null==b?f=this._default:(f=new a,this._storage[b]=f);f.playing=e.readBool();f.frame=e.getInt32()};c.apply=function(){this._owner._gearLocked=!0;var a=this._storage[this._controller.selectedPageId];a||(a=this._default);this._owner.frame=a.frame;this._owner.playing=a.playing;this._owner._gearLocked=!1};c.updateState=function(){var b=this._owner,e=this._storage[this._controller.selectedPageId];e||(e=new a,this._storage[this._controller.selectedPageId]=e);e.frame=b.frame;e.playing=b.playing};d.__init$=function(){a=function(){function a(a,b){this.playing=!1;this.frame=NaN;void 0===a&&(a=!0);void 0===b&&(b=0);this.playing=a;this.frame=b}m(a,"");return a}()};return d}(J),qa=function(c){function d(){this._valign=this._align=this._url=null;this._autoSize=!1;this._fill=0;this._showErrorSign=this._shrinkOnly=!1;this._contentItem=null;this._contentHeight=this._contentWidth=this._contentSourceHeight=this._contentSourceWidth=0;this._content2=this._errorSign=this._content=null;this._updatingLayout=!1;d.__super.call(this);this._url="";this._fill=0;this._align="left";this._valign="top";this._showErrorSign=!0}m(d,"fairygui.GLoader",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IAnimationGear":!0,"fairygui.gears.IColorGear":!0});a.createDisplayObject=function(){c.prototype.createDisplayObject.call(this);this._content=new ya;this._displayObject.addChild(this._content);this._displayObject.mouseEnabled=!0};a.dispose=function(){null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture);null!=this._content2&&this._content2.dispose();c.prototype.dispose.call(this)};a.advance=function(a){this._content.advance(a)};a.loadContent=function(){this.clearContent();this._url&&(t.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())};a.loadFromPackage=function(a){this._contentItem=z.getItemByURL(a);null!=this._contentItem?(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),0==this._contentItem.type?null==this._contentItem.texture?this.setErrorState():(this._content.texture=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._content.scaleByTile=this._contentItem.scaleByTile,this._content.tileGridIndice=this._contentItem.tileGridIndice,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):1==this._contentItem.type?(this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.swing=this._contentItem.swing,this._content.repeatDelay=this._contentItem.repeatDelay,this._content.frames=this._contentItem.frames,this.updateLayout()):3==this._contentItem.type?(a=z.createObjectFromURL(a))?a instanceof fairygui.GComponent?(this._content2=a.asCom,this._displayObject.addChild(this._content2.displayObject),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):(a.dispose(),this.setErrorState()):this.setErrorState():this.setErrorState()):this.setErrorState()};a.loadExternal=function(){aa.inst.load(this._url,ha.create(this,this.__getResCompleted),null,"image")};a.freeExternal=function(a){};a.onExternalLoadSuccess=function(a){this._content.texture=a;this._content.scale9Grid=null;this._content.scaleByTile=!1;this._contentSourceWidth=a.width;this._contentSourceHeight=a.height;this.updateLayout()};a.onExternalLoadFailed=function(){this.setErrorState()};a.__getResCompleted=function(a){if(null!=a)this.onExternalLoadSuccess(a);else this.onExternalLoadFailed()};a.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=p.loaderErrorSign&&(this._errorSign=fairygui.GLoader._errorSignPool.getObject(p.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._displayObject.addChild(this._errorSign.displayObject)))};a.clearErrorState=function(){null!=this._errorSign&&(this._displayObject.removeChild(this._errorSign.displayObject),fairygui.GLoader._errorSignPool.returnObject(this._errorSign),this._errorSign=null)};a.updateLayout=function(){if(null==this._content2&&null==this._content.texture&&null==this._content.frames)this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1);else{this._contentWidth=this._contentSourceWidth;this._contentHeight=this._contentSourceHeight;if(this._autoSize&&(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth==this._width&&this._contentHeight==this._height)){null!=this._content2?(this._content2.setXY(0,0),this._content2.setScale(1,1)):(this._content.size(this._contentWidth,this._contentHeight),this._content.pos(0,0));return}var a=1,e=1;0!=this._fill&&(a=this.width/this._contentSourceWidth,e=this.height/this._contentSourceHeight,1!=a||1!=e)&&(2==this._fill?a=e:3==this._fill?e=a:1==this._fill?a>e?a=e:e=a:5==this._fill&&(a>e?e=a:a=e),this._shrinkOnly&&(1<a&&(a=1),1<e&&(e=1)),this._contentWidth=this._contentSourceWidth*a,this._contentHeight=this._contentSourceHeight*e);null!=this._content2?this._content2.setScale(a,e):this._content.size(this._contentWidth,this._contentHeight);a="center"==this._align?Math.floor((this.width-this._contentWidth)/2):"right"==this._align?this.width-this._contentWidth:0;e="middle"==this._valign?Math.floor((this.height-this._contentHeight)/2):"bottom"==this._valign?this.height-this._contentHeight:0;null!=this._content2?this._content2.setXY(a,e):this._content.pos(a,e)}};a.clearContent=function(){this.clearErrorState();null==this._contentItem&&null!=this._content.texture&&this.freeExternal(this._content.texture);this._content.texture=null;this._content.frames=null;null!=this._content2&&(this._content2.dispose(),this._content2=null);this._contentItem=null};a.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);this._updatingLayout||this.updateLayout()};a.setup_beforeAdd=function(a,e){c.prototype.setup_beforeAdd.call(this,a,e);a.seek(e,5);var b;this._url=a.readS();b=a.readByte();this._align=0==b?"left":1==b?"center":"right";b=a.readByte();this._valign=0==b?"top":1==b?"middle":"bottom";this._fill=a.readByte();this._shrinkOnly=a.readBool();this._autoSize=a.readBool();this._showErrorSign=a.readBool();this._content.playing=a.readBool();this._content.frame=a.getInt32();a.readBool()&&(this.color=a.readColorS());0!=a.readByte()&&a.skip(6);this._url&&this.loadContent()};g(0,a,"frame",function(){return this._content.frame},function(a){this._content.frame!=a&&(this._content.frame=a,this.updateGear(5))});g(0,a,"url",function(){return this._url},function(a){this._url!=a&&(this._url=a,this.loadContent(),this.updateGear(7))});g(0,a,"align",function(){return this._align},function(a){this._align!=a&&(this._align=a,this.updateLayout())});g(0,a,"fill",function(){return this._fill},function(a){this._fill!=a&&(this._fill=a,this.updateLayout())});g(0,a,"verticalAlign",function(){return this._valign},function(a){this._valign!=a&&(this._valign=a,this.updateLayout())});g(0,a,"icon",function(){return this._url},function(a){this.url=a});g(0,a,"content",function(){return this._content});g(0,a,"shrinkOnly",function(){return this._shrinkOnly},function(a){this._shrinkOnly!=a&&(this._shrinkOnly=a,this.updateLayout())});g(0,a,"showErrorSign",function(){return this._showErrorSign},function(a){this._showErrorSign=a});g(0,a,"autoSize",function(){return this._autoSize},function(a){this._autoSize!=a&&(this._autoSize=a,this.updateLayout())});g(0,a,"playing",function(){return this._content.playing},function(a){this._content.playing!=a&&(this._content.playing=a,this.updateGear(5))});g(0,a,"timeScale",function(){return this._content.timeScale},function(a){this._content.timeScale=a});g(0,a,"color",function(){return this._content.color},function(a){this._content.color!=a&&(this._content.color=a,this.updateGear(4))});g(0,a,"component",function(){return this._content2});F(d,["_errorSignPool",function(){return this._errorSignPool=new ra}]);return d}(E),ka=function(c){function d(a){this._default=this._storage=null;d.__super.call(this,a)}var a;m(d,"fairygui.gears.GearSize",c);c=d.prototype;c.init=function(){this._default=new a(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY);this._storage={}};c.addStatus=function(b,e){var c;null==b?c=this._default:(c=new a,this._storage[b]=c);c.width=e.getInt32();c.height=e.getInt32();c.scaleX=e.getFloat32();c.scaleY=e.getFloat32()};c.apply=function(){var a=this._storage[this._controller.selectedPageId];a||(a=this._default);if(null==this._tweenConfig||!this._tweenConfig.tween||z._constructing||J.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setSize(a.width,a.height,this._owner.checkGearController(1,this._controller)),this._owner.setScale(a.scaleX,a.scaleY),this._owner._gearLocked=!1;else{if(null!=this._tweenConfig._tweener)if(this._tweenConfig._tweener.endValue.x!=a.width||this._tweenConfig._tweener.endValue.y!=a.height||this._tweenConfig._tweener.endValue.z!=a.scaleX||this._tweenConfig._tweener.endValue.w!=a.scaleY)this._tweenConfig._tweener.kill(!0),this._tweenConfig._tweener=null;else return;var e=a.width!=this._owner.width||a.height!=this._owner.height,c=a.scaleX!=this._owner.scaleX||a.scaleY!=this._owner.scaleY;if(e||c)this._owner.checkGearController(0,this._controller)&&(this._tweenConfig._displayLockToken=this._owner.addDisplayLock()),this._tweenConfig._tweener=B.to4(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY,a.width,a.height,a.scaleX,a.scaleY,this._tweenConfig.duration).setDelay(this._tweenConfig.delay).setEase(this._tweenConfig.easeType).setUserData((e?1:0)+(c?2:0)).setTarget(this).onUpdate(this.__tweenUpdate,this).onComplete(this.__tweenComplete,this)}};c.__tweenUpdate=function(a){var b=a.userData;this._owner._gearLocked=!0;0!=(b&1)&&this._owner.setSize(a.value.x,a.value.y,this._owner.checkGearController(1,this._controller));0!=(b&2)&&this._owner.setScale(a.value.z,a.value.w);this._owner._gearLocked=!1};c.__tweenComplete=function(){0!=this._tweenConfig._displayLockToken&&(this._owner.releaseDisplayLock(this._tweenConfig._displayLockToken),this._tweenConfig._displayLockToken=0);this._tweenConfig._tweener=null};c.updateState=function(){var b=this._storage[this._controller.selectedPageId];b||(b=new a,this._storage[this._controller.selectedPageId]=b);b.width=this._owner.width;b.height=this._owner.height;b.scaleX=this._owner.scaleX;b.scaleY=this._owner.scaleY};c.updateFromRelations=function(a,e){if(null!=this._controller&&null!=this._storage){for(var b in this._storage){var c=this._storage[b];c.width+=a;c.height+=e}this._default.width+=a;this._default.height+=e;this.updateState()}};d.__init$=function(){a=function(){function a(a,b,c,d){this.scaleY=this.scaleX=this.height=this.width=NaN;void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);this.width=a;this.height=b;this.scaleX=c;this.scaleY=d}m(a,"");return a}()};return d}(J),Ga=function(c){function d(a){this.pages=null;this._displayLockToken=this._visible=0;d.__super.call(this,a);this._displayLockToken=1}m(d,"fairygui.gears.GearDisplay",c);c=d.prototype;c.init=function(){this.pages=null};c.addLock=function(){this._visible++;return this._displayLockToken};c.releaseLock=function(a){a==this._displayLockToken&&this._visible--};c.apply=function(){this._displayLockToken++;0>=this._displayLockToken&&(this._displayLockToken=1);null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0};g(0,c,"connected",function(){return null==this._controller||0<this._visible});return d}(J),cb=function(c){function d(){this._titleType=this._value=this._max=0;this._reverse=!1;this._barObjectV=this._barObjectH=this._titleObject=null;this._barMaxHeightDelta=this._barMaxWidthDelta=this._barMaxHeight=this._barMaxWidth=0;this._clickPos=this._gripObject=null;this._barStartY=this._barStartX=this._clickPercent=0;this.canDrag=this.changeOnClick=!0;d.__super.call(this);this._titleType=0;this._value=50;this._max=100;this._clickPos=new laya.maths.Point}m(d,"fairygui.GSlider",c);var a=d.prototype;a.update=function(){this.updateWidthPercent(Math.min(this._value/this._max,1))};a.updateWidthPercent=function(a){if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*a)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max}var b=this.width-this._barMaxWidthDelta,c=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(b*a),this._barObjectH.x=this._barStartX+(b-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(c*a),this._barObjectV.y=this._barStartY+(c-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=Math.round(b*a)),this._barObjectV&&(this._barObjectV.height=Math.round(c*a)))};a.constructExtension=function(a){a.seek(0,6);this._titleType=a.readByte();this._reverse=a.readBool();this._titleObject=this.getChild("title");this._barObjectH=this.getChild("bar");this._barObjectV=this.getChild("bar_v");this._gripObject=this.getChild("grip");this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x);this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y);if(this._gripObject)this._gripObject.on("mousedown",this,this.__gripMouseDown);this.displayObject.on("mousedown",this,this.__barMouseDown)};a.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta);this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta);this._underConstruct||this.update()};a.setup_afterAdd=function(a,e){c.prototype.setup_afterAdd.call(this,a,e);a.seek(e,6)&&a.readByte()==this.packageItem.objectType&&(this._value=a.getInt32(),this._max=a.getInt32());this.update()};a.__gripMouseDown=function(a){this.canDrag=!0;a.stopPropagation();this._clickPos=this.globalToLocal(k.stage.mouseX,k.stage.mouseY);this._clickPercent=this._value/this._max;k.stage.on("mousemove",this,this.__gripMouseMove);k.stage.on("mouseup",this,this.__gripMouseUp)};a.__gripMouseMove=function(a){if(this.canDrag){var b=this.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.GSlider.sSilderHelperPoint),c=b.x-this._clickPos.x,b=b.y-this._clickPos.y;this._reverse&&(c=-c,b=-b);c=this._barObjectH?this._clickPercent+c/this._barMaxWidth:this._clickPercent+b/this._barMaxHeight;1<c?c=1:0>c&&(c=0);b=Math.round(this._max*c);b!=this._value&&(this._value=b,A.dispatch("fui_state_changed",this.displayObject,a));this.updateWidthPercent(c)}};a.__gripMouseUp=function(a){k.stage.off("mousemove",this,this.__gripMouseMove);k.stage.off("mouseup",this,this.__gripMouseUp)};a.__barMouseDown=function(a){if(this.changeOnClick){var b=this._gripObject.globalToLocal(a.stageX,a.stageY,fairygui.GSlider.sSilderHelperPoint),c=this._value/this._max,d=NaN;this._barObjectH&&(d=(b.x-this._gripObject.width/2)/this._barMaxWidth);this._barObjectV&&(d=(b.y-this._gripObject.height/2)/this._barMaxHeight);c=this._reverse?c-d:c+d;1<c?c=1:0>c&&(c=0);b=Math.round(this._max*c);b!=this._value&&(this._value=b,A.dispatch("fui_state_changed",this.displayObject,a));this.updateWidthPercent(c)}};g(0,a,"max",function(){return this._max},function(a){this._max!=a&&(this._max=a,this.update())});g(0,a,"titleType",function(){return this._titleType},function(a){this._titleType=a});g(0,a,"value",function(){return this._value},function(a){this._value!=a&&(this._value=a,this.update())});F(d,["sSilderHelperPoint",function(){return this.sSilderHelperPoint=new y}]);return d}(L),wa=function(c){function d(){this.itemProvider=this.itemRenderer=null;this.foldInvisibleItems=this.scrollItemToViewOnClick=!1;this._columnGap=this._lineGap=this._columnCount=this._lineCount=this._layout=0;this._defaultItem=null;this._autoResizeItem=!1;this._selectionMode=0;this._selectionController=this._verticalAlign=this._align=null;this._lastSelectedIndex=0;this._pool=null;this._loop=this._virtual=!1;this._curLineItemCount2=this._curLineItemCount=this._firstIndex=this._realNumItems=this._numItems=0;this._itemSize=null;this._virtualListChanged=0;this._virtualItems=null;this._eventLocked=!1;this.itemInfoVer=0;d.__super.call(this);this._trackBounds=!0;this._pool=new ra;this._layout=0;this._autoResizeItem=!0;this._lastSelectedIndex=-1;this._selectionMode=0;this.scrollItemToViewOnClick=this.opaque=!0;this._align="left";this._verticalAlign="top";this._container=new I;this._displayObject.addChild(this._container)}var a;m(d,"fairygui.GList",c);var b=d.prototype;b.dispose=function(){this._pool.clear();c.prototype.dispose.call(this)};b.getFromPool=function(a){a||(a=this._defaultItem);a=this._pool.getObject(a);null!=a&&(a.visible=!0);return a};b.returnToPool=function(a){a.displayObject.cacheAs="none";this._pool.returnObject(a)};b.addChildAt=function(a,b){void 0===b&&(b=0);c.prototype.addChildAt.call(this,a,b);a instanceof fairygui.GButton&&(a.selected=!1,a.changeStateOnClick=!1);a.on("click",this,this.__clickItem);return a};b.addItem=function(a){a||(a=this._defaultItem);return this.addChild(z.createObjectFromURL(a))};b.addItemFromPool=function(a){return this.addChild(this.getFromPool(a))};b.removeChildAt=function(a,b){void 0===b&&(b=!1);var e=c.prototype.removeChildAt.call(this,a);b?e.dispose():e.off("click",this,this.__clickItem);return e};b.removeChildToPoolAt=function(a){void 0===a&&(a=0);a=c.prototype.removeChildAt.call(this,a);this.returnToPool(a)};b.removeChildToPool=function(a){this.removeChild(a);this.returnToPool(a)};b.removeChildrenToPool=function(a,b){void 0===a&&(a=0);void 0===b&&(b=-1);if(0>b||b>=this._children.length)b=this._children.length-1;for(var e=a;e<=b;++e)this.removeChildToPoolAt(a)};b.getSelection=function(){var a=[],b;if(this._virtual)for(b=0;b<this._realNumItems;b++){var c=this._virtualItems[b];if(c.obj instanceof fairygui.GButton&&c.obj.selected||null==c.obj&&c.selected){c=b;if(this._loop&&(c=b%this._numItems,-1!=a.indexOf(c)))continue;a.push(c)}}else for(c=this._children.length,b=0;b<c;b++){var d=this._children[b].asButton;null!=d&&d.selected&&a.push(b)}return a};b.addSelection=function(a,b){void 0===b&&(b=!1);if(3!=this._selectionMode){this.checkVirtualList();0==this._selectionMode&&this.clearSelection();b&&this.scrollToView(a);this._lastSelectedIndex=a;var e=null;if(this._virtual){var c=this._virtualItems[a];null!=c.obj&&(e=c.obj.asButton);c.selected=!0}else e=this.getChildAt(a).asButton;null==e||e.selected||(e.selected=!0,this.updateSelectionController(a))}};b.removeSelection=function(a){if(3!=this._selectionMode){var b=null;this._virtual?(a=this._virtualItems[a],null!=a.obj&&(b=a.obj.asButton),a.selected=!1):b=this.getChildAt(a).asButton;null!=b&&(b.selected=!1)}};b.clearSelection=function(){var a;if(this._virtual)for(a=0;a<this._realNumItems;a++){var b=this._virtualItems[a];b.obj instanceof fairygui.GButton&&(b.obj.selected=!1);b.selected=!1}else for(b=this._children.length,a=0;a<b;a++){var c=this._children[a].asButton;null!=c&&(c.selected=!1)}};b.clearSelectionExcept=function(a){var b;if(this._virtual)for(b=0;b<this._realNumItems;b++){var e=this._virtualItems[b];e.obj!=a&&(e.obj instanceof fairygui.GButton&&(e.obj.selected=!1),e.selected=!1)}else for(e=this._children.length,b=0;b<e;b++){var c=this._children[b].asButton;null!=c&&c!=a&&(c.selected=!1)}};b.selectAll=function(){this.checkVirtualList();var a=-1,b;if(this._virtual)for(b=0;b<this._realNumItems;b++){var c=this._virtualItems[b];c.obj instanceof fairygui.GButton&&!c.obj.selected&&(c.obj.selected=!0,a=b);c.selected=!0}else for(c=this._children.length,b=0;b<c;b++){var d=this._children[b].asButton;null==d||d.selected||(d.selected=!0,a=b)}-1!=a&&this.updateSelectionController(a)};b.selectNone=function(){this.clearSelection()};b.selectReverse=function(){this.checkVirtualList();var a=-1,b;if(this._virtual)for(b=0;b<this._realNumItems;b++){var c=this._virtualItems[b];c.obj instanceof fairygui.GButton&&(c.obj.selected=!c.obj.selected,c.obj.selected&&(a=b));c.selected=!c.selected}else for(c=this._children.length,b=0;b<c;b++){var d=this._children[b].asButton;null!=d&&(d.selected=!d.selected,d.selected&&(a=b))}-1!=a&&this.updateSelectionController(a)};b.handleArrowKey=function(a){void 0===a&&(a=0);var b=this.selectedIndex;if(-1!=b)switch(a){case 1:if(0==this._layout||3==this._layout)b--,0<=b&&(this.clearSelection(),this.addSelection(b,!0));else if(2==this._layout||4==this._layout){a=this._children[b];for(var e=0,b=b-1;0<=b;b--){var c=this._children[b];if(c.y!=a.y){a=c;break}e++}for(;0<=b;b--)if(c=this._children[b],c.y!=a.y){this.clearSelection();this.addSelection(b+e+1,!0);break}}break;case 3:if(1==this._layout||2==this._layout||4==this._layout)b++,b<this._children.length&&(this.clearSelection(),this.addSelection(b,!0));else if(3==this._layout){a=this._children[b];for(var e=0,d=this._children.length,b=b+1;b<d;b++){c=this._children[b];if(c.x!=a.x){a=c;break}e++}for(;b<d;b++)if(c=this._children[b],c.x!=a.x){this.clearSelection();this.addSelection(b-e-1,!0);break}}break;case 5:if(0==this._layout||3==this._layout)b++,b<this._children.length&&(this.clearSelection(),this.addSelection(b,!0));else if(2==this._layout||4==this._layout){a=this._children[b];e=0;d=this._children.length;for(b+=1;b<d;b++){c=this._children[b];if(c.y!=a.y){a=c;break}e++}for(;b<d;b++)if(c=this._children[b],c.y!=a.y){this.clearSelection();this.addSelection(b-e-1,!0);break}}break;case 7:if(1==this._layout||2==this._layout||4==this._layout)b--,0<=b&&(this.clearSelection(),this.addSelection(b,!0));else if(3==this._layout){a=this._children[b];e=0;for(--b;0<=b;b--){c=this._children[b];if(c.x!=a.x){a=c;break}e++}for(;0<=b;b--)if(c=this._children[b],c.x!=a.x){this.clearSelection();this.addSelection(b+e+1,!0);break}}}};b.__clickItem=function(a){if(null==this._scrollPane||!this._scrollPane.isDragged){var b=E.cast(a.currentTarget);this.setSelectionOnEvent(b,a);this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(b,!0);this.displayObject.event("fui_click_item",[b,A.createEvent("fui_click_item",this.displayObject,a)])}};b.setSelectionOnEvent=function(a,b){if(a instanceof fairygui.GButton&&3!=this._selectionMode){var e=!1,c=this.childIndexToItemIndex(this.getChildIndex(a));if(0==this._selectionMode)a.selected||(this.clearSelectionExcept(a),a.selected=!0);else if(b.shiftKey){if(!a.selected)if(-1!=this._lastSelectedIndex){var f=Math.min(this._lastSelectedIndex,c),e=Math.max(this._lastSelectedIndex,c),e=Math.min(e,this.numItems-1);if(this._virtual)for(;f<=e;f++){var d=this._virtualItems[f];d.obj instanceof fairygui.GButton&&(d.obj.selected=!0);d.selected=!0}else for(;f<=e;f++)d=this.getChildAt(f).asButton,null!=d&&(d.selected=!0);e=!0}else a.selected=!0}else b.ctrlKey||2==this._selectionMode?a.selected=!a.selected:a.selected?this.clearSelectionExcept(a):(this.clearSelectionExcept(a),a.selected=!0);e||(this._lastSelectedIndex=c);a.selected&&this.updateSelectionController(c)}};b.resizeToFit=function(a,b){void 0===a&&(a=1E6);void 0===b&&(b=0);this.ensureBoundsCorrect();var e=this.numItems;a>e&&(a=e);if(this._virtual)e=Math.ceil(a/this._curLineItemCount),0==this._layout||2==this._layout?this.viewHeight=e*this._itemSize.y+Math.max(0,e-1)*this._lineGap:this.viewWidth=e*this._itemSize.x+Math.max(0,e-1)*this._columnGap;else if(0==a)0==this._layout||2==this._layout?this.viewHeight=b:this.viewWidth=b;else{for(var e=a-1,c=null;0<=e;){c=this.getChildAt(e);if(!this.foldInvisibleItems||c.visible)break;e--}0>e?0==this._layout||2==this._layout?this.viewHeight=b:this.viewWidth=b:0==this._layout||2==this._layout?(e=c.y+c.height,e<b&&(e=b),this.viewHeight=e):(e=c.x+c.width,e<b&&(e=b),this.viewWidth=e)}};b.getMaxItemWidth=function(){for(var a=this._children.length,b=0,c=0;c<a;c++){var d=this.getChildAt(c);d.width>b&&(b=d.width)}return b};b.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);this.setBoundsChangedFlag();this._virtual&&this.setVirtualListChangedFlag(!0)};b.handleControllerChanged=function(a){c.prototype.handleControllerChanged.call(this,a);this._selectionController==a&&(this.selectedIndex=a.selectedIndex)};b.updateSelectionController=function(a){if(null!=this._selectionController&&!this._selectionController.changing&&a<this._selectionController.pageCount){var b=this._selectionController;this._selectionController=null;b.selectedIndex=a;this._selectionController=b}};b.shouldSnapToNext=function(a,b,c){return 0>a&&b>p.defaultScrollSnappingThreshold*c||0<a&&b>(1-p.defaultScrollSnappingThreshold)*c||0==a&&b>c/2};b.getSnappingPositionWithDir=function(a,b,d,g,k){if(this._virtual){k||(k=new y);var e,f;0==this._layout||2==this._layout?(e=b,fairygui.GList.pos_param=b,f=this.getIndexOnPos1(!1),b=fairygui.GList.pos_param,f<this._virtualItems.length&&f<this._realNumItems&&(f=this._virtualItems[f].height,this.shouldSnapToNext(g,e-b,f)&&(b+=f+this._lineGap))):(1==this._layout||3==this._layout?(e=a,fairygui.GList.pos_param=a,f=this.getIndexOnPos2(!1)):(e=a,fairygui.GList.pos_param=a,f=this.getIndexOnPos3(!1)),a=fairygui.GList.pos_param,f<this._virtualItems.length&&f<this._realNumItems&&(f=this._virtualItems[f].width,this.shouldSnapToNext(d,e-a,f)&&(a+=f+this._columnGap)));k.x=a;k.y=b;return k}return c.prototype.getSnappingPositionWithDir.call(this,a,b,d,g,k)};b.scrollToView=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=!1);if(this._virtual){if(0!=this._numItems){this.checkVirtualList();if(a>=this._virtualItems.length)throw Error("Invalid child index: "+a+"\x3e"+this._virtualItems.length);this._loop&&(a=Math.floor(this._firstIndex/this._numItems)*this._numItems+a);c=this._virtualItems[a];var e=0,f;if(0==this._layout||2==this._layout){for(f=this._curLineItemCount-1;f<a;f+=this._curLineItemCount)e+=this._virtualItems[f].height+this._lineGap;a=new D(0,e,this._itemSize.x,c.height)}else if(1==this._layout||3==this._layout){for(f=this._curLineItemCount-1;f<a;f+=this._curLineItemCount)e+=this._virtualItems[f].width+this._columnGap;a=new D(e,0,c.width,this._itemSize.y)}else a=new D(a/(this._curLineItemCount*this._curLineItemCount2)*this.viewWidth+a%this._curLineItemCount*(c.width+this._columnGap),a/this._curLineItemCount%this._curLineItemCount2*(c.height+this._lineGap),c.width,c.height);null!=this._scrollPane&&this._scrollPane.scrollToView(a,b,!0)}}else a=this.getChildAt(a),null!=this._scrollPane?this._scrollPane.scrollToView(a,b,c):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(a,b,c)};b.getFirstChildInView=function(){return this.childIndexToItemIndex(c.prototype.getFirstChildInView.call(this))};b.childIndexToItemIndex=function(a){if(!this._virtual)return a;if(4==this._layout)for(var b=this._firstIndex;b<this._realNumItems;b++){if(null!=this._virtualItems[b].obj&&(a--,0>a))return b}else a+=this._firstIndex,this._loop&&0<this._numItems&&(a%=this._numItems);return a};b.itemIndexToChildIndex=function(a){if(!this._virtual)return a;if(4==this._layout)return this.getChildIndex(this._virtualItems[a].obj);if(this._loop&&0<this._numItems){var b=this._firstIndex%this._numItems;a=a>=b?a-b:this._numItems-b+a}else a-=this._firstIndex;return a};b.setVirtual=function(){this._setVirtual(!1)};b.setVirtualAndLoop=function(){this._setVirtual(!0)};b._setVirtual=function(a){if(!this._virtual){if(null==this._scrollPane)throw Error("Virtual list must be scrollable!");if(a){if(2==this._layout||3==this._layout)throw Error("Loop list is not supported for FlowHorizontal or FlowVertical layout!");this._scrollPane.bouncebackEffect=!1}this._virtual=!0;this._loop=a;this._virtualItems=[];this.removeChildrenToPool();if(null==this._itemSize){this._itemSize=new y;a=this.getFromPool(null);if(null==a)throw Error("Virtual List must have a default list item resource.");this._itemSize.x=a.width;this._itemSize.y=a.height;this.returnToPool(a)}0==this._layout||2==this._layout?(this._scrollPane.scrollStep=this._itemSize.y,this._loop&&(this._scrollPane._loop=2)):(this._scrollPane.scrollStep=this._itemSize.x,this._loop&&(this._scrollPane._loop=1));this.on("fui_scroll",this,this.__scrolled);this.setVirtualListChangedFlag(!0)}};b.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)};b.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),k.timer.clear(this,this._refreshVirtualList))};b.setVirtualListChangedFlag=function(a){void 0===a&&(a=!1);a?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1);k.timer.callLater(this,this._refreshVirtualList)};b._refreshVirtualList=function(){var a=2==this._virtualListChanged;this._virtualListChanged=0;this._eventLocked=!0;a&&(0==this._layout||1==this._layout?this._curLineItemCount=1:2==this._layout?0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),0>=this._curLineItemCount&&(this._curLineItemCount=1)):3==this._layout?0<this._lineCount?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),0>=this._curLineItemCount&&(this._curLineItemCount=1)):(0<this._columnCount?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),0>=this._curLineItemCount&&(this._curLineItemCount=1)),0<this._lineCount?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),0>=this._curLineItemCount2&&(this._curLineItemCount2=1))));var b=a=0;if(0<this._realNumItems){var c,d=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,g=Math.min(this._curLineItemCount,this._realNumItems);if(0==this._layout||2==this._layout){for(c=0;c<d;c+=this._curLineItemCount)a+=this._virtualItems[c].height+this._lineGap;0<a&&(a-=this._lineGap);if(this._autoResizeItem)b=this._scrollPane.viewWidth;else{for(c=0;c<g;c++)b+=this._virtualItems[c].width+this._columnGap;0<b&&(b-=this._columnGap)}}else if(1==this._layout||3==this._layout){for(c=0;c<d;c+=this._curLineItemCount)b+=this._virtualItems[c].width+this._columnGap;0<b&&(b-=this._columnGap);if(this._autoResizeItem)a=this._scrollPane.viewHeight;else{for(c=0;c<g;c++)a+=this._virtualItems[c].height+this._lineGap;0<a&&(a-=this._lineGap)}}else b=Math.ceil(d/(this._curLineItemCount*this._curLineItemCount2))*this.viewWidth,a=this.viewHeight}this.handleAlign(b,a);this._scrollPane.setContentSize(b,a);this._eventLocked=!1;this.handleScroll(!0)};b.__scrolled=function(a){this.handleScroll(!1)};b.getIndexOnPos1=function(a){if(this._realNumItems<this._curLineItemCount)return d.pos_param=0;var b,c;if(0<this.numChildren&&!a){b=this.getChildAt(0).y;if(b>d.pos_param){for(a=this._firstIndex-this._curLineItemCount;0<=a;a-=this._curLineItemCount)if(b-=this._virtualItems[a].height+this._lineGap,b<=d.pos_param)return d.pos_param=b,a;return d.pos_param=0}for(a=this._firstIndex;a<this._realNumItems;a+=this._curLineItemCount){c=b+this._virtualItems[a].height+this._lineGap;if(c>d.pos_param)return d.pos_param=b,a;b=c}d.pos_param=b;return this._realNumItems-this._curLineItemCount}for(a=b=0;a<this._realNumItems;a+=this._curLineItemCount){c=b+this._virtualItems[a].height+this._lineGap;if(c>d.pos_param)return d.pos_param=b,a;b=c}d.pos_param=b;return this._realNumItems-this._curLineItemCount};b.getIndexOnPos2=function(a){if(this._realNumItems<this._curLineItemCount)return d.pos_param=0;var b,c;if(0<this.numChildren&&!a){b=this.getChildAt(0).x;if(b>d.pos_param){for(a=this._firstIndex-this._curLineItemCount;0<=a;a-=this._curLineItemCount)if(b-=this._virtualItems[a].width+this._columnGap,b<=d.pos_param)return d.pos_param=b,a;return d.pos_param=0}for(a=this._firstIndex;a<this._realNumItems;a+=this._curLineItemCount){c=b+this._virtualItems[a].width+this._columnGap;if(c>d.pos_param)return d.pos_param=b,a;b=c}d.pos_param=b;return this._realNumItems-this._curLineItemCount}for(a=b=0;a<this._realNumItems;a+=this._curLineItemCount){c=b+this._virtualItems[a].width+this._columnGap;if(c>d.pos_param)return d.pos_param=b,a;b=c}d.pos_param=b;return this._realNumItems-this._curLineItemCount};b.getIndexOnPos3=function(a){if(this._realNumItems<this._curLineItemCount)return d.pos_param=0;var b=this.viewWidth,c=Math.floor(d.pos_param/b);a=c*this._curLineItemCount*this._curLineItemCount2;for(var b=c*b,e,c=0;c<this._curLineItemCount;c++){e=b+this._virtualItems[a+c].width+this._columnGap;if(e>d.pos_param)return d.pos_param=b,a+c;b=e}d.pos_param=b;return a+this._curLineItemCount-1};b.handleScroll=function(a){if(!this._eventLocked){if(0==this._layout||2==this._layout){for(var b=0;this.handleScroll1(a);)if(b++,a=!1,20<b){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder1()}else if(1==this._layout||3==this._layout){for(b=0;this.handleScroll2(a);)if(b++,a=!1,20<b){console.log("FairyGUI: list will never be filled as the item renderer function always returns a different size.");break}this.handleArchOrder2()}else this.handleScroll3(a);this._boundsChanged=!1}};b.handleScroll1=function(a){var b=this._scrollPane.scrollingPosY,c=b+this._scrollPane.viewHeight,e=c==this._scrollPane.contentHeight;fairygui.GList.pos_param=b;var d=this.getIndexOnPos1(a),b=fairygui.GList.pos_param;if(d==this._firstIndex&&!a)return!1;var g=this._firstIndex,h=this._firstIndex=d,k=g>d,m=this.numChildren,v=g+m-1,q=k?v:g,O=0,ea=b,w,p=b=0,x=this.defaultItem,u,t,y=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;h<this._realNumItems&&(e||ea<c);){u=this._virtualItems[h];if(null==u.obj||a)null!=this.itemProvider&&(x=this.itemProvider.runWith(h%this._numItems),null==x&&(x=this._defaultItem),x=z.normalizeURL(x)),null!=u.obj&&u.obj.resourceURL!=x&&(u.obj instanceof fairygui.GButton&&(u.selected=u.obj.selected),this.removeChildToPool(u.obj),u.obj=null);if(null==u.obj){if(k)for(t=q;t>=g;t--){if(w=this._virtualItems[t],null!=w.obj&&w.updateFlag!=this.itemInfoVer&&w.obj.resourceURL==x){w.obj instanceof fairygui.GButton&&(w.selected=w.obj.selected);u.obj=w.obj;w.obj=null;t==q&&q--;break}}else for(t=q;t<=v;t++)if(w=this._virtualItems[t],null!=w.obj&&w.updateFlag!=this.itemInfoVer&&w.obj.resourceURL==x){w.obj instanceof fairygui.GButton&&(w.selected=w.obj.selected);u.obj=w.obj;w.obj=null;t==q&&q++;break}null!=u.obj?this.setChildIndex(u.obj,k?h-d:this.numChildren):(u.obj=this._pool.getObject(x),k?this.addChildAt(u.obj,h-d):this.addChild(u.obj));u.obj instanceof fairygui.GButton&&(u.obj.selected=u.selected);w=!0}else w=a;w&&(this._autoResizeItem&&(0==this._layout||0<this._columnCount)&&u.obj.setSize(y,u.obj.height,!0),this.itemRenderer.runWith([h%this._numItems,u.obj]),0==h%this._curLineItemCount&&(b+=Math.ceil(u.obj.height)-u.height,h==d&&g>d&&(p=Math.ceil(u.obj.height)-u.height)),u.width=Math.ceil(u.obj.width),u.height=Math.ceil(u.obj.height));u.updateFlag=this.itemInfoVer;u.obj.setXY(O,ea);h==d&&(c+=u.height);O+=u.width+this._columnGap;h%this._curLineItemCount==this._curLineItemCount-1&&(O=0,ea+=u.height+this._lineGap);h++}for(a=0;a<m;a++)u=this._virtualItems[g+a],u.updateFlag!=this.itemInfoVer&&null!=u.obj&&(u.obj instanceof fairygui.GButton&&(u.selected=u.obj.selected),this.removeChildToPool(u.obj),u.obj=null);m=this._children.length;for(a=0;a<m;a++)g=this._virtualItems[d+a].obj,this._children[a]!=g&&this.setChildIndex(g,a);0==b&&0==p||this._scrollPane.changeContentSizeOnScrolling(0,b,0,p);return 0<h&&0<this.numChildren&&0>this._container.y&&this.getChildAt(0).y>-this._container.y?!0:!1};b.handleScroll2=function(a){var b=this._scrollPane.scrollingPosX,c=b+this._scrollPane.viewWidth,e=b==this._scrollPane.contentWidth;fairygui.GList.pos_param=b;var d=this.getIndexOnPos2(a),b=fairygui.GList.pos_param;if(d==this._firstIndex&&!a)return!1;var g=this._firstIndex,h=this._firstIndex=d,k=g>d,m=this.numChildren,v=g+m-1,q=k?v:g,t=b,p=0,w,y=b=0,x=this.defaultItem,u,A,B=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(this.itemInfoVer++;h<this._realNumItems&&(e||t<c);){u=this._virtualItems[h];if(null==u.obj||a)null!=this.itemProvider&&(x=this.itemProvider.runWith(h%this._numItems),null==x&&(x=this._defaultItem),x=z.normalizeURL(x)),null!=u.obj&&u.obj.resourceURL!=x&&(u.obj instanceof fairygui.GButton&&(u.selected=u.obj.selected),this.removeChildToPool(u.obj),u.obj=null);if(null==u.obj){if(k)for(A=q;A>=g;A--){if(w=this._virtualItems[A],null!=w.obj&&w.updateFlag!=this.itemInfoVer&&w.obj.resourceURL==x){w.obj instanceof fairygui.GButton&&(w.selected=w.obj.selected);u.obj=w.obj;w.obj=null;A==q&&q--;break}}else for(A=q;A<=v;A++)if(w=this._virtualItems[A],null!=w.obj&&w.updateFlag!=this.itemInfoVer&&w.obj.resourceURL==x){w.obj instanceof fairygui.GButton&&(w.selected=w.obj.selected);u.obj=w.obj;w.obj=null;A==q&&q++;break}null!=u.obj?this.setChildIndex(u.obj,k?h-d:this.numChildren):(u.obj=this._pool.getObject(x),k?this.addChildAt(u.obj,h-d):this.addChild(u.obj));u.obj instanceof fairygui.GButton&&(u.obj.selected=u.selected);w=!0}else w=a;w&&(this._autoResizeItem&&(1==this._layout||0<this._lineCount)&&u.obj.setSize(u.obj.width,B,!0),this.itemRenderer.runWith([h%this._numItems,u.obj]),0==h%this._curLineItemCount&&(b+=Math.ceil(u.obj.width)-u.width,h==d&&g>d&&(y=Math.ceil(u.obj.width)-u.width)),u.width=Math.ceil(u.obj.width),u.height=Math.ceil(u.obj.height));u.updateFlag=this.itemInfoVer;u.obj.setXY(t,p);h==d&&(c+=u.width);p+=u.height+this._lineGap;h%this._curLineItemCount==this._curLineItemCount-1&&(p=0,t+=u.width+this._columnGap);h++}for(a=0;a<m;a++)u=this._virtualItems[g+a],u.updateFlag!=this.itemInfoVer&&null!=u.obj&&(u.obj instanceof fairygui.GButton&&(u.selected=u.obj.selected),this.removeChildToPool(u.obj),u.obj=null);m=this._children.length;for(a=0;a<m;a++)g=this._virtualItems[d+a].obj,this._children[a]!=g&&this.setChildIndex(g,a);0==b&&0==y||this._scrollPane.changeContentSizeOnScrolling(b,0,y,0);return 0<h&&0<this.numChildren&&0>this._container.x&&this.getChildAt(0).x>-this._container.x?!0:!1};b.handleScroll3=function(a){fairygui.GList.pos_param=this._scrollPane.scrollingPosX;var b=this.getIndexOnPos3(a);if(b!=this._firstIndex||a){var c=this._firstIndex;this._firstIndex=b;var e=this._virtualItems.length,d=this._curLineItemCount*this._curLineItemCount2,g=b%this._curLineItemCount,h=this.viewWidth,b=Math.floor(b/d)*d,k=b+2*d,m,v,q,t=this._defaultItem,p=(this._scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,w=(this._scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;this.itemInfoVer++;for(v=b;v<k;v++)if(!(v>=this._realNumItems)){q=v%this._curLineItemCount;if(v-b<d){if(q<g)continue}else if(q>g)continue;q=this._virtualItems[v];q.updateFlag=this.itemInfoVer}var g=null,y=0;for(v=b;v<k;v++)if(!(v>=this._realNumItems)&&(q=this._virtualItems[v],q.updateFlag==this.itemInfoVer)){if(null==q.obj){for(;c<e;){m=this._virtualItems[c];if(null!=m.obj&&m.updateFlag!=this.itemInfoVer){m.obj instanceof fairygui.GButton&&(m.selected=m.obj.selected);q.obj=m.obj;m.obj=null;break}c++}-1==y&&(y=this.getChildIndex(g)+1);null==q.obj?(null!=this.itemProvider&&(t=this.itemProvider.runWith(v%this._numItems),null==t&&(t=this._defaultItem),t=z.normalizeURL(t)),q.obj=this._pool.getObject(t),this.addChildAt(q.obj,y)):y=this.setChildIndexBefore(q.obj,y);y++;q.obj instanceof fairygui.GButton&&(q.obj.selected=q.selected);m=!0}else m=a,y=-1,g=q.obj;m&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?q.obj.setSize(p,w,!0):this._curLineItemCount==this._columnCount?q.obj.setSize(p,q.obj.height,!0):this._curLineItemCount2==this._lineCount&&q.obj.setSize(q.obj.width,w,!0)),this.itemRenderer.runWith([v%this._numItems,q.obj]),q.width=Math.ceil(q.obj.width),q.height=Math.ceil(q.obj.height))}t=a=b/d*h;w=p=0;for(v=b;v<k;v++)v>=this._realNumItems||(q=this._virtualItems[v],q.updateFlag==this.itemInfoVer&&q.obj.setXY(t,p),q.height>w&&(w=q.height),v%this._curLineItemCount==this._curLineItemCount-1?(t=a,p+=w+this._lineGap,w=0,v==b+d-1&&(t=a+=h,p=0)):t+=q.width+this._columnGap);for(v=c;v<e;v++)q=this._virtualItems[v],q.updateFlag!=this.itemInfoVer&&null!=q.obj&&(q.obj instanceof fairygui.GButton&&(q.selected=q.obj.selected),this.removeChildToPool(q.obj),q.obj=null)}};b.handleArchOrder1=function(){if(2==this.childrenRenderOrder){for(var a=this._scrollPane.posY+this.viewHeight/2,b=Number.POSITIVE_INFINITY,c,d=0,g=this.numChildren,l=0;l<g;l++)if(c=this.getChildAt(l),!this.foldInvisibleItems||c.visible)c=Math.abs(a-c.y-c.height/2),c<b&&(b=c,d=l);this.apexIndex=d}};b.handleArchOrder2=function(){if(2==this.childrenRenderOrder){for(var a=this._scrollPane.posX+this.viewWidth/2,b=Number.POSITIVE_INFINITY,c,d=0,g=this.numChildren,l=0;l<g;l++)if(c=this.getChildAt(l),!this.foldInvisibleItems||c.visible)c=Math.abs(a-c.x-c.width/2),c<b&&(b=c,d=l);this.apexIndex=d}};b.handleAlign=function(a,b){var c=0,e=0;b<this.viewHeight&&("middle"==this._verticalAlign?e=Math.floor((this.viewHeight-b)/2):"bottom"==this._verticalAlign&&(e=this.viewHeight-b));a<this.viewWidth&&("center"==this._align?c=Math.floor((this.viewWidth-a)/2):"right"==this._align&&(c=this.viewWidth-a));if(c!=this._alignOffset.x||e!=this._alignOffset.y)this._alignOffset.setTo(c,e),null!=this._scrollPane?this._scrollPane.adjustMaskContainer():this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y)};b.updateBounds=function(){if(!this._virtual){var a,b,c=0,d=0,g=0,l=0,h=0,k=0,m=0,v=this._children.length,q=this.viewWidth,t=this.viewHeight,p=0,w=0;if(0==this._layout){for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible)0!=d&&(d+=this._lineGap),b.y=d,this._autoResizeItem&&b.setSize(q,b.height,!0),d+=Math.ceil(b.height),b.width>g&&(g=b.width);g=Math.ceil(g)}else if(1==this._layout){for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible)0!=c&&(c+=this._columnGap),b.x=c,this._autoResizeItem&&b.setSize(b.width,t,!0),c+=Math.ceil(b.width),b.height>l&&(l=b.height);g=c;d=Math.ceil(l)}else if(2==this._layout)if(this._autoResizeItem&&0<this._columnCount){for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible)if(p+=b.sourceWidth,h++,h==this._columnCount||a==v-1){p=(q-p-(h-1)*this._columnGap)/p;c=0;for(h=w;h<=a;h++)if(b=this.getChildAt(h),!this.foldInvisibleItems||b.visible)b.setXY(c,d),h<a?(b.setSize(b.sourceWidth+Math.round(b.sourceWidth*p),b.height,!0),c+=Math.ceil(b.width)+this._columnGap):b.setSize(q-c,b.height,!0),b.height>l&&(l=b.height);d+=Math.ceil(l)+this._lineGap;h=l=0;w=a+1;p=0}d+=Math.ceil(l);g=q}else{for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible){0!=c&&(c+=this._columnGap);if(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&c+b.width>q&&0!=l)c=0,d+=Math.ceil(l)+this._lineGap,h=l=0;b.setXY(c,d);c+=Math.ceil(b.width);c>g&&(g=c);b.height>l&&(l=b.height);h++}d+=Math.ceil(l);g=Math.ceil(g)}else if(3==this._layout)if(this._autoResizeItem&&0<this._lineCount){for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible)if(p+=b.sourceHeight,h++,h==this._lineCount||a==v-1){p=(t-p-(h-1)*this._lineGap)/p;d=0;for(h=w;h<=a;h++)if(b=this.getChildAt(h),!this.foldInvisibleItems||b.visible)b.setXY(c,d),h<a?(b.setSize(b.width,b.sourceHeight+Math.round(b.sourceHeight*p),!0),d+=Math.ceil(b.height)+this._lineGap):b.setSize(b.width,t-d,!0),b.width>g&&(g=b.width);c+=Math.ceil(g)+this._columnGap;h=g=0;w=a+1;p=0}g=c+Math.ceil(g);d=t}else{for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible){0!=d&&(d+=this._lineGap);if(0!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&d+b.height>t&&0!=g)d=0,c+=Math.ceil(g)+this._columnGap,h=g=0;b.setXY(c,d);d+=Math.ceil(b.height);d>l&&(l=d);b.width>g&&(g=b.width);h++}g=c+Math.ceil(g);d=Math.ceil(l)}else{var y=0;this._autoResizeItem&&0<this._lineCount&&(y=Math.floor((t-(this._lineCount-1)*this._lineGap)/this._lineCount));if(this._autoResizeItem&&0<this._columnCount)for(a=0;a<v;a++){if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible)if(0==h&&(0!=this._lineCount&&m>=this._lineCount||0==this._lineCount&&d+b.height>t)&&(k++,m=d=0),p+=b.sourceWidth,h++,h==this._columnCount||a==v-1){p=(q-p-(h-1)*this._columnGap)/p;c=0;for(h=w;h<=a;h++)if(b=this.getChildAt(h),!this.foldInvisibleItems||b.visible)b.setXY(k*q+c,d),h<a?(b.setSize(b.sourceWidth+Math.round(b.sourceWidth*p),0<this._lineCount?y:b.height,!0),c+=Math.ceil(b.width)+this._columnGap):b.setSize(q-c,0<this._lineCount?y:b.height,!0),b.height>l&&(l=b.height);d+=Math.ceil(l)+this._lineGap;h=l=0;w=a+1;p=0;m++}}else for(a=0;a<v;a++)if(b=this.getChildAt(a),!this.foldInvisibleItems||b.visible){0!=c&&(c+=this._columnGap);this._autoResizeItem&&0<this._lineCount&&b.setSize(b.width,y,!0);if(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&c+b.width>q&&0!=l)if(c=0,d+=Math.ceil(l)+this._lineGap,h=l=0,m++,0!=this._lineCount&&m>=this._lineCount||0==this._lineCount&&d+b.height>t&&0!=g)k++,m=d=0;b.setXY(k*q+c,d);c+=Math.ceil(b.width);c>g&&(g=c);b.height>l&&(l=b.height);h++}d=0<k?t:d+Math.ceil(l);g=(k+1)*q}this.handleAlign(g,d);this.setBounds(0,0,g,d)}};b.setup_beforeAdd=function(a,b){fairygui.GObject.prototype.setup_beforeAdd.call(this,a,b);a.seek(b,5);var c,e,d,f,g;this._layout=a.readByte();this._selectionMode=a.readByte();c=a.readByte();this._align=0==c?"left":1==c?"center":"right";c=a.readByte();this._verticalAlign=0==c?"top":1==c?"middle":"bottom";this._lineGap=a.getInt16();this._columnGap=a.getInt16();this._lineCount=a.getInt16();this._columnCount=a.getInt16();this._autoResizeItem=a.readBool();this._childrenRenderOrder=a.readByte();this._apexIndex=a.getInt16();a.readBool()&&(this._margin.top=a.getInt32(),this._margin.bottom=a.getInt32(),this._margin.left=a.getInt32(),this._margin.right=a.getInt32());c=a.readByte();2==c?(c=a.pos,a.seek(b,7),this.setupScroll(a),a.pos=c):this.setupOverflow(c);a.readBool()&&a.skip(8);a.seek(b,8);this._defaultItem=a.readS();var k=a.getInt16();for(c=0;c<k;c++){f=a.getInt16();f+=a.pos;g=a.readS();if(null==g&&(g=this.defaultItem,!g)){a.pos=f;continue}var m=this.getFromPool(g);if(null!=m&&(this.addChild(m),g=a.readS(),null!=g&&(m.text=g),g=a.readS(),null!=g&&m instanceof fairygui.GButton&&(m.selectedTitle=g),g=a.readS(),null!=g&&(m.icon=g),g=a.readS(),null!=g&&m instanceof fairygui.GButton&&(m.selectedIcon=g),g=a.readS(),null!=g&&(m.name=g),m instanceof fairygui.GComponent))for(d=a.getInt16(),e=0;e<d;e++){var v=m.getController(a.readS());g=a.readS();null!=v&&(v.selectedPageId=g)}a.pos=f}};b.setup_afterAdd=function(a,b){c.prototype.setup_afterAdd.call(this,a,b);a.seek(b,6);var e=a.getInt16();-1!=e&&(this._selectionController=this.parent.getControllerAt(e))};g(0,b,"layout",function(){return this._layout},function(a){this._layout!=a&&(this._layout=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"align",function(){return this._align},function(a){this._align!=a&&(this._align=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"lineCount",function(){return this._lineCount},function(a){this._lineCount!=a&&(this._lineCount=a,3==this._layout||4==this._layout)&&(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"columnCount",function(){return this._columnCount},function(a){this._columnCount!=a&&(this._columnCount=a,2==this._layout||4==this._layout)&&(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"lineGap",function(){return this._lineGap},function(a){this._lineGap!=a&&(this._lineGap=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"columnGap",function(){return this._columnGap},function(a){this._columnGap!=a&&(this._columnGap=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"verticalAlign",function(){return this._verticalAlign},function(a){this._verticalAlign!=a&&(this._verticalAlign=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"virtualItemSize",function(){return this._itemSize},function(a){this._virtual&&(null==this._itemSize&&(this._itemSize=new y),this._itemSize.setTo(a.x,a.y),this.setVirtualListChangedFlag(!0))});g(0,b,"defaultItem",function(){return this._defaultItem},function(a){this._defaultItem=a});g(0,b,"autoResizeItem",function(){return this._autoResizeItem},function(a){this._autoResizeItem!=a&&(this._autoResizeItem=a,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))});g(0,b,"selectionMode",function(){return this._selectionMode},function(a){this._selectionMode=a});g(0,b,"selectionController",function(){return this._selectionController},function(a){this._selectionController=a});g(0,b,"itemPool",function(){return this._pool});g(0,b,"selectedIndex",function(){var a;if(this._virtual)for(a=0;a<this._realNumItems;a++){var b=this._virtualItems[a];if(b.obj instanceof fairygui.GButton&&b.obj.selected||null==b.obj&&b.selected)return this._loop?a%this._numItems:a}else for(b=this._children.length,a=0;a<b;a++){var c=this._children[a].asButton;if(null!=c&&c.selected)return a}return-1},function(a){0<=a&&a<this.numItems?(0!=this._selectionMode&&this.clearSelection(),this.addSelection(a)):this.clearSelection()});g(0,b,"numItems",function(){return this._virtual?this._numItems:this._children.length},function(b){var c;if(this._virtual){if(null==this.itemRenderer)throw Error("Set itemRenderer first!");this._numItems=b;this._realNumItems=this._loop?6*this._numItems:this._numItems;b=this._virtualItems.length;if(this._realNumItems>b)for(c=b;c<this._realNumItems;c++)b=new a,b.width=this._itemSize.x,b.height=this._itemSize.y,this._virtualItems.push(b);else for(c=this._realNumItems;c<b;c++)this._virtualItems[c].selected=!1;0!=this._virtualListChanged&&k.timer.clear(this,this._refreshVirtualList);this._refreshVirtualList()}else{c=this._children.length;if(b>c)for(;c<b;c++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.runWith(c));else this.removeChildrenToPool(b,c);if(null!=this.itemRenderer)for(c=0;c<b;c++)this.itemRenderer.runWith([c,this.getChildAt(c)])}});d.pos_param=NaN;d.__init$=function(){a=function(){function a(){this.height=this.width=0;this.obj=null;this.updateFlag=0;this.selected=!1}m(a,"");return a}()};return d}(L),ab=function(c){function d(){this._iconObject=this._titleObject=null;d.__super.call(this)}m(d,"fairygui.GLabel",c);var a=d.prototype;k.imps(a,{"fairygui.gears.IColorGear":!0});a.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null};a.constructExtension=function(a){this._titleObject=this.getChild("title");this._iconObject=this.getChild("icon")};a.setup_afterAdd=function(a,e){c.prototype.setup_afterAdd.call(this,a,e);if(a.seek(e,6)&&a.readByte()==this.packageItem.objectType){var b;b=a.readS();null!=b&&(this.title=b);b=a.readS();null!=b&&(this.icon=b);a.readBool()&&(this.titleColor=a.readColorS());b=a.getInt32();0!=b&&(this.titleFontSize=b);if(a.readBool()){var d=this.getTextField();null!=d?(b=a.readS(),null!=b&&(d.promptText=b),b=a.readS(),null!=b&&(d.restrict=b),b=a.getInt32(),0!=b&&(d.maxLength=b),b=a.getInt32(),0!=b&&(4==b?d.keyboardType="number":3==b&&(d.keyboardType="url")),a.readBool()&&(d.password=!0)):a.skip(13)}}};g(0,a,"color",function(){return this.titleColor},function(a){this.titleColor=a});g(0,a,"icon",function(){return null!=this._iconObject?this._iconObject.icon:null},function(a){null!=this._iconObject&&(this._iconObject.icon=a);this.updateGear(7)});g(0,a,"editable",function(){return this._titleObject&&this._titleObject instanceof fairygui.GTextInput?this._titleObject.asTextInput.editable:!1},function(a){this._titleObject&&(this._titleObject.asTextInput.editable=a)});g(0,a,"title",function(){return this._titleObject?this._titleObject.text:null},function(a){this._titleObject&&(this._titleObject.text=a);this.updateGear(6)});g(0,a,"text",function(){return this.title},function(a){this.title=a});g(0,a,"titleColor",function(){var a=this.getTextField();return null!=a?a.color:"#000000"},function(a){var b=this.getTextField();null!=b&&(b.color=a);this.updateGear(4)});g(0,a,"titleFontSize",function(){var a=this.getTextField();return null!=a?a.fontSize:0},function(a){var b=this.getTextField();null!=b&&(b.fontSize=a)});return d}(L),bb=function(c){function d(){this._titleType=this._value=this._max=0;this._reverse=!1;this._barObjectV=this._barObjectH=this._aniObject=this._titleObject=null;this._barStartY=this._barStartX=this._barMaxHeightDelta=this._barMaxWidthDelta=this._barMaxHeight=this._barMaxWidth=0;d.__super.call(this);this._titleType=0;this._value=50;this._max=100}m(d,"fairygui.GProgressBar",c);var a=d.prototype;a.tweenValue=function(a,c){var b,e=B.getTween(this,this.update);null!=e?(b=e.value.x,e.kill()):b=this._value;this._value=a;return B.to(b,this._value,c).setTarget(this,this.update).setEase(0)};a.update=function(a){var b=0!=this._max?Math.min(a/this._max,1):0;if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*b)+"%";break;case 1:this._titleObject.text=Math.round(a)+"/"+Math.round(this._max);break;case 2:this._titleObject.text=""+Math.round(a);break;case 3:this._titleObject.text=""+Math.round(this._max)}a=this.width-this._barMaxWidthDelta;var c=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH instanceof fairygui.GImage&&0!=this._barObjectH.fillMethod?this._barObjectH.fillAmount=1-b:(this._barObjectH.width=Math.round(a*b),this._barObjectH.x=this._barStartX+(a-this._barObjectH.width))),this._barObjectV&&(this._barObjectV instanceof fairygui.GImage&&0!=this._barObjectV.fillMethod?this._barObjectV.fillAmount=1-b:(this._barObjectV.height=Math.round(c*b),this._barObjectV.y=this._barStartY+(c-this._barObjectV.height)))):(this._barObjectH&&(this._barObjectH instanceof fairygui.GImage&&0!=this._barObjectH.fillMethod?this._barObjectH.fillAmount=b:this._barObjectH.width=Math.round(a*b)),this._barObjectV&&(this._barObjectV instanceof fairygui.GImage&&0!=this._barObjectV.fillMethod?this._barObjectV.fillAmount=b:this._barObjectV.height=Math.round(c*b)));this._aniObject instanceof fairygui.GMovieClip&&(this._aniObject.frame=Math.round(100*b))};a.constructExtension=function(a){a.seek(0,6);this._titleType=a.readByte();this._reverse=a.readBool();this._titleObject=this.getChild("title");this._barObjectH=this.getChild("bar");this._barObjectV=this.getChild("bar_v");this._aniObject=this.getChild("ani");this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x);this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)};a.handleSizeChanged=function(){c.prototype.handleSizeChanged.call(this);this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta);this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta);this._underConstruct||this.update(this._value)};a.setup_afterAdd=function(a,e){c.prototype.setup_afterAdd.call(this,a,e);a.seek(e,6)&&a.readByte()==this.packageItem.objectType&&(this._value=a.getInt32(),this._max=a.getInt32());this.update(this._value)};g(0,a,"max",function(){return this._max},function(a){this._max!=a&&(this._max=a,this.update(this._value))});g(0,a,"titleType",function(){return this._titleType},function(a){this._titleType!=a&&(this._titleType=a,this.update(this._value))});g(0,a,"value",function(){return this._value},function(a){this._value!=a&&(B.kill(this,!1,this.update),this._value=a,this.update(this._value))});return d}(L),db=function(c){function d(){this._target=this._bar=this._arrowButton2=this._arrowButton1=this._grip=null;this._vertical=!1;this._scrollPerc=0;this._fixedGripSize=!1;this._dragOffset=null;d.__super.call(this);this._dragOffset=new laya.maths.Point;this._scrollPerc=0}m(d,"fairygui.GScrollBar",c);c=d.prototype;c.setScrollPane=function(a,b){this._target=a;this._vertical=b};c.constructExtension=function(a){a.seek(0,6);this._fixedGripSize=a.readBool();if(this._grip=this.getChild("grip"))if(this._bar=this.getChild("bar")){this._arrowButton1=this.getChild("arrow1");this._arrowButton2=this.getChild("arrow2");this._grip.on("mousedown",this,this.__gripMouseDown);if(this._arrowButton1)this._arrowButton1.on("mousedown",this,this.__arrowButton1Click);if(this._arrowButton2)this._arrowButton2.on("mousedown",this,this.__arrowButton2Click);this.on("mousedown",this,this.__barMouseDown)}else R.print("\u9700\u8981\u5b9a\u4e49bar");else R.print("\u9700\u8981\u5b9a\u4e49grip")};c.__gripMouseDown=function(a){this._bar&&(a.stopPropagation(),k.stage.on("mousemove",this,this.__gripMouseMove),k.stage.on("mouseup",this,this.__gripMouseUp),this.globalToLocal(k.stage.mouseX,k.stage.mouseY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y)};c.__gripMouseMove=function(){var a=this.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);this._vertical?this._target.setPercY((a.y-this._dragOffset.y-this._bar.y)/(this._bar.height-this._grip.height),!1):this._target.setPercX((a.x-this._dragOffset.x-this._bar.x)/(this._bar.width-this._grip.width),!1)};c.__gripMouseUp=function(a){this._bar&&(k.stage.off("mousemove",this,this.__gripMouseMove),k.stage.off("mouseup",this,this.__gripMouseUp))};c.__arrowButton1Click=function(a){a.stopPropagation();this._vertical?this._target.scrollUp():this._target.scrollLeft()};c.__arrowButton2Click=function(a){a.stopPropagation();this._vertical?this._target.scrollDown():this._target.scrollRight()};c.__barMouseDown=function(a){a=this._grip.globalToLocal(k.stage.mouseX,k.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);this._vertical?0>a.y?this._target.scrollUp(4):this._target.scrollDown(4):0>a.x?this._target.scrollLeft(4):this._target.scrollRight(4)};g(0,c,"displayPerc",null,function(a){this._vertical?(this._fixedGripSize||(this._grip.height=a*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=a*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)});g(0,c,"scrollPerc",null,function(a){this._scrollPerc=a;this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc});g(0,c,"minSize",function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)});F(d,["sScrollbarHelperPoint",function(){return this.sScrollbarHelperPoint=new y}]);return d}(L);(function(c){function d(){this._frame=this._contentArea=this._dragArea=this._closeButton=this._modalWaitPane=this._contentPane=null;this._modal=!1;this._uiSources=null;this._loading=this._inited=!1;this._requestingCmd=0;this.bringToFontOnClick=!1;d.__super.call(this);this.focusable=!0;this._uiSources=[];this.bringToFontOnClick=p.bringWindowToFrontOnClick;this.displayObject.on("display",this,this.__onShown);this.displayObject.on("undisplay",this,this.__onHidden);this.displayObject.on("mousedown",this,this.__mouseDown)}m(d,"fairygui.Window",c,"Window$2");var a=d.prototype;a.addUISource=function(a){this._uiSources.push(a)};a.show=function(){C.inst.showWindow(this)};a.showOn=function(a){a.showWindow(this)};a.hide=function(){this.isShowing&&this.doHideAnimation()};a.hideImmediately=function(){var a=this.parent instanceof fairygui.GRoot?this.parent:null;a||(a=C.inst);a.hideWindowImmediately(this)};a.centerOn=function(a,c){void 0===c&&(c=!1);this.setXY(Math.round((a.width-this.width)/2),Math.round((a.height-this.height)/2));c&&(this.addRelation(a,3),this.addRelation(a,10))};a.toggleStatus=function(){this.isTop?this.hide():this.show()};a.bringToFront=function(){this.root.bringToFront(this)};a.showModalWait=function(a){void 0===a&&(a=0);0!=a&&(this._requestingCmd=a);p.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=z.createObjectFromURL(p.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))};a.layoutModalWaitPane=function(){if(null!=this._contentArea){var a=this._frame.localToGlobal(),a=this.globalToLocal(a.x,a.y,a);this._modalWaitPane.setXY(a.x+this._contentArea.x,a.y+this._contentArea.y);this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)};a.closeModalWait=function(a){void 0===a&&(a=0);if(0!=a&&this._requestingCmd!=a)return!1;this._requestingCmd=0;this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane);return!0};a.init=function(){if(!this._inited&&!this._loading)if(0<this._uiSources.length){this._loading=!1;for(var a=this._uiSources.length,c=0;c<a;c++){var d=this._uiSources[c];d.loaded||(d.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()};a.onInit=function(){};a.onShown=function(){};a.onHide=function(){};a.doShowAnimation=function(){this.onShown()};a.doHideAnimation=function(){this.hideImmediately()};a.__uiLoadComplete=function(){for(var a=this._uiSources.length,c=0;c<a;c++)if(!this._uiSources[c].loaded)return;this._loading=!1;this._init()};a._init=function(){this._inited=!0;this.onInit();this.isShowing&&this.doShowAnimation()};a.dispose=function(){null!=this.parent&&this.hideImmediately();c.prototype.dispose.call(this)};a.closeEventHandler=function(){this.hide()};a.__onShown=function(){this._inited?this.doShowAnimation():this.init()};a.__onHidden=function(){this.closeModalWait();this.onHide()};a.__mouseDown=function(){this.isShowing&&this.bringToFontOnClick&&this.bringToFront()};a.__dragStart=function(a){E.cast(a.currentTarget).stopDrag();this.startDrag()};g(0,a,"contentPane",function(){return this._contentPane},function(a){this._contentPane!=a&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=a,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,24),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))});g(0,a,"isShowing",function(){return null!=this.parent});g(0,a,"isTop",function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1});g(0,a,"modal",function(){return this._modal},function(a){this._modal=a});g(0,a,"dragArea",function(){return this._dragArea},function(a){this._dragArea!=a&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.off("fui_drag_start",this,this.__dragStart)),this._dragArea=a,null!=this._dragArea&&(this._dragArea instanceof fairygui.GGraph&&this._dragArea.asGraph.drawRect(0,null,null),this._dragArea.draggable=!0,this._dragArea.on("fui_drag_start",this,this.__dragStart)))});g(0,a,"frame",function(){return this._frame});g(0,a,"closeButton",function(){return this._closeButton},function(a){null!=this._closeButton&&this._closeButton.offClick(this,this.closeEventHandler);this._closeButton=a;if(null!=this._closeButton)this._closeButton.onClick(this,this.closeEventHandler)});g(0,a,"contentArea",function(){return this._contentArea},function(a){this._contentArea=a});g(0,a,"modalWaiting",function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent});return d})(L);var C=function(c){function d(){this._defaultTooltipWin=this._tooltipWin=this._focusedObject=this._modalWaitPane=this._justClosedPopups=this._popupStack=this._modalLayer=null;this._checkPopups=!1;d.__super.call(this);null==fairygui.GRoot._inst&&(fairygui.GRoot._inst=this);this.opaque=!1;this._popupStack=[];this._justClosedPopups=[];this.displayObject.once("display",this,this.__addedToStage)}m(d,"fairygui.GRoot",c);c=d.prototype;c.showWindow=function(a){this.addChild(a);a.requestFocus();a.x>this.width?a.x=this.width-a.width:0>a.x+a.width&&(a.x=0);a.y>this.height?a.y=this.height-a.height:0>a.y+a.height&&(a.y=0);this.adjustModalLayer()};c.hideWindow=function(a){a.hide()};c.hideWindowImmediately=function(a){a.parent==this&&this.removeChild(a);this.adjustModalLayer()};c.bringToFront=function(a){for(var b=this.numChildren,b=null==this._modalLayer.parent||a.modal?b-1:this.getChildIndex(this._modalLayer)-1;0<=b;b--){var c=this.getChildAt(b);if(c==a)return;if(c instanceof fairygui.Window)break}0<=b&&this.setChildIndex(a,b)};c.showModalWait=function(a){null!=p.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=z.createObjectFromURL(p.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,24),this.addChild(this._modalWaitPane),this._modalWaitPane.text=a)};c.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)};c.closeAllExceptModals=function(){for(var a=this._children.slice(),b=a.length,c=0;c<b;c++){var d=a[c];d instanceof fairygui.Window&&!d.modal&&d.hide()}};c.closeAllWindows=function(){for(var a=this._children.slice(),b=a.length,c=0;c<b;c++){var d=a[c];d instanceof fairygui.Window&&d.hide()}};c.getTopWindow=function(){for(var a=this.numChildren-1;0<=a;a--){var b=this.getChildAt(a);if(b instanceof fairygui.Window)return b}return null};c.showPopup=function(a,b,c){if(0<this._popupStack.length){var e=this._popupStack.indexOf(a);if(-1!=e)for(var d=this._popupStack.length-1;d>=e;d--)this.removeChild(this._popupStack.pop())}this._popupStack.push(a);if(null!=b)for(e=b;null!=e;){if(e.parent==this){a.sortingOrder<e.sortingOrder&&(a.sortingOrder=e.sortingOrder);break}e=e.parent}this.addChild(a);this.adjustModalLayer();var g=d=0;b?(e=b.localToGlobal(),d=b.width,g=b.height):e=this.globalToLocal(k.stage.mouseX,k.stage.mouseY);b=e.x;b+a.width>this.width&&(b=b+d-a.width);g=e.y+g;if(null==c&&g+a.height>this.height||0==c)g=e.y-a.height-1,0>g&&(g=0,b+=d/2);a.x=b;a.y=g};c.togglePopup=function(a,b,c){-1==this._justClosedPopups.indexOf(a)&&this.showPopup(a,b,c)};c.hidePopup=function(a){if(null!=a){if(a=this._popupStack.indexOf(a),-1!=a)for(var b=this._popupStack.length-1;b>=a;b--)this.closePopup(this._popupStack.pop())}else{for(b=this._popupStack.length-1;0<=b;b--)this.closePopup(this._popupStack[b]);this._popupStack.length=0}};c.closePopup=function(a){null!=a.parent&&(a instanceof fairygui.Window?a.hide():this.removeChild(a))};c.showTooltips=function(a){if(null==this._defaultTooltipWin){var b=p.tooltipsWin;if(!b){R.print("UIConfig.tooltipsWin not defined");return}this._defaultTooltipWin=z.createObjectFromURL(b)}this._defaultTooltipWin.text=a;this.showTooltipsWin(this._defaultTooltipWin)};c.showTooltipsWin=function(a,b){this.hideTooltips();this._tooltipWin=a;var c,d;null==b?(c=k.stage.mouseX+10,d=k.stage.mouseY+20):(c=b.x,d=b.y);d=this.globalToLocal(c,d);c=d.x;d=d.y;c+this._tooltipWin.width>this.width&&(c=c-this._tooltipWin.width-1,0>c&&(c=10));d+this._tooltipWin.height>this.height&&(d=d-this._tooltipWin.height-1,0<c-this._tooltipWin.width-1&&(c=c-this._tooltipWin.width-1),0>d&&(d=10));this._tooltipWin.x=c;this._tooltipWin.y=d;this.addChild(this._tooltipWin)};c.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)};c.getObjectUnderPoint=function(a,b){return null};c.setFocus=function(a){this._focusedObject!=a&&(this._focusedObject=a,this.displayObject.event("fui_focus_changed"))};c.playOneShotSound=function(a,b){t.startsWith(a,"ui://")||V.playSound(a)};c.adjustModalLayer=function(){var a=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,a-1);for(--a;0<=a;a--){var b=this.getChildAt(a);if(b instanceof fairygui.Window&&b.modal){null==this._modalLayer.parent?this.addChildAt(this._modalLayer,a):this.setChildIndexBefore(this._modalLayer,a);return}}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)};c.__addedToStage=function(){k.stage.on("mousedown",this,this.__stageMouseDown);k.stage.on("mouseup",this,this.__stageMouseUp);this._modalLayer=new xa;this._modalLayer.setSize(this.width,this.height);this._modalLayer.drawRect(0,null,p.modalLayerColor);this._modalLayer.addRelation(this,24);this.displayObject.stage.on("resize",this,this.__winResize);this.__winResize()};c.checkPopups=function(a){if(!this._checkPopups&&(this._checkPopups=!0,this._justClosedPopups.length=0,0<this._popupStack.length)){for(var b=a;b!=this.displayObject.stage&&null!=b;){if(b.$owner&&(a=this._popupStack.indexOf(b.$owner),-1!=a)){for(b=this._popupStack.length-1;b>a;b--){var c=this._popupStack.pop();this.closePopup(c);this._justClosedPopups.push(c)}return}b=b.parent}for(b=this._popupStack.length-1;0<=b;b--)c=this._popupStack[b],this.closePopup(c),this._justClosedPopups.push(c);this._popupStack.length=0}};c.__stageMouseDown=function(a){for(var b=a.target;b!=this.displayObject.stage&&null!=b;){if(b.$owner){var c=b.$owner;if(c.touchable&&c.focusable){this.setFocus(c);break}}b=b.parent}null!=this._tooltipWin&&this.hideTooltips();this.checkPopups(a.target)};c.__stageMouseUp=function(){this._checkPopups=!1};c.__winResize=function(){this.setSize(k.stage.width,k.stage.height)};g(0,c,"focus",function(){this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null);return this._focusedObject},function(a){if(a&&(!a.focusable||!a.onStage))throw"invalid focus target";this.setFocus(a)});g(0,c,"hasAnyPopup",function(){return 0!=this._popupStack.length});g(0,c,"modalLayer",function(){return this._modalLayer});g(0,c,"hasModalWindow",function(){return null!=this._modalLayer.parent});g(0,c,"modalWaiting",function(){return this._modalWaitPane&&this._modalWaitPane.inContainer});g(0,c,"volumeScale",function(){return V.soundVolume},function(a){V.soundVolume=a});g(1,d,"inst",function(){null==fairygui.GRoot._inst&&new d;return fairygui.GRoot._inst},fairygui.GComponent._$SET_inst);d._inst=null;return d}(L),eb=function(c){function d(){this._values=this._icons=this._items=this._list=this._iconObject=this._titleObject=this.dropdown=null;this._visibleItemCount=this._popupDirection=0;this._itemsUpdated=!1;this._selectedIndex=0;this._selectionController=this._buttonController=null;this._over=this._down=!1;d.__super.call(this);this._visibleItemCount=p.defaultComboBoxVisibleItemCount;this._itemsUpdated=!0;this._selectedIndex=-1;this._items=[];this._values=[]}m(d,"fairygui.GComboBox",c);var a=d.prototype;a.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null};a.setState=function(a){this._buttonController&&(this._buttonController.selectedPage=a)};a.handleControllerChanged=function(a){c.prototype.handleControllerChanged.call(this,a);this._selectionController==a&&(this.selectedIndex=a.selectedIndex)};a.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var a=this._selectionController;this._selectionController=null;a.selectedIndex=this._selectedIndex;this._selectionController=a}};a.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null);this._selectionController=null;c.prototype.dispose.call(this)};a.constructExtension=function(a){this._buttonController=this.getController("button");this._titleObject=this.getChild("title");this._iconObject=this.getChild("icon");if(a=a.readS()){this.dropdown=z.createObjectFromURL(a);if(!this.dropdown){R.print("\u4e0b\u62c9\u6846\u5fc5\u987b\u4e3a\u5143\u4ef6");return}this.dropdown.name="this._dropdownObject";this._list=this.dropdown.getChild("list").asList;if(null==this._list){R.print(this.resourceURL+": \u4e0b\u62c9\u6846\u7684\u5f39\u51fa\u5143\u4ef6\u91cc\u5fc5\u987b\u5305\u542b\u540d\u4e3alist\u7684\u5217\u8868");return}this._list.on("fui_click_item",this,this.__clickItem);this._list.addRelation(this.dropdown,14);this._list.removeRelation(this.dropdown,15);this.dropdown.addRelation(this._list,15);this.dropdown.removeRelation(this._list,14);this.dropdown.displayObject.on("undisplay",this,this.__popupWinClosed)}this.on("mouseover",this,this.__rollover);this.on("mouseout",this,this.__rollout);this.on("mousedown",this,this.__mousedown)};a.setup_afterAdd=function(a,e){c.prototype.setup_afterAdd.call(this,a,e);if(a.seek(e,6)&&a.readByte()==this.packageItem.objectType){var b,d,g,k=a.getInt16();for(b=0;b<k;b++)d=a.getInt16(),d+=a.pos,this._items[b]=a.readS(),this._values[b]=a.readS(),g=a.readS(),null!=g&&(null==this._icons&&(this._icons=[]),this._icons[b]=g),a.pos=d;g=a.readS();null!=g?(this.text=g,this._selectedIndex=this._items.indexOf(g)):0<this._items.length?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1;g=a.readS();null!=g&&(this.icon=g);a.readBool()&&(this.titleColor=a.readColorS());b=a.getInt32();0<b&&(this._visibleItemCount=b);this._popupDirection=a.readByte();b=a.getInt16();0<=b&&(this._selectionController=this.parent.getControllerAt(b))}};a.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1;this._list.removeChildrenToPool();for(var a=this._items.length,c=0;c<a;c++){var d=this._list.addItemFromPool();d.name=c<this._values.length?this._values[c]:"";d.text=this._items[c];d.icon=null!=this._icons&&c<this._icons.length?this._icons[c]:null}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1;this.dropdown.width=this.width;a=null;2==this._popupDirection?a=!0:1==this._popupDirection&&(a=!1);this.root.togglePopup(this.dropdown,this,a);this.dropdown.parent&&this.setState("down")};a.__popupWinClosed=function(){this._over?this.setState("over"):this.setState("up")};a.__clickItem=function(a,c){k.timer.callLater(this,this.__clickItem2,[this._list.getChildIndex(a),c])};a.__clickItem2=function(a,c){this.dropdown.parent instanceof fairygui.GRoot&&this.dropdown.parent.hidePopup();this._selectedIndex=-1;this.selectedIndex=a;A.dispatch("fui_state_changed",this.displayObject,c)};a.__rollover=function(){this._over=!0;this._down||this.dropdown&&this.dropdown.parent||this.setState("over")};a.__rollout=function(){this._over=!1;this._down||this.dropdown&&this.dropdown.parent||this.setState("up")};a.__mousedown=function(a){a.target instanceof laya.display.Input||(this._down=!0,C.inst.checkPopups(a.target),k.stage.on("mouseup",this,this.__mouseup),this.dropdown&&this.showDropdown())};a.__mouseup=function(){this._down&&(this._down=!1,k.stage.off("mouseup",this,this.__mouseup),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState("over"):this.setState("up")))};g(0,a,"text",function(){return this._titleObject?this._titleObject.text:null},function(a){this._titleObject&&(this._titleObject.text=a);this.updateGear(6)});g(0,a,"titleColor",function(){var a=this.getTextField();return null!=a?a.color:"#000000"},function(a){var b=this.getTextField();null!=b&&(b.color=a);this.updateGear(4)});g(0,a,"titleFontSize",function(){var a=this.getTextField();return null!=a?a.fontSize:0},function(a){var b=this.getTextField();null!=b&&(b.fontSize=a)});g(0,a,"icon",function(){return this._iconObject?this._iconObject.icon:null},function(a){this._iconObject&&(this._iconObject.icon=a);this.updateGear(7)});g(0,a,"icons",function(){return this._icons},function(a){this._icons=a;null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])});g(0,a,"selectionController",function(){return this._selectionController},function(a){this._selectionController=a});g(0,a,"visibleItemCount",function(){return this._visibleItemCount},function(a){this._visibleItemCount=a});g(0,a,"popupDirection",function(){return this._popupDirection},function(a){this._popupDirection=a});g(0,a,"items",function(){return this._items},function(a){a?this._items=a.concat():this._items.length=0;0<this._items.length?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1);this._itemsUpdated=!0});g(0,a,"values",function(){return this._values},function(a){a?this._values=a.concat():this._values.length=0});g(0,a,"selectedIndex",function(){return this._selectedIndex},function(a){this._selectedIndex!=a&&(this._selectedIndex=a,0<=this._selectedIndex&&this._selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController())});g(0,a,"value",function(){return this._values[this._selectedIndex]},function(a){this.selectedIndex=this._values.indexOf(a)});return d}(L),Xa=function(c){function d(){this.div=null;this._ubbEnabled=!1;this._color=null;d.__super.call(this);this._text=""}m(d,"fairygui.GRichTextField",c);c=d.prototype;c.createDisplayObject=function(){this._displayObject=this.div=new Ba;this._displayObject.mouseEnabled=!0;this._displayObject.$owner=this};c.handleSizeChanged=function(){this.div.size(this.width,this.height);this.div.style.width=this.width;this.div.style.height=this.height};g(0,c,"bold",function(){return this.div.style.bold},function(a){this.div.style.bold=a});g(0,c,"align",function(){return this.div.style.align},function(a){this.div.style.align=a});g(0,c,"text",function(){return this._text},function(a){a=this._text=a;null!=this._templateVars&&(a=this.parseTemplate(a));this.div.innerHTML=this._ubbEnabled?t.parseUBB(a):a});g(0,c,"color",function(){return this._color},function(a){this._color!=a&&(this._color=a,this.div.style.color=a,this._gearColor.controller&&this._gearColor.updateState())});g(0,c,"font",function(){return this.div.style.font},function(a){this.div.style.font=a?a:p.defaultFont});g(0,c,"leading",function(){return this.div.style.leading},function(a){this.div.style.leading=a});g(0,c,"fontSize",function(){return this.div.style.fontSize},function(a){this.div.style.fontSize=a});g(0,c,"valign",function(){return this.div.style.valign},function(a){this.div.style.valign=a});g(0,c,"italic",function(){return this.div.style.italic},function(a){this.div.style.italic=a});g(0,c,"stroke",function(){return this.div.style.stroke},function(a){this.div.style.stroke=a});g(0,c,"strokeColor",function(){return this.div.style.strokeColor},function(a){this.div.style.strokeColor=a;this.updateGear(4)});g(0,c,"ubbEnabled",function(){return this._ubbEnabled},function(a){this._ubbEnabled=a});return d}(P),Ya=function(c){function d(){this.input=null;d.__super.call(this)}m(d,"fairygui.GTextInput",c);var a=d.prototype;a.createDisplayObject=function(){this._displayObject=this.input=new Ca;this._displayObject.mouseEnabled=!0;this._displayObject.$owner=this};a.handleSizeChanged=function(){this.input.size(this.width,this.height)};a.setup_beforeAdd=function(a,e){c.prototype.setup_beforeAdd.call(this,a,e);a.seek(e,4);var b=a.readS();null!=b&&(this.promptText=b);b=a.readS();null!=b&&(this.input.restrict=b);b=a.getInt32();0!=b&&(this.input.maxChars=b);b=a.getInt32();0!=b&&(4==b?this.keyboardType="number":3==b&&(this.keyboardType="url"));a.readBool()&&(this.password=!0)};g(0,a,"bold",function(){return this.input.bold},function(a){this.input.bold=a});g(0,a,"align",function(){return this.input.align},function(a){this.input.align=a});g(0,a,"text",function(){return this.input.text},function(a){this.input.text=a});g(0,a,"password",function(){return"password"==this.input.type},function(a){this.input.type=a?"password":"text"});g(0,a,"color",function(){return this.input.color},function(a){this.input.color=a});g(0,a,"font",function(){return this.input.font},function(a){this.input.font=a});g(0,a,"leading",function(){return this.input.leading},function(a){this.input.leading=a});g(0,a,"maxLength",function(){return this.input.maxChars},function(a){this.input.maxChars=a});g(0,a,"fontSize",function(){return this.input.fontSize},function(a){this.input.fontSize=a});g(0,a,"valign",function(){return this.input.valign},function(a){this.input.valign=a});g(0,a,"italic",function(){return this.input.italic},function(a){this.input.italic=a});g(0,a,"singleLine",function(){return!this.input.multiline},function(a){this.input.multiline=!a});g(0,a,"stroke",function(){return this.input.stroke},function(a){this.input.stroke=a});g(0,a,"strokeColor",function(){return this.input.strokeColor},function(a){this.input.strokeColor=a;this.updateGear(4)});g(0,a,"keyboardType",function(){return this.input.type},function(a){this.input.type=a});g(0,a,"editable",function(){return this.input.editable},function(a){this.input.editable=a});g(0,a,"promptText",function(){return this.input.prompt},function(a){this.input.prompt=a});g(0,a,"restrict",function(){return this.input.restrict},function(a){this.input.restrict=a});g(0,a,"textWidth",function(){return this.input.textWidth});return d}(P),$a=function(c){function d(){this._relatedController=this._iconObject=this._titleObject=null;this._mode=0;this._selected=!1;this._sound=this._selectedIcon=this._icon=this._selectedTitle=this._title=null;this._soundVolumeScale=0;this._buttonController=this._pageOption=null;this._changeStateOnClick=!1;this._linkedPopup=null;this._downEffectValue=this._downEffect=0;this._over=this._down=this._downScaled=!1;d.__super.call(this);this._mode=0;this._icon=this._title="";this._sound=p.buttonSound;this._soundVolumeScale=p.buttonSoundVolumeScale;this._pageOption=new Sa;this._changeStateOnClick=!0;this._downEffectValue=.8}m(d,"fairygui.GButton",c);var a=d.prototype;a.getTextField=function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject:this._titleObject instanceof fairygui.GLabel?this._titleObject.getTextField():this._titleObject instanceof fairygui.GButton?this._titleObject.getTextField():null};a.fireClick=function(a){void 0===a&&(a=!0);a&&0==this._mode&&(this.setState("over"),k.timer.once(100,this,this.setState,["down"],!1),k.timer.once(200,this,this.setState,["up"],!1));this.__click(A.createEvent("click",this.displayObject))};a.setState=function(a){this._buttonController&&(this._buttonController.selectedPage=a);if(1==this._downEffect){var b=this.numChildren;if("down"==a||"selectedOver"==a||"selectedDisabled"==a){a=255*this._downEffectValue;a=X.toHexColor((a<<16)+(a<<8)+a);for(var c=0;c<b;c++){var d=this.getChildAt(c);if(d instanceof fairygui.GImage||d instanceof fairygui.GLoader||d instanceof fairygui.GMovieClip)d.color=a}}else for(c=0;c<b;c++)if(d=this.getChildAt(c),d instanceof fairygui.GImage||d instanceof fairygui.GLoader||d instanceof fairygui.GMovieClip)d.color="#FFFFFF"}else 2==this._downEffect&&("down"==a||"selectedOver"==a||"selectedDisabled"==a?this._downScaled||(this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue),this._downScaled=!0):this._downScaled&&(this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue),this._downScaled=!1))};a.handleControllerChanged=function(a){c.prototype.handleControllerChanged.call(this,a);this._relatedController==a&&(this.selected=this._pageOption.id==a.selectedPageId)};a.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage("disabled")?this.grayed?this._selected&&this._buttonController.hasPage("selectedDisabled")?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState("down"):this.setState("up"):c.prototype.handleGrayedChanged.call(this)};a.constructExtension=function(a){a.seek(0,6);this._mode=a.readByte();var b=a.readS();b&&(this._sound=b);this._soundVolumeScale=a.getFloat32();this._downEffect=a.readByte();this._downEffectValue=a.getFloat32();2==this._downEffect&&this.setPivot(.5,.5,this.pivotAsAnchor);this._buttonController=this.getController("button");this._titleObject=this.getChild("title");this._iconObject=this.getChild("icon");null!=this._titleObject&&(this._title=this._titleObject.text);null!=this._iconObject&&(this._icon=this._iconObject.icon);0==this._mode&&this.setState("up");this.on("mouseover",this,this.__rollover);this.on("mouseout",this,this.__rollout);this.on("mousedown",this,this.__mousedown);this.on("click",this,this.__click)};a.setup_afterAdd=function(a,e){c.prototype.setup_afterAdd.call(this,a,e);if(a.seek(e,6)&&a.readByte()==this.packageItem.objectType){var b;b=a.readS();null!=b&&(this.title=b);b=a.readS();null!=b&&(this.selectedTitle=b);b=a.readS();null!=b&&(this.icon=b);b=a.readS();null!=b&&(this.selectedIcon=b);a.readBool()&&(this.titleColor=a.readColorS());b=a.getInt32();0!=b&&(this.titleFontSize=b);b=a.getInt16();0<=b&&(this._relatedController=this.parent.getControllerAt(b));this.pageOption.id=a.readS();b=a.readS();null!=b&&(this._sound=b);a.readBool()&&(this._soundVolumeScale=a.getFloat32());this.selected=a.readBool()}};a.__rollover=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!0,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"selectedOver":"over"))};a.__rollout=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!1,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"down":"up"))};a.__mousedown=function(a){this._down=!0;C.inst.checkPopups(a.target);k.stage.on("mouseup",this,this.__mouseup);0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("selectedDisabled"):this.setState("down"));null!=this._linkedPopup&&(this._linkedPopup instanceof fairygui.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this))};a.__mouseup=function(){this._down&&(k.stage.off("mouseup",this,this.__mouseup),this._down=!1,null!=this._displayObject&&0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("disabled"):this._over?this.setState("over"):this.setState("up")))};a.__click=function(a){if(this._sound){var b=z.getItemByURL(this._sound);b?C.inst.playOneShotSound(b.file):C.inst.playOneShotSound(this._sound)}1==this._mode?this._changeStateOnClick&&(this.selected=!this._selected,A.dispatch("fui_state_changed",this.displayObject,a)):2==this._mode?this._changeStateOnClick&&!this._selected&&(this.selected=!0,A.dispatch("fui_state_changed",this.displayObject,a)):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id)};g(0,a,"relatedController",function(){return this._relatedController},function(a){a!=this._relatedController&&(this._relatedController=a,this._pageOption.controller=a,this._pageOption.clear())});g(0,a,"icon",function(){return this._icon},function(a){this._icon=a;a=this._selected&&this._selectedIcon?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=a);this.updateGear(7)});g(0,a,"titleFontSize",function(){var a=this.getTextField();return null!=a?a.fontSize:0},function(a){var b=this.getTextField();null!=b&&(b.fontSize=a)});g(0,a,"selectedIcon",function(){return this._selectedIcon},function(a){this._selectedIcon=a;a=this._selected&&this._selectedIcon?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=a)});g(0,a,"title",function(){return this._title},function(a){this._title=a;this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title);this.updateGear(6)});g(0,a,"text",function(){return this.title},function(a){this.title=a});g(0,a,"selectedTitle",function(){return this._selectedTitle},function(a){this._selectedTitle=a;this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)});g(0,a,"soundVolumeScale",function(){return this._soundVolumeScale},function(a){this._soundVolumeScale=a});g(0,a,"sound",function(){return this._sound},function(a){this._sound=a});g(0,a,"titleColor",function(){var a=this.getTextField();return null!=a?a.color:"#000000"},function(a){var b=this.getTextField();null!=b&&(b.color=a);this.updateGear(4)});g(0,a,"selected",function(){return this._selected},function(a){0!=this._mode&&this._selected!=a&&(this._selected=a,this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this._selected?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState(this._over?"selectedOver":"down"):this.setState(this._over?"over":"up"),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon&&(a=this._selected?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=a)),this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController.autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):1==this._mode&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id)))});g(0,a,"mode",function(){return this._mode},function(a){this._mode!=a&&(0==a&&(this.selected=!1),this._mode=a)});g(0,a,"pageOption",function(){return this._pageOption});g(0,a,"changeStateOnClick",function(){return this._changeStateOnClick},function(a){this._changeStateOnClick=a});g(0,a,"linkedPopup",function(){return this._linkedPopup},function(a){this._linkedPopup=a});d.UP="up";d.DOWN="down";d.OVER="over";d.SELECTED_OVER="selectedOver";d.DISABLED="disabled";d.SELECTED_DISABLED="selectedDisabled";return d}(L),va=function(c){function d(){this._color=this._font=this.textField=null;this._singleLine=this._ubbEnabled=!1;this._autoSize=this._letterSpacing=0;this._updatingSize=this._heightAutoSize=this._widthAutoSize=!1;this._textHeight=this._textWidth=0;this._lines=this._bitmapFont=null;d.__super.call(this);this._text="";this._color="#000000";this.textField.align="left";this.textField.font=p.defaultFont;this._autoSize=1;this._widthAutoSize=this._heightAutoSize=!0;this.textField._sizeDirty=!1}var a,b;m(d,"fairygui.GBasicTextField",c);c=d.prototype;c.createDisplayObject=function(){this._displayObject=this.textField=new b(this);this._displayObject.$owner=this;this._displayObject.mouseEnabled=!1};c.setAutoSize=function(a){this._autoSize=a;this._widthAutoSize=1==a;this._heightAutoSize=1==a||2==a;this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine;this._underConstruct||(this._heightAutoSize?this._widthAutoSize||(this.textField.width=this.width):this.textField.size(this.width,this.height))};c.ensureSizeCorrect=function(){!this._underConstruct&&this.textField._isChanged&&this.textField.typeset()};c.typeset=function(){null!=this._bitmapFont?this.renderWithBitmapFont():(this._widthAutoSize||this._heightAutoSize)&&this.updateSize()};c.updateSize=function(){this._textWidth=Math.ceil(this.textField.textWidth);this._textHeight=Math.ceil(this.textField.textHeight);var a,b;this._widthAutoSize?(a=this._textWidth,this.textField.width!=a&&(this.textField.width=a,"left"!=this.textField.align&&this.textField.baseTypeset())):a=this.width;this._heightAutoSize?(b=this._textHeight,this._widthAutoSize||this.textField.height==this._textHeight||(this.textField.height=this._textHeight)):(b=this.height,this._textHeight>b&&(this._textHeight=b),this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight));this._updatingSize=!0;this.setSize(a,b);this._updatingSize=!1};c.renderWithBitmapFont=function(){var b=this._displayObject.graphics;b.clear();this._lines?a.returnList(this._lines):this._lines=[];var c=this.letterSpacing,d=this.leading-1,g=this.width-4,k=0,l=0,h=0,m,p,v=0,q=0,y=0,z=0,w="",A=2,x,u=!this._widthAutoSize&&!this._singleLine,B=this.fontSize,C=this._bitmapFont.resizable?B/this._bitmapFont.size:1;this._textHeight=this._textWidth=0;var D=this._text;null!=this._templateVars&&(D=this.parseTemplate(D));for(var E=D.length,F=0;F<E;++F){var G=D.charAt(F);p=G.charCodeAt(0);10==p?(w+=G,x=a.borrow(),x.width=k,0==h&&(0==z&&(z=B),0==l&&(l=z),h=l),z=x.height=l,x.textHeight=h,x.text=w,x.y=A,A+=x.height+d,x.width>this._textWidth&&(this._textWidth=x.width),this._lines.push(x),w="",y=q=v=h=l=k=0):(65<=p&&90>=p||97<=p&&122>=p?(0==v&&(q=k),v++):(0<v&&(y=k),v=0),32==p?(m=Math.ceil(B/2),p=B):(p=this._bitmapFont.glyphs[G])?(m=Math.ceil(p.advance*C),p=Math.ceil(p.lineHeight*C)):p=m=0,p>h&&(h=p),p>l&&(l=p),0!=k&&(k+=c),k+=m,!u||k<=g?w+=G:(x=a.borrow(),x.height=l,x.textHeight=h,0==w.length?x.text=G:0<v&&0<y?(w+=G,G=w.length-v,x.text=t.trimRight(w.substr(0,G)),x.width=y,w=w.substr(G),k-=q):(x.text=w,x.width=k-(m+c),w=G,k=m,h=l=p),x.y=A,A+=x.height+d,x.width>this._textWidth&&(this._textWidth=x.width),y=q=v=0,this._lines.push(x)))}0<w.length&&(x=a.borrow(),x.width=k,0==l&&(l=z),0==h&&(h=l),x.height=l,x.textHeight=h,x.text=w,x.y=A,x.width>this._textWidth&&(this._textWidth=x.width),this._lines.push(x));0<this._textWidth&&(this._textWidth+=4);0==this._lines.length?this._textHeight=0:(x=this._lines[this._lines.length-1],this._textHeight=x.y+x.height+2);g=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width;x=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height;this._updatingSize=!0;this.setSize(g,x);this._updatingSize=!1;this.doAlign();if(0!=g&&0!=x)for(g=this.width-4,l=this._lines.length,h=0;h<l;h++)for(x=this._lines[h],d=2,k="center"==this.align?(g-x.width)/2:"right"==this.align?g-x.width:0,E=x.text.length,q=0;q<E;q++)G=x.text.charAt(q),p=G.charCodeAt(0),10!=p&&(32==p?d+=this._letterSpacing+Math.ceil(B/2):(p=this._bitmapFont.glyphs[G],null!=p?(G=(x.height+x.textHeight)/2-Math.ceil(p.lineHeight*C),p.texture&&b.drawTexture(p.texture,d+k+Math.ceil(p.offsetX*C),x.y+G+Math.ceil(p.offsetY*C),p.texture.width*C,p.texture.height*C),d+=c+Math.ceil(p.advance*C)):d+=c))};c.handleSizeChanged=function(){this._updatingSize||(this._underConstruct?this.textField.size(this.width,this.height):null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.textField.setChanged():this._widthAutoSize||(this._heightAutoSize?this.textField.width=this.width:this.textField.size(this.width,this.height)))};c.handleGrayedChanged=function(){fairygui.GObject.prototype.handleGrayedChanged.call(this);this.textField.color=this.grayed?"#AAAAAA":this._color};c.doAlign=function(){if("top"==this.valign||0==this._textHeight)this._yOffset=2;else{var a=this.height-this._textHeight;0>a&&(a=0);this._yOffset="middle"==this.valign?Math.floor(a/2):Math.floor(a)}this.handleXYChanged()};c.flushVars=function(){this.text=this._text};g(0,c,"bold",function(){return this.textField.bold},function(a){this.textField.bold=a});g(0,c,"letterSpacing",function(){return this._letterSpacing},function(a){this._letterSpacing=a});g(0,c,"align",function(){return this.textField.align},function(a){this.textField.align=a});g(0,c,"text",function(){return this._text},function(a){this._text=a;null==this._text&&(this._text="");null==this._bitmapFont?(this._widthAutoSize&&(this.textField.width=1E4),a=this._text,null!=this._templateVars&&(a=this.parseTemplate(a)),this.textField.text=this._ubbEnabled?t.removeUBB(t.encodeHTML(a)):a):(this.textField.text="",this.textField.setChanged());this.parent&&this.parent._underConstruct&&this.textField.typeset()});g(0,c,"color",function(){return this._color},function(a){this._color!=a&&(this._color=a,this._gearColor.controller&&this._gearColor.updateState(),this.textField.color=this.grayed?"#AAAAAA":this._color)});g(0,c,"font",function(){return this.textField.font},function(a){this._font=a;t.startsWith(this._font,"ui://")?this._bitmapFont=z.getItemAssetByURL(this._font):this._bitmapFont=null;null!=this._bitmapFont?this.textField.setChanged():this.textField.font=this._font?this._font:p.defaultFont});g(0,c,"leading",function(){return this.textField.leading},function(a){this.textField.leading=a});g(0,c,"fontSize",function(){return this.textField.fontSize},function(a){this.textField.fontSize=a});g(0,c,"valign",function(){return this.textField.valign},function(a){this.textField.valign=a});g(0,c,"italic",function(){return this.textField.italic},function(a){this.textField.italic=a});g(0,c,"underline",function(){return this.textField.underline},function(a){this.textField.underline=a});g(0,c,"singleLine",function(){return this._singleLine},function(a){this._singleLine=a;this.textField.wordWrap=!this._widthAutoSize&&!this._singleLine});g(0,c,"stroke",function(){return this.textField.stroke},function(a){this.textField.stroke=a});g(0,c,"strokeColor",function(){return this.textField.strokeColor},function(a){this.textField.strokeColor=a;this.updateGear(4)});g(0,c,"ubbEnabled",function(){return this._ubbEnabled},function(a){this._ubbEnabled=a});g(0,c,"autoSize",function(){return this._autoSize},function(a){this._autoSize!=a&&this.setAutoSize(a)});g(0,c,"textWidth",function(){this.textField._isChanged&&this.textField.typeset();return this._textWidth});d.GUTTER_X=2;d.GUTTER_Y=2;d.__init$=function(){a=function(){function a(){this.textHeight=this.height=this.width=0;this.text=null;this.y=0}m(a,"");a.borrow=function(){if(a.pool.length){var b=a.pool.pop();b.width=0;b.height=0;b.textHeight=0;b.text=null;b.y=0;return b}return new a};a.returns=function(b){a.pool.push(b)};a.returnList=function(b){for(var c=b.length,d=0;d<c;d++)a.pool.push(b[d]);b.length=0};a.pool=[];return a}();b=function(a){function b(a){this._owner=null;this._sizeDirty=this._lock=!1;b.__super.call(this);this._owner=a}m(b,"",a);var c=b.prototype;c.baseTypeset=function(){this._lock=!0;this.typeset();this._lock=!1};c.typeset=function(){this._sizeDirty=!0;a.prototype.typeset.call(this);this._lock||this._owner.typeset();this._isChanged&&(k.timer.clear(this,this.typeset),this._isChanged=!1);this._sizeDirty=!1};c.setChanged=function(){this.isChanged=!0};g(0,c,"isChanged",null,function(a){a&&!this._sizeDirty&&0!=this._owner.autoSize&&this._owner.parent&&(this._sizeDirty=!0,this.event("fui_size_delay_change"));k.superSet(ia,this,"isChanged",a)});return b}(ia)};return d}(P),za=function(c){function d(){this._source=null;this._scaleByTile=!1;this._scale9Grid=null;this._fillAmount=this._fillOrigin=this._fillMethod=this._needRebuild=this._tileGridIndice=0;this._fillClockwise=!1;this._color=this._mask=null;d.__super.call(this);this.mouseEnabled=!1;this._color="#FFFFFF"}m(d,"fairygui.display.Image",c,"Image$1");var a=d.prototype;a.markChanged=function(a){this._needRebuild?this._needRebuild|=a:(this._needRebuild=a,k.timer.callLater(this,this.rebuild))};a.rebuild=function(){0!=(this._needRebuild&1)&&this.doDraw();0!=(this._needRebuild&2)&&0!=this._fillMethod&&this.doFill();this._needRebuild=0};a.doDraw=function(){var a=this._width,c=this._height,d=this.graphics,g=this._source;d.clear();if(null!=g&&0!=a&&0!=c)if(this._scaleByTile)d.fillTexture(g,0,0,a,c);else if(null!=this._scale9Grid){var k=g.width,m=g.height,l,h,p,t;c>=m-this._scale9Grid.height?(p=this._scale9Grid.y,t=m-this._scale9Grid.bottom):(h=this._scale9Grid.y/(m-this._scale9Grid.bottom),h=c*h/(1+h),p=Math.round(h),t=c-h);a>=k-this._scale9Grid.width?(l=this._scale9Grid.x,h=k-this._scale9Grid.right):(h=this._scale9Grid.x/(k-this._scale9Grid.right),h=a*h/(1+h),l=Math.round(h),h=a-h);var v=Math.max(a-l-h,0),q=Math.max(c-p-t,0);l&&p&&d.drawImage(fairygui.display.Image.getTexture(g,0,0,l,p),0,0,l,p);h&&p&&d.drawImage(fairygui.display.Image.getTexture(g,k-h,0,h,p),a-h,0,h,p);l&&t&&d.drawImage(fairygui.display.Image.getTexture(g,0,m-t,l,t),0,c-t,l,t);h&&t&&d.drawImage(fairygui.display.Image.getTexture(g,k-h,m-t,h,t),a-h,c-t,h,t);v&&p&&this.drawTexture(0,fairygui.display.Image.getTexture(g,l,0,k-l-h,p),l,0,v,p);v&&t&&this.drawTexture(1,fairygui.display.Image.getTexture(g,l,m-t,k-l-h,t),l,c-t,v,t);q&&l&&this.drawTexture(2,fairygui.display.Image.getTexture(g,0,p,l,m-p-t),0,p,l,q);q&&h&&this.drawTexture(3,fairygui.display.Image.getTexture(g,k-h,p,h,m-p-t),a-h,p,h,q);v&&q&&this.drawTexture(4,fairygui.display.Image.getTexture(g,l,p,k-l-h,m-p-t),l,p,v,q)}else d.drawImage(g,0,0,a,c)};a.drawTexture=function(a,c,d,g,k,m){void 0===k&&(k=0);void 0===m&&(m=0);-1==a||0==(this._tileGridIndice&1<<a)?this.graphics.drawImage(c,d,g,k,m):this.graphics.fillTexture(c,d,g,k,m)};a.doFill=function(){var a=this._width,c=this._height,d=this._mask.graphics;d.clear();0!=a&&0!=c&&(a=fb.fill(a,c,this._fillMethod,this._fillOrigin,this._fillClockwise,this._fillAmount),null==a?this.mask=this._mask:d.drawPoly(0,0,a,"#FFFFFF"))};g(0,a,"width",c.prototype._$get_width,function(a){this._width!==a&&(k.superSet(I,this,"width",a),this.markChanged(1))});g(0,a,"fillOrigin",function(){return this._fillOrigin},function(a){this._fillOrigin!=a&&(this._fillOrigin=a,0!=this._fillMethod&&this.markChanged(2))});g(0,a,"height",c.prototype._$get_height,function(a){this._height!==a&&(k.superSet(I,this,"height",a),this.markChanged(1))});g(0,a,"scaleByTile",function(){return this._scaleByTile},function(a){this._scaleByTile!=a&&(this._scaleByTile=a,this.markChanged(1))});g(0,a,"texture",function(){return this._source},function(a){this._source!=a&&(this._source=a,0==this._width&&(this._source?this.size(this._source.width,this._source.height):this.size(0,0)),this.repaint(),this.markChanged(1))});g(0,a,"scale9Grid",function(){return this._scale9Grid},function(a){this._scale9Grid=a;this.markChanged(1)});g(0,a,"tileGridIndice",function(){return this._tileGridIndice},function(a){this._tileGridIndice!=a&&(this._tileGridIndice=a,this.markChanged(1))});g(0,a,"fillMethod",function(){return this._fillMethod},function(a){this._fillMethod!=a&&(this._fillMethod=a,0!=this._fillMethod?(this._mask||(this._mask=new I,this._mask.mouseEnabled=!1),this.mask=this._mask,this.markChanged(2)):this.mask&&(this._mask.graphics.clear(),this.mask=null))});g(0,a,"fillClockwise",function(){return this._fillClockwise},function(a){this._fillClockwise!=a&&(this._fillClockwise=a,0!=this._fillMethod&&this.markChanged(2))});g(0,a,"fillAmount",function(){return this._fillAmount},function(a){this._fillAmount!=a&&(this._fillAmount=a,0!=this._fillMethod&&this.markChanged(2))});g(0,a,"color",function(){return this._color},function(a){this._color!=a&&(this._color=a)});d.getTexture=function(a,c,d,g,k){0>=g&&(g=1);0>=k&&(k=1);a.$_GID||(a.$_GID=X.getGID());var b;b&&b._getSource()||(b=W.createFromTexture(a,c,d,g,k));return b};return d}(I),ya=function(c){function d(){this.interval=0;this.swing=!1;this.repeatDelay=0;this.timeScale=1;this._playing=!0;this._frameCount=0;this._frames=null;this._status=this._endAt=this._times=this._end=this._start=this._frame=0;this._endHandler=null;this._frameElapsed=0;this._reversed=!1;this._repeatedCount=0;d.__super.call(this);this.mouseEnabled=!1;this.setPlaySettings();this.on("display",this,this.__addToStage);this.on("undisplay",this,this.__removeFromStage)}m(d,"fairygui.display.MovieClip",c,"MovieClip$1");c=d.prototype;c.rewind=function(){this._frameElapsed=this._frame=0;this._reversed=!1;this._repeatedCount=0;this.drawFrame()};c.syncStatus=function(a){this._frame=a._frame;this._frameElapsed=a._frameElapsed;this._reversed=a._reversed;this._repeatedCount=a._repeatedCount;this.drawFrame()};c.advance=function(a){for(var b=this._frame,c=this._reversed,d=a;;){var g=this.interval+this._frames[this._frame].addDelay;0==this._frame&&0<this._repeatedCount&&(g+=this.repeatDelay);if(a<g){this._frameElapsed=0;break}a-=g;this.swing?this._reversed?(this._frame--,0>=this._frame&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++));this._frame==b&&this._reversed==c&&(g=d-a,a-=Math.floor(a/g)*g)}this.drawFrame()};c.setPlaySettings=function(a,b,c,d,g){void 0===a&&(a=0);void 0===b&&(b=-1);void 0===c&&(c=0);void 0===d&&(d=-1);this._start=a;this._end=b;if(-1==this._end||this._end>this._frameCount-1)this._end=this._frameCount-1;this._times=c;this._endAt=d;-1==this._endAt&&(this._endAt=this._end);this._status=0;this._endHandler=g;this.frame=a};c.update=function(){if(this._playing&&0!=this._frameCount&&3!=this._status){var a=k.timer.delta;100<a&&(a=100);1!=this.timeScale&&(a*=this.timeScale);this._frameElapsed+=a;a=this.interval+this._frames[this._frame].addDelay;0==this._frame&&0<this._repeatedCount&&(a+=this.repeatDelay);this._frameElapsed<a||(this._frameElapsed-=a,this._frameElapsed>this.interval&&(this._frameElapsed=this.interval),this.swing?this._reversed?(this._frame--,0>=this._frame&&(this._frame=0,this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=Math.max(0,this._frameCount-2),this._repeatedCount++,this._reversed=!this._reversed)):(this._frame++,this._frame>this._frameCount-1&&(this._frame=0,this._repeatedCount++)),1==this._status?(this._frame=this._start,this._status=this._frameElapsed=0):2==this._status?(this._frame=this._endAt,this._frameElapsed=0,this._status=3,null!=this._endHandler&&(a=this._endHandler,this._endHandler=null,a.run())):this._frame==this._end&&(0<this._times?(this._times--,this._status=0==this._times?2:1):0!=this._start&&(this._status=1)),this.drawFrame())}};c.drawFrame=function(){this.texture=0<this._frameCount&&this._frame<this._frames.length?this._frames[this._frame].texture:null;this.rebuild()};c.checkTimer=function(){this._playing&&0<this._frameCount&&null!=this.stage?k.timer.frameLoop(1,this,this.update):k.timer.clear(this,this.update)};c.__addToStage=function(){this._playing&&0<this._frameCount&&k.timer.frameLoop(1,this,this.update)};c.__removeFromStage=function(){k.timer.clear(this,this.update)};g(0,c,"frames",function(){return this._frames},function(a){this._frames=a;this._scaleByTile=!1;this._scale9Grid=null;if(null!=this._frames){this._frameCount=this._frames.length;if(-1==this._end||this._end>this._frameCount-1)this._end=this._frameCount-1;if(-1==this._endAt||this._endAt>this._frameCount-1)this._endAt=this._frameCount-1;if(0>this._frame||this._frame>this._frameCount-1)this._frame=this._frameCount-1;this._repeatedCount=this._frameElapsed=0;this._reversed=!1}else this._frameCount=0;this.drawFrame();this.checkTimer()});g(0,c,"playing",function(){return this._playing},function(a){this._playing!=a&&(this._playing=a,this.checkTimer())});g(0,c,"frameCount",function(){return this._frameCount});g(0,c,"frame",function(){return this._frame},function(a){this._frame!=a&&(null!=this._frames&&a>=this._frameCount&&(a=this._frameCount-1),this._frame=a,this._frameElapsed=0,this.drawFrame())});return d}(za);k.__init([va,wa,ga,la,z,ba,sa,oa,ma,ka,Z])})(window,document,Laya);